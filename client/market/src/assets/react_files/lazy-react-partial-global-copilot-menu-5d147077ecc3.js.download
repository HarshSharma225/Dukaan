"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["lazy-react-partial-actions-survey","lazy-react-partial-enterprise-team","lazy-react-partial-global-copilot-menu","lazy-react-partial-single-sign-on-dropdown-partial","ui_packages_action-bar_src_OverflowMenu_module_css-ui_packages_action-bar_src_VisibleAndOverf-bdb970","ui_packages_document-metadata_document-metadata_ts-ui_packages_fetch-headers_fetch-headers_ts-57e0e0"],{10370:(e,t,n)=>{n.d(t,{A:()=>r});let r={container:"UserMessage-module__container--cAvvK",mention:"UserMessage-module__mention--JZHRf"}},78924:(e,t,n)=>{n.d(t,{I:()=>r});let r=(0,n(96540).createContext)(null)},52811:(e,t,n)=>{n.d(t,{C:()=>o,i:()=>s});var r=n(96679),a=n(27851),i=n(46493);function o(e,t){(0,a.G7)("arianotify_comprehensive_migration")?s(l(e),{...t,element:t?.element??e}):(0,a.G7)("primer_live_region_element")&&t?.element===void 0?(0,i.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):s(l(e),t)}function s(e,t){let{assertive:n,element:o}=t??{};(0,a.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(o||document.body).ariaNotify(e):(0,a.G7)("primer_live_region_element")&&void 0===o?(0,i.iP)(e,{politeness:n?"assertive":"polite"}):function(e,t,n){let a=n??r.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");a&&(a.textContent===e?a.textContent=`${e}\u00A0`:a.textContent=e)}(e,n,o)}function l(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},53005:(e,t,n)=>{n.d(t,{O:()=>o,S:()=>i});var r=n(96679);let a=r.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",i="X-GitHub-Client-Version";function o(){return a}},92520:(e,t,n)=>{function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Y:()=>AuthToken});let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,n){r(this,"value",void 0),r(this,"expiration",void 0),r(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=n}}},879:(e,t,n)=>{n.d(t,{J:()=>CopilotAuthTokenProvider});var r=n(92520),a=n(85351),i=n(60039);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?r.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,i.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let n=r.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(n),n}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",n="COPILOT_AUTH_TOKEN"){o(this,"tokenEndpoint",void 0),o(this,"storageKey",void 0),o(this,"ssoOrgIDs",void 0),o(this,"currentAuthTokenRequest",void 0),o(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=n,this.tokenEndpoint=t}}},54005:(e,t,n)=>{n.d(t,{J:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n,i,l=(0,r.c)(8),{onFilesDrop:c,fileAcceptanceFn:d,onRejectedFiles:u,targetElement:m}=e,[h,p]=(0,a.useState)(!1),f=(0,a.useRef)(0);return l[0]!==d||l[1]!==c||l[2]!==u||l[3]!==m?(t=()=>{if(!m)return;let e=e=>{s(e)&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer?.types.includes("Files")&&(f.current=f.current+1,1===f.current&&p(!0)))},t=e=>{e.preventDefault(),e.stopPropagation(),f.current=f.current-1,f.current<=0&&(f.current=0,p(!1))},n=e=>{if(!s(e))return;e.preventDefault(),e.stopPropagation(),f.current=0,p(!1);let t=e.dataTransfer?.files;if(t&&0!==t.length)if(d){let e=Array.from(t),n=[],r=[];for(let t=0;t<e.length;t++){let a=e[t];d(a,t,e)?n.push(a):r.push(a)}if(r.length>0&&u&&u(r),n.length>0){let e=new DataTransfer;for(let t of n)e.items.add(t);c(e.files,r.length>0)}}else c(t,!1)};return m.addEventListener("dragover",o),m.addEventListener("dragenter",e),m.addEventListener("dragleave",t),m.addEventListener("drop",n),()=>{m.removeEventListener("dragover",o),m.removeEventListener("dragenter",e),m.removeEventListener("dragleave",t),m.removeEventListener("drop",n)}},n=[c,d,u,m],l[0]=d,l[1]=c,l[2]=u,l[3]=m,l[4]=t,l[5]=n):(t=l[4],n=l[5]),(0,a.useEffect)(t,n),l[6]!==h?(i={isDragging:h},l[6]=h,l[7]=i):i=l[7],i}function o(e){e.preventDefault(),e.stopPropagation()}function s(e){return e instanceof DragEvent}},5878:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(21728),a=n(96540);function i(e){let t,n=(0,r.c)(2),[i,o]=(0,a.useState)(!1);return n[0]!==e.current?(t=()=>{let t=e.current,n=t?.lastElementChild;if(!n)return;let r=new IntersectionObserver(e=>{let[t]=e;return o(t?.isIntersecting??!0)},{root:t,threshold:1});return r.observe(n),()=>r.disconnect()},n[0]=e.current,n[1]=t):t=n[1],(0,a.useEffect)(t),i}},6612:(e,t,n)=>{n.d(t,{U:()=>d});var r=n(60439),a=n(40726),i=n(96540),o=n(18312),s=n(34901),l=n(47397),c=n(6901);function d(e,t,n,m,h=!1){let[p,f]=(0,i.useState)(),g=(0,i.useCallback)(()=>f(void 0),[]),{topRepositoriesCache:y,currentRepository:x}=(0,s.Pk)(),v=(0,l.b)(),[_,b]=(0,i.useState)([]),[S,w]=(0,i.useState)(!y&&"initial"),C=(0,i.useRef)(void 0),j=(0,o.useRelayEnvironment)(),N=m&&""!==m.trim();if(p&&!y&&!e&&!N){let e=u(p||[]),{ownerLogin:t,name:n}=x??{};x&&!e.find(e=>`${e.ownerLogin}/${e.name}`==`${t}/${n}`)&&e.splice(0,0,{databaseId:x.id,isInOrganization:"Organization"===x.ownerType,name:x.name,nwo:`${x.ownerLogin}/${x.name}`,ownerLogin:x.ownerLogin,ownerAvatarUrl:`/${x.ownerLogin}.png?s=40`}),setTimeout(()=>v.setTopRepositoryTopics(e),10),w(!1),f(void 0)}let I=(0,i.useCallback)(async()=>{try{let e=await (0,r.St)(j,{first:n,owner:N?m:void 0});f(e)}catch{}finally{w(!1)}},[N,m,j,f,n]);return((0,i.useEffect)(()=>{t&&!N&&I()},[I,N,t,m]),(0,i.useEffect)(()=>{let t=async e=>{w(!0);let{repositories:t}=await (0,r.vO)(j,{query:N?(0,c.rl)(m,e,h):(0,a.J)(e,{includeForks:h}),onStart:e=>{C.current?.unsubscribe(),C.current=e}});b(t.length?u(t):[]),w(!1)};e||N?t(e):y&&b(y)},[e,N,m,j,y,h]),(0,i.useEffect)(()=>{v.setTopRepositoryTopics(void 0)},[v,m]),!y||e||N)?{repositories:_,loading:S,resetTopRepoResults:g}:{repositories:y,loading:!1,resetTopRepoResults:g}}function u(e){return e.map(({owner:{login:e,avatarUrl:t},isInOrganization:n,name:r,databaseId:a})=>({databaseId:a??0,isInOrganization:n,name:r,nwo:`${e}/${r}`,ownerLogin:e,ownerAvatarUrl:t}))}},80597:(e,t,n)=>{n.d(t,{G:()=>c});var r=n(21728),a=n(55206),i=n(96540),o=n(34901),s=n(6901),l=n(44435);function c(){let e,t=(0,r.c)(1),n=(0,i.useRef)(null);t[0]===Symbol.for("react.memo_cache_sentinel")?(e=e=>{let t=(0,l.W)(e),r=(0,a.O)(t);return(0,s.Ym)(n.current,r)?n.current:(n.current=r,r)},t[0]=e):e=t[0];let c=(0,o.pn)(e);return(0,s.iI)()||c}},39818:(e,t,n)=>{n.d(t,{JE:()=>f,Z3:()=>h,bn:()=>m,kw:()=>g,qj:()=>p});var r=n(21728),a=n(97286),i=n(99837),o=n(96540),s=n(80597),l=n(22069),c=n(34901),d=n(47397),u=n(88011);let m="https://github.com/marketplace?type=apps&copilot_app=true",h="@",p=/^@(?<slug>\S+)$/;function f(e){let t,n,i,o,m,h,p=(0,r.c)(25),{agentsPath:f,model:g}=(0,c.bP)("agentsPath","model"),y=(0,u.tD)(),x=(0,d.b)(),v=!!(0,s.G)(),_=g?.hasLimitedCapabilities;p[0]!==y||p[1]!==v||p[2]!==_?(t=e=>{let{messages:t}=y();if(_||v)return{agents:[],showLimit:!1};let n=(0,l.Q7)(t)[0];return n?{agents:e.filter(e=>e.slug===n.name),showLimit:e.length>1}:{agents:e,showLimit:!1}},p[0]=y,p[1]=v,p[2]=_,p[3]=t):t=p[3];let b=t;p[4]!==f?(n=["copilot-chat","agents",f],p[4]=f,p[5]=n):n=p[5],p[6]!==f||p[7]!==x?(i=()=>f?x.fetchAgents(f):[],p[6]=f,p[7]=x,p[8]=i):i=p[8];let S=(void 0===e||e)&&!_&&!v;p[9]!==b||p[10]!==n||p[11]!==i||p[12]!==S?(o={queryKey:n,queryFn:i,select:b,enabled:S},p[9]=b,p[10]=n,p[11]=i,p[12]=S,p[13]=o):o=p[13];let{isLoading:w,data:C,refetch:j,isStale:N,isFetched:I}=(0,a.I)(o);p[14]!==C||p[15]!==I||p[16]!==N||p[17]!==j?(m=async()=>!I||N?(await j()).data:C,p[14]=C,p[15]=I,p[16]=N,p[17]=j,p[18]=m):m=p[18];let T=m,A=C?.agents,k=C?.showLimit??!1;return p[19]!==T||p[20]!==w||p[21]!==A||p[22]!==k||p[23]!==_?(h={loading:w,disabled:_,availableAgents:A,showLimit:k,imperativelyFetch:T},p[19]=T,p[20]=w,p[21]=A,p[22]=k,p[23]=_,p[24]=h):h=p[24],h}function g({inputOnChange:e,inputRef:t}){let n=(0,i.H)({inputRef:t,fallbackEventHandler:e});return(0,o.useCallback)((e="")=>{t.current?.value&&n(" ",[0,0]);let r=`${h}${e}`;n(r,[0,0],r.length)},[n,t])}},51295:(e,t,n)=>{n.d(t,{O:()=>r});function r(e,t){let n={};for(let r of e){let e=t(r);n[e]??(n[e]=[]),n[e].push(r)}return n}},33900:(e,t,n)=>{n.d(t,{Ld:()=>g,M8:()=>y,Tz:()=>S,W5:()=>m,cx:()=>f,r_:()=>b,vn:()=>_,xG:()=>h});var r=n(21728),a=n(26559),i=n(97665),o=n(40458),s=n(94747),l=n(97286),c=n(60039),d=n(96540),u=n(74244);n(34901),n(47397);let m={Unindexed:"not_indexed",Indexed:"indexed",Indexing:"indexing",PartiallyIndexed:"partially_indexed",Unknown:"unknown"},h={Requested:"requested",NotFound:"not_found",Unauthorized:"unauthorized",ServiceUnavailable:"service_unavailable",QuotaExhausted:"quota_exhausted",Forbidden:"forbidden",CanIndex:"ok",IndexingError:"indexing_error",RequestFailed:"request_failed",Unknown:"unknown"},p=[h.NotFound,h.Unauthorized,h.ServiceUnavailable,h.QuotaExhausted,h.Forbidden,h.RequestFailed],f=256,g=400;function y(e){var t,n;let a,l,c,d,u,f,g,y,_,b,S=(0,r.c)(22),w=(0,i.jE)();S[0]!==w||S[1]!==e?(a=()=>Promise.all(e.map(e=>w.invalidateQueries({queryKey:["copilot-chat","repos-indexing-state",e]}))),S[0]=w,S[1]=e,S[2]=a):a=S[2];let j=a;S[3]!==e?(l=e.map(v),S[3]=e,S[4]=l):l=S[4],S[5]!==l?(c={queries:l},S[5]=l,S[6]=c):c=S[6];let T=(0,o.E)(c);S[7]===Symbol.for("react.memo_cache_sentinel")?(d=["repos-indexing-state"],S[7]=d):d=S[7],S[8]!==e?(u=()=>C(e),S[8]=e,S[9]=u):u=S[9],S[10]!==j||S[11]!==u?(f={mutationKey:d,mutationFn:u,onSuccess:j},S[10]=j,S[11]=u,S[12]=f):f=S[12];let{mutate:A}=(0,s.n)(f);S[13]!==T?(g={requestStatus:0===(n=(t=T.map(x)).map(e=>e.requestStatus)).length?h.Unknown:n.some(e=>p.includes(e))?h.IndexingError:n.every(e=>e===h.CanIndex)?h.CanIndex:(n.every(e=>e===h.Unknown),h.Unknown),code:N(t.map(e=>e.code)),docs:N(t.map(e=>e.docs)),remainingRepoIndexTokens:t[0]?.remainingRepoIndexTokens},S[13]=T,S[14]=g):g=S[14];let k=g,E=k.code===m.Indexing&&k.requestStatus!==h.IndexingError;return S[15]!==j?(y=()=>void j(),S[15]=j,S[16]=y):y=S[16],I(y,1e4*!!E),S[17]!==A?(_=()=>A(),S[17]=A,S[18]=_):_=S[18],S[19]!==k||S[20]!==_?(b=[k,_],S[19]=k,S[20]=_,S[21]=b):b=S[21],b}function x(e){return e.data}function v(e){return{queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>w(e),placeholderData:{requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},staleTime:1/0}}function _(e){let t,n,a,o,c,d,u,p,f,g,y,x=(0,r.c)(23),v=(0,i.jE)();x[0]!==v||x[1]!==e?(t=()=>Promise.resolve(v.invalidateQueries({queryKey:["repo-indexing-state",e]})),x[0]=v,x[1]=e,x[2]=t):t=x[2];let _=t;x[3]!==e?(n=["copilot-chat","repo-indexing-state",e],a=()=>w(e),x[3]=e,x[4]=n,x[5]=a):(n=x[4],a=x[5]),x[6]===Symbol.for("react.memo_cache_sentinel")?(o={requestStatus:h.Unknown,code:m.Unknown,docs:m.Unknown},x[6]=o):o=x[6],x[7]!==n||x[8]!==a?(c={queryKey:n,queryFn:a,placeholderData:o,staleTime:1/0},x[7]=n,x[8]=a,x[9]=c):c=x[9];let b=(0,l.I)(c);x[10]===Symbol.for("react.memo_cache_sentinel")?(d=["repo-indexing-state"],x[10]=d):d=x[10],x[11]!==e?(u=()=>C([e]),x[11]=e,x[12]=u):u=x[12],x[13]!==_||x[14]!==u?(p={mutationKey:d,mutationFn:u,onSuccess:_},x[13]=_,x[14]=u,x[15]=p):p=x[15];let{mutate:S}=(0,s.n)(p),j=b.data,N=j.code===m.Indexing&&j.requestStatus!==h.IndexingError;return x[16]!==_?(f=()=>void _(),x[16]=_,x[17]=f):f=x[17],I(f,1e4*!!N),x[18]!==S?(g=()=>S(),x[18]=S,x[19]=g):g=x[19],x[20]!==j||x[21]!==g?(y=[j,g],x[20]=j,x[21]=g,x[22]=y):y=x[22],y}function b(e){let t,n=(0,r.c)(2);n[0]!==e?(t={queryKey:["copilot-chat","repos-indexing-state",e],queryFn:()=>j(e),staleTime:1/0},n[0]=e,n[1]=t):t=n[1];let a=(0,l.I)(t);return!a.isError&&!!a.data?.canChat}function S(){let e=u.J.getPanelHeight(),t=u.J.getPanelWidth(),n=(0,d.useRef)(null),r=(0,d.useRef)(e),a=(0,d.useRef)(e),i=(0,d.useRef)(null),o=(0,d.useRef)(t),s=(0,d.useRef)(t),[l,c]=(0,d.useState)(e),[m,h]=(0,d.useState)(t),p=(0,d.useRef)(0);(0,d.useEffect)(()=>{p.current=parseFloat(getComputedStyle(document.documentElement).fontSize)},[]);let y=e=>Math.min(Math.max(e,f),window.innerHeight-p.current),x=e=>Math.min(Math.max(e,g),window.innerWidth-2*p.current),v=(0,d.useCallback)(e=>{if(null!==n.current){let t=n.current-e.clientY,i=y(r.current+t);c(i),a.current=i}if(null!==i.current){let t=i.current-e.clientX,n=x(o.current+t);h(n),s.current=n}},[]),_=(0,d.useCallback)(()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",_),null!==n.current&&(u.J.setPanelHeight(a.current),n.current=null),null!==i.current&&(u.J.setPanelWidth(s.current),i.current=null)},[v]),b=(0,d.useCallback)((e,t,a)=>{0===e.button&&(e.preventDefault(),a&&(n.current=e.clientY,r.current=l),t&&(i.current=e.clientX,o.current=m),window.addEventListener("mousemove",v),window.addEventListener("mouseup",_))},[l,m,v,_]),S=(0,d.useCallback)(e=>{if("ArrowUp"===e.key){let t=y(l+4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowDown"===e.key){let t=y(l-4);c(t),u.J.setPanelHeight(t),e.preventDefault()}else if("ArrowRight"===e.key){let t=x(m-4);h(t),u.J.setPanelWidth(t),e.preventDefault()}else if("ArrowLeft"===e.key){let t=x(m+4);h(t),u.J.setPanelWidth(t),e.preventDefault()}},[l,m]);return{panelWidth:m,panelHeight:l,startResize:b,onResizerKeyDown:S}}async function w(e){let t=await fetch(`/search/check_indexing_status?nwo=${encodeURIComponent(e)}`,{headers:{Accept:"application/json",...(0,a.kt)()}});if(!t.ok)return{requestStatus:h.RequestFailed,code:m.Unknown,docs:m.Unknown};let n=await t.json();return{requestStatus:n.can_index,code:n.code_status,docs:n.docs_status}}async function C(e){let t=1===e.length?`nwo=${encodeURIComponent(e[0])}`:`nwos=${encodeURIComponent(JSON.stringify(e))}`;return(0,c.DI)(`/search/index_embeddings?${t}&index_code=true`,{method:"POST"})}async function j(e){let t=await fetch(`/github-copilot/docs/docsets/kb_indexed_repos?ids=${encodeURIComponent(JSON.stringify(e))}`,{headers:{Accept:"application/json",...(0,a.kt)()}});return t.ok?await t.json():{canChat:!1}}function N(e){return e.every(e=>e===m.Indexed)?m.Indexed:e.every(e=>e===m.Unindexed)?m.Unindexed:e.some(e=>e===m.Indexing)?m.Indexing:e.some(e=>e===m.Unindexed)?m.PartiallyIndexed:m.Unknown}function I(e,t){let n,a,i,o,s=(0,r.c)(6),l=(0,d.useRef)(void 0),c=(0,d.useRef)(e);return s[0]!==e?(n=()=>{c.current=e},a=[e],s[0]=e,s[1]=n,s[2]=a):(n=s[1],a=s[2]),(0,d.useEffect)(n,a),s[3]!==t?(i=()=>{if(t>0)return l.current=window.setInterval(()=>c.current(),t),()=>window.clearInterval(l.current)},o=[t],s[3]=t,s[4]=i,s[5]=o):(i=s[4],o=s[5]),(0,d.useEffect)(i,o),l}},22469:(e,t,n)=>{n.d(t,{s:()=>CopilotImageAttacher});var r=n(38007),a=n(22069),i=n(31971),o=n(53850),s=n(7324);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let c=["image/gif","image/jpeg","image/png","image/webp"];let CopilotImageAttacher=class CopilotImageAttacher{static getAllowedImageFileExtensions(e){return this.getFileExtensions(e).join(",")}static isTypeAllowed(e,t){return e=e.toLowerCase(),this.getMimeTypes(t).includes(e)}static getAllowedFiles(e,t){let[n,r]=e.reduce(([e,n],r)=>this.isTypeAllowed(r.type,t)?[[...e,r],n]:[e,[...n,r]],[[],[]]);return[n,r]}static getAttachmentLimit(){return i.W.attachMultipleImages?4:1}static getAttachmentSizeLimit(){return 3932160}static makeImageReference(e,t){let n=crypto.randomUUID(),r=new s.N(n,e,t);return{id:n,attachment:r,type:"image",name:e.name||"Image"}}static getFileExtensions(e){if(Array.isArray(e))return Array.from(new Set(e.flatMap(e=>this.getFileExtensions(e))));let t=this.getMimeTypes(e).map(e=>`.${e.split("/")[1]}`);return t.includes(".jpeg")&&t.push(".jpg"),t}static getMimeTypes(e){return Array.isArray(e)?Array.from(new Set(e.flatMap(e=>this.getMimeTypes(e)))):e.capabilities.limits.vision?e.capabilities.limits.vision.supported_media_types.filter(e=>c.includes(e)):[]}async addImageAttachments(e,t="unknown",n,s=!1){if(0===e.length)return[];let l=null,c=this.state.selectedThreadID,d=this.manager.getPendingThreadId(n),u=i.W.visionSkipThreadCreate;if(n&&!c&&d&&(c=d),!c&&!u)try{c=(l=await this.manager.createThread(n,s)).id}catch(t){let e="An error occurred creating the thread. Sending a single message should create a new thread.";throw t instanceof Error&&(e||(e=t.message)),this.manager.addAmbientError(e),Error(e)}let m=this.state.currentReferences.filter(e=>"image"===e.type).length,h=CopilotImageAttacher.getAttachmentLimit();if(m+e.length>h){let e=i.W.attachMultipleImages?`You can add up to ${h} image files per message.`:"Only one image can be uploaded at a time";return this.manager.addAmbientError(e),(0,o.d)("file_limit_reached"),[]}let p=[],f=[];for(let n of e){if(!CopilotImageAttacher.isTypeAllowed(n.type,this.state.model))return(0,o.d)("included_unsupported_file",{fileTypes:n.type,uploadType:t}),[];if(n.size>CopilotImageAttacher.getAttachmentSizeLimit())return this.manager.addAmbientError("Only images below 3.75MB are supported"),(0,o.d)("size_limit_exceeded",{size:n.size}),[];if(null==c&&!u)throw this.manager.addAmbientError("Please manually create a thread before uploading an image"),Error("ThreadID resolution for image attachment is not functioning properly");let e=CopilotImageAttacher.makeImageReference(n,c);if(this.state.model.id.startsWith("claude")&&this.state.model.capabilities.supports.vision){let t=await e.attachment.getDimensions();if(t.width&&t.height&&(t.width>8e3||t.height>8e3)){this.manager.addAmbientError("The image you uploaded exceeds the maximum allowed dimensions for Claude models. Please try again with another model."),(0,o.d)("dimension_limit_exceeded",{width:t.width,height:t.height});continue}}let r=(0,a.Vc)(n.name);this.manager.addReference(r,"image-attacher"),0===f.length&&this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),f.push({file:n,placeholder:r,reference:e})}return await Promise.all(f.map(async({file:e,placeholder:n,reference:a})=>{try{l&&await a.attachment.prefetch(),this.manager.setImageAttachmentUploaded(a.id,a.attachment),this.manager.replaceReference(n,a),(0,r.BI)("dotcom_chat.vision.image_added",{uploadType:t}),p.push(a)}catch(r){this.manager.removeReference(n);let t="An unexpected error occurred while reading the file";if("string"==typeof r)throw this.manager.addAmbientError(`An error occurred uploading the attachment ${e.name}`),(0,o.d)("ErrorString",{message:r}),Error(r);if(r instanceof Error)if((0,o.d)(r.name,{message:r.message}),"GenericServerError"===r.name&&r.message.includes("Error creating policy"))this.manager.addAmbientError(t);else throw this.manager.addAmbientError(t),r;else throw this.manager.addAmbientError(t),r}})).finally(()=>{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}),s&&n&&l&&this.manager.setPendingThreadId(l.id,n),p}constructor(e,t){l(this,"state",void 0),l(this,"manager",void 0),this.state=e,this.manager=t}}},53850:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(38007);function a(e,t){(0,r.BI)("dotcom_chat.vision.error",{type:e,...t})}},86571:(e,t,n)=>{n.d(t,{E:()=>CopilotTextAttacher,x:()=>s});var r=n(38007),a=n(22069),i=n(65011);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let s="application/x.clipboard",l=/^\s*`?([\w-_]{3,40}\.\w{1,10})`?\s*$/;let CopilotTextAttacher=class CopilotTextAttacher{static async isAttachable(e){if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return!1;let t=await e.text();return CopilotTextAttacher.isPlainText(t)}static getTextFileExtensions(){return CopilotTextAttacher.fileExtensionsCache??(CopilotTextAttacher.fileExtensionsCache=Object.values(i.r4).flatMap(e=>e.extensions??[]).filter(e=>"stl"!==e).join(","))}static getAttachmentSizeLimit(){return 512e3}static isPlainText(e){let t=Math.min(e.length,1e3),n=0,r=0;for(let a=0;a<t;a++){let t=e.charCodeAt(a);0===t?n++:(t<32||t>126)&&r++}let a=n/t,i=r/t;return a<=.1&&i<=.2}async makeReference(e,t){let n=await e.text(),r=e.name||(t?await t:await this.generateFileName(n,e.type));return this.makeReferenceSync(n,r)}makeReferenceSync(e,t){let n=t.split(".").pop();return(0,r.BI)("copilot.attach_pasted_file",{extension:n,characters:e.length}),{type:"thread-scoped-file",name:t,text:e,language:""}}async addAttachment(e,t,n){let r;if(e.size>CopilotTextAttacher.getAttachmentSizeLimit())return void this.manager.addAmbientError("Attached text files must be smaller than 500KB");let i=await e.text();if(!CopilotTextAttacher.isPlainText(i))return void this.manager.addAmbientError(`"${e.name}" has an unsupported file type. Please try again with a plain text file`);if(n)r=this.makeReferenceSync(i,n),this.manager.addReference(r,"text-attacher");else{let n=(0,a.Vc)(e.name);this.manager.addReference(n,"text-attacher"),this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0});try{r=await this.makeReference(e,t),this.manager.replaceReference(n,r)}catch{this.manager.addAmbientError("Failed to process file. Please try again."),this.manager.removeReference(n)}finally{this.manager.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})}}return r}async generateFileName(e,t){let n=this.existingFileNames.size>0?`

Follow the naming formats used by these existing files: ${Array.from(this.existingFileNames).slice(0,5).join(", ")}`:"",a=await this.manager.service.getSimpleCompletion(`Return a suitable filename for the following file contents.
      Follow the file naming conventions of the language and do not include any special characters except for period, underscore or hyphens.
      Try to limit the name to 20 characters or less.
      You MUST include the file extension. Include only the filename in your response and nothing else.${n}

File contents:
\`\`\`
${e}
\`\`\`
`),i=a.ok?l.exec(a.payload)?.[1]:null;return i?(0,r.BI)("copilot.generate_pasted_file_name.success"):(0,r.BI)("copilot.generate_pasted_file_name.failure"),this.uniqueFileName(i??this.defaultFileName(t))}uniqueFileName(e){if(!this.existingFileNames.has(e))return e;let t=e.lastIndexOf("."),n=t>0&&t<e.length-1,r=n?e.substring(0,t):e,a=n?e.substring(t):"",i=2;for(;this.existingFileNames.has(`${r}${i}${a}`);)i++;return`${r}${i}${a}`}defaultFileName(e){return e===s?"pasted.txt":"untitled.txt"}constructor(e,t=new Set){o(this,"manager",void 0),o(this,"existingFileNames",void 0),this.manager=e,this.existingFileNames=t}};o(CopilotTextAttacher,"fileExtensionsCache",void 0)},26268:(e,t,n)=>{n.d(t,{Q:()=>o});let r=/^@(?<repo>[\w-.]+\/[\w-.]+)(?:\/(?<type>\w+)\/(?<id>.+))?$/,a=/^@(?<id>[a-zA-Z0-9_.-]+)$/,i={fromUrlType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"blob":case"tree":return"file";case void 0:return"repository"}},fromMentionType(e){switch(e){case"issues":return"issue";case"pull":return"pull-request";case"discussions":return"discussion";case"files":return"file";case void 0:return"repository"}}},o={fromUrl(e){let t;try{t=new URL(e)}catch{return}if(t.hostname!==window.location.hostname)return;let[,n,r,a,...o]=t.pathname.split("/"),s=o.join("/"),l=i.fromUrlType(a);if(n&&r&&l)return{repo:`${n}/${r}`,type:s?l:"repository",id:s}},stringify(e){switch(e.type){case"issue":return`@${e.repo}/issues/${e.id??""}`;case"pull-request":return`@${e.repo}/pull/${e.id??""}`;case"discussion":return`@${e.repo}/discussions/${e.id??""}`;case"repository":return`@${e.repo}`;case"file":return`@${e.repo}/files/${e.id??""}`;case"thread-scoped-file":return`@${e.id??""}`}},parse(e){let t=r.exec(e)?.groups;if(!t){let t=a.exec(e)?.groups;return t?{repo:"",type:"thread-scoped-file",id:t.id}:void 0}let n=i.fromMentionType(t.type);return n?{repo:t.repo,type:n,id:t.id}:void 0},isEqual:(e,t)=>o.stringify(e)===o.stringify(t),refersTo(e,t){let n=o.for(t);return null!==n&&o.isEqual(e,n)},for:e=>{switch(e.type){case"repository":return{type:"repository",repo:`${e.ownerLogin}/${e.name}`,reference:e};case"issue":return{type:"issue",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"pull-request":return{type:"pull-request",repo:`${e.repository.ownerLogin}/${e.repository.name}`,id:e.number.toString(),reference:e};case"discussion":return{type:"discussion",repo:`${e.repository.owner}/${e.repository.name}`,id:e.number.toString(),reference:e};case"file":case"folder":return{type:"file",repo:`${e.repoOwner}/${e.repoName}`,id:e.path,reference:e};case"thread-scoped-file":return{type:"thread-scoped-file",repo:"",id:e.name,reference:e};default:return null}}}},36721:(e,t,n)=>{n.d(t,{U:()=>o});var r=n(39818),a=n(22069),i=n(26268);let o=function({references:e,agents:t}){this.parser=function(n){let o=n.split(/(\s+)/),s=[];for(let[n,l]of o.entries()){let o=0===n&&r.qj.exec(l)?.groups?.slug,c=o&&t.find(e=>e.slug===o);if(c){s.push({type:"agent-mention",value:l,data:{mentionedAgent:c}});continue}let d=i.Q.parse(l),u=d&&e?.find(e=>i.Q.refersTo(d,e));if(d){s.push({type:"reference-mention",value:l,data:{mentionedReferenceId:u&&(0,a.Vb)(u),referenceMention:d}});continue}let m=s.at(-1);m?.type==="text"?m.value+=l:s.push({type:"text",value:l})}return{type:"root",children:s}}}},13897:(e,t,n)=>{n.d(t,{O:()=>i,_:()=>o});var r=n(47970),a=n(39818);function i(e){let t=new Set;return(0,r.YR)(e,e=>{"reference-mention"===e.type&&void 0!==e.data.mentionedReferenceId&&t.add(e.data.mentionedReferenceId)}),t}function o(e){return a.qj.test(e.split(/\s/)[0]??"")}},68714:(e,t,n)=>{n.d(t,{$7:()=>d,Ao:()=>h,BV:()=>f,OW:()=>CopilotSpaceSSOError,Tx:()=>p,e9:()=>u,i9:()=>CopilotSpaceNotFoundError,jS:()=>m});var r=n(97665),a=n(94747),i=n(97286),o=n(29255),s=n(47397),l=n(96540),c=n(34901);let CopilotSpaceNotFoundError=class CopilotSpaceNotFoundError extends Error{constructor(e="Copilot Space not found"){super(e),this.name="CopilotSpaceNotFoundError"}};let CopilotSpaceSSOError=class CopilotSpaceSSOError extends Error{constructor(e,t="Copilot Space SSO error"){super(t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"protectedOrganizations",void 0),this.protectedOrganizations=e,this.name="CopilotSpaceSSOError"}};function d(){let e=(0,r.jE)();return(0,a.n)({mutationFn:async e=>{let t=await (0,o.ee)(e);if(!t.ok)throw Error(t.error);return{status:t.status,ok:!0,payload:t.payload}},onSuccess:async()=>{await e.invalidateQueries({queryKey:o.O6})}})}function u(e){let t=(0,s.b)(),{data:n}=m(e,{throwOnError:!1});(0,l.useEffect)(()=>{n&&t.dispatch({type:"SET_CUSTOM_COPILOTS",customCopilots:n})},[n,t])}function m(e,t={}){return(0,i.I)({queryKey:o.O6,queryFn:o.CT,enabled:e,staleTime:3e5,throwOnError:t.throwOnError})}function h(e){return(0,i.I)({queryKey:(0,o.dp)(e),queryFn:async()=>{let t=await (0,o.Lr)(e);if(!t.ok){if(404===t.status)throw new CopilotSpaceNotFoundError;throw Error(t.error)}if(void 0===t.payload.id)throw new CopilotSpaceSSOError(t.payload.protectedOrganizations);return t.payload},enabled:!!e})}function p(e,t){return(0,i.I)({queryKey:["visibility-settings",e,t],queryFn:async()=>(0,o.A2)({owner:e,id:t}),enabled:""!==e&&-1!==t,staleTime:3e5})}function f(){return(0,c.A3)("customCopilotsEnabled")}},88334:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(34901),a=n(55206),i=n(68714);function o(){let{threads:e}=(0,r.Pk)(),t=Array.from(e.values()).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).map(e=>(0,a.O)(e)).filter(e=>null!==e),n=(0,i.jS)(!0),{data:o}=n;if(void 0===o)return n;let s=new Set,l=[...t.map(e=>o.find(t=>e.id===t.id&&e.owner===t.owner)).filter(e=>{if(void 0===e)return!1;let t=`${e.owner}:${e.id}`;return!s.has(t)&&(s.add(t),!0)}),...[...o].sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).filter(e=>{let t=`${e.owner}:${e.id}`;return!s.has(t)})].slice(0,5);return{...n,data:l}}},24001:(e,t,n)=>{n.d(t,{C:()=>o});var r=n(7777),a=n(80597),i=n(96540);function o(){let e=(0,a.G)(),{selectedCopilotSpaceId:t,setSelectedCopilotSpaceId:n,selectedThreadId:o}=(0,r.O)(),s=!!o||!!e;(0,i.useEffect)(()=>{n(e||void 0)},[e,n]);let l=t||e,c=(0,i.useCallback)(e=>{s||n({id:e.id,owner:e.owner})},[n,s]),d=(0,i.useCallback)(()=>{s||n(void 0)},[n,s]);return{activeCopilotSpaceId:l,readOnly:s,handleSpaceSelect:c,clearSpaceSelection:d}}},29255:(e,t,n)=>{n.d(t,{A2:()=>m,CT:()=>c,Lr:()=>d,O6:()=>s,dp:()=>l,ee:()=>u});var r=n(22069),a=n(6901),i=n(60039);let o="/github-copilot/chat",s=["copilot-chat","custom-copilots"];function l(e){return e?["copilot-chat","custom-copilot",{id:e.id,owner:e.owner}]:["copilot-chat","custom-copilot",null]}async function c(){let e=await (0,i.lS)(`${o}/custom_copilots`);if(!e.ok)throw Error(`Failed to fetch spaces: ${r.nN[e.status]||r.DW}`);return await e.json()}async function d(e){if(!e||!e.owner)return{status:500,ok:!1,error:"unexpected null custom copilot id or missing owner"};let{owner:t,id:n}=e,a=`${o}/custom_copilots/${t}/${n}`,s=await (0,i.lS)(a);if(!s.ok)return{status:s.status,ok:!1,error:r.nN[s.status]||r.DW};let l=await s.json();return{status:s.status,ok:!0,payload:l}}async function u(e){let t=await (0,i.lS)((0,a.fn)(e),{method:"DELETE"});return t.ok?{status:t.status,ok:!0,payload:null}:t}async function m(e){let t=await (0,i.lS)(`${(0,a.fn)(e)}/settings/visibility`);if(!t.ok)throw Error("Error fetching visibility settings");try{let e=await t.json();return{memberCount:e.member_count&&"number"==typeof e.member_count?e.member_count:null}}catch(e){throw Error(`Error parsing visibility settings: ${e}`)}}},39627:(e,t,n)=>{n.d(t,{D:()=>i,Y:()=>o});var r=n(52811),a=n(96679);function i(e){if(!a.XC)return;let t=a.XC.querySelector("title"),n=a.XC.createElement("title");n.textContent=e,t?t.textContent!==e&&(t.replaceWith(n),(0,r.i)(e)):(a.XC.head.appendChild(n),(0,r.i)(e))}function o(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},26559:(e,t,n)=>{n.d(t,{jC:()=>l,kt:()=>o,tV:()=>s});var r=n(53005),a=n(27851),i=n(88191);function o(e){let t={"X-Requested-With":"XMLHttpRequest",...(0,i.wE)(e)};return(0,a.G7)("client_version_header")&&(t={...t,[r.S]:(0,r.O)()}),t}function s(e,t){for(let[n,r]of Object.entries(o(t)))e.set(n,r)}function l(e){return{"X-GitHub-App-Type":e}}},88191:(e,t,n)=>{n.d(t,{$r:()=>o,M1:()=>s,li:()=>a,pS:()=>c,wE:()=>l});var r=n(96679);let a="X-Fetch-Nonce",i=new Set;function o(e){i.add(e)}function s(){return i.values().next().value||""}function l(e){let t={};return void 0!==e&&(t["X-Fetch-Nonce-To-Validate"]=e),void 0===e?t[a]=s():i.has(e)?t[a]=e:t[a]=Array.from(i).join(","),t}function c(){let e=r.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";e&&o(e)}},61560:(e,t,n)=>{var r=n(52497),a=n(74848),i=n(38007),o=n(3971),s=n(10569),l=n(47139),c=n(15385),d=n(38621),u=n(33036),m=n(29943),h=n(99377),p=n(31971),f=n(97286),g=n(60039);let y=()=>{let{data:e}=(0,f.I)({queryKey:["copilot-chat","entitlement"],queryFn:async()=>{let e=await (0,g.lS)("/github-copilot/chat/entitlement");if(!e.ok)throw Error(`Failed to retrieve Copilot chat entitlement (${e.status} on ${e.url})`);return await e.json()},placeholderData:{licenseType:h.mF.Unlicensed},staleTime:3e5});return e?.plan};var x=n(22069),v=n(42080),_=n(37573),b=n(70179);let S={proLabel:"GlobalCopilotMenu-module__proLabel--PYvSK"};var w=n(99038);let C={overlay:"GlobalCopilotOverlay-module__overlay--tTU3_",header:"GlobalCopilotOverlay-module__header--zeYXi",newTaskHeader:"GlobalCopilotOverlay-module__newTaskHeader--OB4FP",newTaskContent:"GlobalCopilotOverlay-module__newTaskContent--bu0Lm",newTaskLoader:"GlobalCopilotOverlay-module__newTaskLoader--DeC75",headerActions:"GlobalCopilotOverlay-module__headerActions--jROAr",content:"GlobalCopilotOverlay-module__content--DMD44",task:"GlobalCopilotOverlay-module__task--o4yer",taskStartDate:"GlobalCopilotOverlay-module__taskStartDate--DDFR1",footer:"GlobalCopilotOverlay-module__footer--OoLa2"};var j=n(87330),N=n(10871),I=n(89169),T=n(63867),A=n(93116),k=n(44446),E=n(58207),R=n(90514),L=n(36613),P=n(1948),O=n(96540),M=n(34901),D=n(96615),F=n(18312);let B=(0,D.E7)();function $(){return(0,a.jsx)(P.Fn,{children:(0,a.jsx)(z,{})})}function z(){let{tasks:e}=(0,E.s)(),[t,n]=(0,O.useState)(!1);return t?(0,a.jsx)(W,{setNewTaskMode:n}):(0,a.jsxs)("div",{className:C.overlay,children:[(0,a.jsx)(U,{setNewTaskMode:n}),(0,a.jsx)(V,{tasks:e}),(0,a.jsx)(H,{tasks:e})]})}function U({setNewTaskMode:e}){return(0,a.jsxs)("div",{className:C.header,children:[(0,a.jsx)("h2",{className:"f5",children:"Recent tasks"}),(0,a.jsxs)("div",{className:C.headerActions,children:[(0,a.jsx)(j.K,{variant:"invisible","aria-label":"New agent task",onClick:()=>e(!0),icon:d.PlusIcon}),(0,a.jsx)(v.N5,{variant:"invisible","aria-label":"Open assistive chat",icon:d.CommentIcon,commandId:"copilot-chat:open-assistive"}),(0,a.jsx)(j.K,{variant:"invisible","aria-label":"Copilot settings",icon:d.GearIcon,as:"a",href:"/settings/copilot"})]})]})}function V({tasks:e}){return(0,a.jsx)("div",{className:C.content,children:0===e.length?(0,a.jsxs)(A.E,{children:[(0,a.jsx)(A.E.Heading,{children:"Let Copilot tackle your TODOs"}),(0,a.jsx)(A.E.Description,{className:"text-center text-wrap-balance",children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot\u2019s progress."}),(0,a.jsx)(A.E.PrimaryAction,{href:"/copilot/agents",children:"Start a new task"})]}):(0,a.jsx)(q,{tasks:e})})}function H({tasks:e}){return e.length>0&&(0,a.jsx)("div",{className:C.footer,children:(0,a.jsx)(N.z,{variant:"invisible",size:"small",block:!0,href:"/copilot/agents",children:"View all tasks"})})}function q({tasks:e}){return(0,a.jsx)(c.l,{showDividers:!0,children:e.map(e=>{let t=(0,R.TO)(e.pull,e.latest_session_state);return(0,a.jsxs)(c.l.LinkItem,{className:C.task,href:e.pull.url,children:[(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(k.I,{icon:t.icon,color:t.color})}),e.pull.title,(0,a.jsxs)(c.l.Description,{variant:"block",className:"no-wrap",children:[e.pull.repository_nwo," \xb7"," ",(0,a.jsx)(I.A,{datetime:e.latest_session_updated_at,format:"micro",className:C.taskStartDate})]})]},e.pull.id)})})}function W({setNewTaskMode:e}){let{createSession:t}=(0,E.s)(),[n,r]=(0,O.useState)(null);(0,O.useEffect)(()=>{!async function(){if(!n)try{let e=await (0,g.lS)("/github-copilot/chat");if(!e.ok)throw Error(`Failed to fetch chat provider: ${e.statusText}`);let t=await e.json();r(t)}catch(e){console.error("Error fetching Copilot Chat provider:",e)}}()},[n]);let i=async(n,r,a)=>{let i=n.trim();""!==i&&r&&(t({nwo:r.nameWithOwner,problemStatement:i,baseRef:a||r.defaultBranch}),e(!1))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:C.newTaskHeader,children:[(0,a.jsx)(j.K,{variant:"invisible","aria-label":"Back to tasks",icon:d.ArrowLeftIcon,onClick:()=>e(!1)}),(0,a.jsx)("h2",{className:"f5",children:"New agent task"})]}),(0,a.jsx)("div",{className:C.newTaskContent,children:n?(0,a.jsx)(F.RelayEnvironmentProvider,{environment:B,children:(0,a.jsx)(M.Mj,{workerPath:n.findFileWorkerPath,threadId:null,refs:n.refs||[],mode:"immersive",ssoOrganizations:n.ssoOrganizations||[],copilotUpsellBannerDismissed:!0,copilotChatPayload:n,children:(0,a.jsx)(L.Q,{handleUserSubmit:i})})}):(0,a.jsx)("div",{className:C.newTaskLoader,children:(0,a.jsx)(T.A,{size:"small",srText:"Loading Copilot Chat"})})})]})}try{$.displayName||($.displayName="GlobalCopilotOverlay")}catch{}try{z.displayName||(z.displayName="GlobalCopilotOverlayContent")}catch{}try{U.displayName||(U.displayName="OverlayHeader")}catch{}try{V.displayName||(V.displayName="OverlayContent")}catch{}try{H.displayName||(H.displayName="OverlayFooter")}catch{}try{q.displayName||(q.displayName="AgentTasks")}catch{}try{W.displayName||(W.displayName="NewAgentTask")}catch{}let G="global_copilot_menu",K="global_nav",J=e=>{p.W.freeToPaidTelemetry?(0,u.F)({eventName:e,menuLocation:G,mode:K}):(0,i.BI)("dotcom_chat.activate",{target:`GLOBAL_COPILOT_MENU_${e}`,mode:"global_nav"})},Q=()=>{(0,m.qR)({id:"copilot-assistive",intent:h.wh.conversation,newThread:!0}),J("ASSISTIVE")},X=()=>{window.location.href="/copilot",(0,i.BI)("dotcom_chat.activate",{target:"GLOBAL_COPILOT_MENU_FULLSCREEN",mode:"global_nav"}),J("IMMERSIVE")};function Z(e){let{ref:t,open:n,setOpen:r}=(0,_.Mm)(e.reactPartialAnchor);return(0,a.jsx)(o.T,{width:"large",align:"end",open:n,onOpen:()=>r(!0),onClose:()=>r(!1),anchorRef:t,renderAnchor:null,preventOverflow:!1,children:(0,a.jsx)($,{})})}function Y(e){let{ref:t,open:n,setOpen:r}=(0,_.Mm)(e.reactPartialAnchor);return(0,a.jsx)(s.W,{anchorRef:t,open:n,onOpenChange:r,children:(0,a.jsx)(er,{})})}function ee(){return(0,a.jsxs)(s.W,{children:[(0,a.jsx)(s.W.Button,{leadingVisual:d.CopilotIcon,"aria-label":"Open Copilot\u2026",children:""}),(0,a.jsx)(er,{})]})}function et({reactPartialAnchor:e}){return(0,a.jsxs)(b.t,{fallback:null,children:[(0,a.jsx)(v.ak,{commands:{"copilot-chat:open-assistive":Q,"copilot-chat:open-immersive":X}}),e?p.W.copilotGlobalOverlayV2?(0,a.jsx)(Z,{reactPartialAnchor:e}):(0,a.jsx)(Y,{reactPartialAnchor:e}):(0,a.jsx)(ee,{})]})}function en(){let e=y();return(0,a.jsxs)(c.l.LinkItem,{href:"/settings/copilot",onClick:()=>J("SETTINGS"),children:["Your Copilot",(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(d.CopilotIcon,{})}),e&&(0,a.jsx)(c.l.TrailingVisual,{children:function(e){switch(e){case h.UH.IndividualProPlus:return(0,a.jsx)(l.A,{className:S.proLabel,children:"Pro+"});case h.UH.IndividualPro:return(0,a.jsx)(l.A,{className:S.proLabel,children:"Pro"});case h.UH.IndividualFree:return(0,a.jsx)(l.A,{children:"Free"});default:return null}}(e)})]})}function er(){return(0,a.jsx)(s.W.Overlay,{align:"end",children:(0,a.jsxs)(c.l,{style:{width:"15rem"},children:[(0,a.jsxs)(c.l.Group,{children:[(0,a.jsx)(c.l.GroupHeading,{children:"New conversation in"}),(0,a.jsx)(v.Vr,{commandId:"copilot-chat:open-assistive",leadingVisual:(0,a.jsx)(d.CommentIcon,{}),children:"Assistive"}),(0,a.jsxs)(c.l.LinkItem,{href:x.VR,onClick:()=>J("SPACES"),children:[(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(w.Dy,{})}),"Spaces"]}),p.W.taskOrientedAssistive&&(0,a.jsxs)(c.l.Item,{onSelect:()=>{J("TASK_ORIENTED_ASSISTIVE"),(0,m.qR)({id:"copilot-task-oriented-assistive",intent:h.wh.conversation,newThread:!0,references:[]})},children:[(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(d.CommandPaletteIcon,{})}),"Task",(0,a.jsx)(c.l.TrailingVisual,{children:(0,a.jsx)(l.A,{variant:"accent",children:"Staff"})})]})]}),(0,a.jsx)(c.l.Divider,{}),(0,a.jsxs)(s.W,{onOpenChange:e=>e&&J("IDE_MENU_OPEN"),children:[(0,a.jsx)(s.W.Anchor,{children:(0,a.jsxs)(c.l.Item,{onSelect:()=>J("OPEN_WITH"),children:[(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(d.DownloadIcon,{})}),"Download for"]})}),(0,a.jsx)(s.W.Overlay,{children:(0,a.jsxs)(c.l,{children:[(0,a.jsx)(u.t,{menuLocation:G,mode:K}),(0,a.jsx)(c.l.Divider,{}),(0,a.jsxs)(c.l.LinkItem,{href:"https://docs.github.com/en/copilot/managing-copilot/configure-personal-settings/installing-github-copilot-in-the-cli",onClick:()=>J("CLI"),children:["CLI",(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(d.TerminalIcon,{})})]})]})})]}),p.W.freeToPaidYourCopilotSettings?(0,a.jsx)(en,{}):(0,a.jsxs)(c.l.LinkItem,{href:"/settings/copilot",onClick:()=>J("SETTINGS"),children:["Settings",(0,a.jsx)(c.l.LeadingVisual,{children:(0,a.jsx)(d.GearIcon,{})})]})]})})}try{Z.displayName||(Z.displayName="ExternallyAnchoredGlobalCopilotOverlay")}catch{}try{Y.displayName||(Y.displayName="ExternallyAnchoredGlobalCopilotMenu")}catch{}try{ee.displayName||(ee.displayName="GlobalCopilotMenuWithAnchor")}catch{}try{et.displayName||(et.displayName="GlobalCopilotMenu")}catch{}try{en.displayName||(en.displayName="YourCopilotButton")}catch{}try{er.displayName||(er.displayName="GlobalCopilotMenuOverlay")}catch{}(0,r.k)("global-copilot-menu",{Component:et})},66871:(e,t,n)=>{n.d(t,{C3:()=>s,JV:()=>a,K3:()=>u,MM:()=>l,OE:()=>m,Zu:()=>d,bj:()=>i,jc:()=>c,kd:()=>o});var r=n(96679);function a(){return r.Kn?.state||{}}function i(e){h(a(),"",e)}function o(e){r.Kn?.pushState({appId:a().appId},"",e),p()}function s(e){h({...a(),...e},"",location.href)}function l(e){i(`?${e.toString()}${r.fV.hash}`)}function c(){i(r.fV.pathname+r.fV.hash)}function d(e){i(e.startsWith("#")?e:`#${e}`)}function u(){i(r.fV.pathname+r.fV.search)}function m(){r.Kn?.back()}function h(e,t,n){r.Kn?.replaceState(e,t,n),p()}function p(){r.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},13233:(e,t,n)=>{n.d(t,{l:()=>r});let r=()=>void 0},7531:(e,t,n)=>{n.d(t,{Y:()=>r});function r(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},41764:(e,t,n)=>{n.d(t,{A:()=>s});let{getItem:r,setItem:a,removeItem:i}=(0,n(85351).A)("localStorage"),o="REACT_PROFILING_ENABLED",s={enable:()=>a(o,"true"),disable:()=>i(o),isEnabled:()=>!!r(o)}},46320:(e,t,n)=>{n.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var r=n(21715);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let i=class SoftNavEvent extends Event{constructor(e,t){super(t),a(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends i{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends i{constructor(e,t){super(e,r.z.SUCCESS),a(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends i{constructor(e,t){super(e,r.z.ERROR),a(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends i{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),a(this,"payload",void 0),a(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},97396:(e,t,n)=>{n.d(t,{Bu:()=>p,SC:()=>c,Ti:()=>m,iS:()=>d,k5:()=>l,o4:()=>u,rZ:()=>h});var r=n(21715),a=n(46320),i=n(7522),o=n(78284);let s=0;function l(){s=0,document.dispatchEvent(new Event(r.z.INITIAL)),(0,o.xT)()}function c(e){(0,o.LM)()||(document.dispatchEvent(new Event(r.z.PROGRESS_BAR.START)),document.dispatchEvent(new a.sW(e)),(0,o.Vy)(e),(0,o.ZW)(),(0,o.HK)(),(0,i.E5)())}function d(e={}){g(e)&&(s+=1,document.dispatchEvent(new a.ni((0,o.di)(),s)),m(e))}function u(e={}){if(!g(e))return;s=0;let t=(0,o.my)()||o.BW;document.dispatchEvent(new a.Kq((0,o.di)(),t)),f(),(0,i.Cd)(t),(0,o.xT)()}function m(e={}){if(!g(e))return;let t=(0,o.di)();f(),document.dispatchEvent(new a.RQ(t)),(0,o.Ff)(),(0,o.JA)(t)}function h(e={}){g(e)&&((0,i.Im)(),document.dispatchEvent(new Event(r.z.RENDER)))}function p(){document.dispatchEvent(new Event(r.z.FRAME_UPDATE))}function f(){document.dispatchEvent(new Event(r.z.PROGRESS_BAR.END))}function g({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,o.LM)()&&(0===t.length||t.includes((0,o.di)()))&&(!e||!(0,o.gc)())}},21715:(e,t,n)=>{n.d(t,{z:()=>r});let r=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},7522:(e,t,n)=>{n.d(t,{Cd:()=>l,E5:()=>s,Im:()=>c,nW:()=>o});var r=n(7479),a=n(78284);let i="stats:soft-nav-duration",o={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function s(){window.performance.clearResourceTimings(),window.performance.mark(i)}function l(e){(0,r.i)({turboFailureReason:e,turboStartUrl:(0,a.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(i).length)return null;performance.measure(i,i);let e=performance.getEntriesByName(i).pop();return e?e.duration:null}();if(!e)return;let t=o[(0,a.di)()],n=Math.round(e);t===o.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:n}})),(0,r.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,a.fX)()||"rails",duration:n,initiator:(0,a.Pv)()||"rails"}})}},98013:(e,t,n)=>{n.d(t,{x:()=>h});var r,a=n(96540),i=n(64899),o=n(69719),s=n(35932),l=n(74848),c=n(10204);let d=(0,a.createContext)(null),u=null;function m(e,t){let n=c.KK.parse(e);if(!n)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new c.m0),u.add({topic:n,subscriber:t}),{unsubscribe:()=>{u?.delete({topic:n,subscriber:t})}}}try{d.displayName||(d.displayName="AliveTestContext")}catch{}try{(r=function({children:e,initialMessages:t}){return(0,a.useEffect)(()=>{let e=[];if(t)for(let[n,r]of t){let t=window.setTimeout(()=>{var e=n,t=r;if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let n of Array.from(u.subscribers(e)))n(t)},0);e.push(t)}return()=>{for(let t of(u=null,e))window.clearTimeout(t)}}),(0,l.jsx)(d.Provider,{value:m,children:e})}).displayName||(r.displayName="AliveTestProvider")}catch{}function h(e,t){let n=(0,i.A)(),r=(0,a.useContext)(d);(0,a.useEffect)(()=>{let a=()=>{},i=!1;return async function(){if(e){if("function"==typeof r){let n=await r(e,t);n&&(a=n.unsubscribe);return}try{let r=await (0,o.H)();if(i)return;let l=(0,s.$)(r,e,t);l?.unsubscribe&&(n()?a=l.unsubscribe:l.unsubscribe())}catch(e){console.error(e)}}}(),()=>{i=!0,a()}},[e,t,n,r])}},64899:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(17515),a=n(96540);function i(){let e=(0,a.useRef)(!1),t=(0,a.useCallback)(()=>e.current,[]);return(0,r.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},17515:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(96679),a=n(96540);let i=void 0!==r.cg?.document?.createElement?a.useLayoutEffect:a.useEffect},47019:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(64899),a=n(96540);let i=function(e){let t=(0,r.A)(),[n,i]=(0,a.useState)(e);return[n,(0,a.useCallback)(e=>{t()&&i(e)},[t])]}},23812:(e,t,n)=>{n.d(t,{D6:()=>u,Fo:()=>c,MV:()=>m,zB:()=>h});var r=n(85351),a=n(96540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let o=(0,r.A)("sessionStorage"),s="session-storage-update",l=class UseSessionStorageUpdateEvent extends Event{constructor(e,t){super(s),i(this,"storageKey",void 0),i(this,"storageValue",void 0),this.storageKey=e,this.storageValue=t}};function c(e,t){let n=(0,a.useRef)(t);(0,a.useEffect)(()=>{n.current=t});let[r,i]=(0,a.useState)(()=>{let t=o.getItem(e);return t?JSON.parse(t):n.current}),c=(0,a.useCallback)(t=>{i(void 0!==t?t:n.current),void 0===t?o.removeItem(e):o.setItem(e,JSON.stringify(t)),document.dispatchEvent(new l(e,t))},[e]),d=(0,a.useCallback)(e=>{n.current=e},[n]);return(0,a.useEffect)(()=>{function t(t){if(t.storageKey===e){let e=t.storageValue;i(void 0!==e?e:n.current)}}document.addEventListener(s,t);let r=o.getItem(e);return r?i(JSON.parse(r)):i(n.current),()=>{document.removeEventListener(s,t)}},[e]),[r,c,d]}function d(e){let t=o.getKeys(),n=[];for(let r in t)t[r]?.startsWith(e)&&n.push(t[r]);return n}function u(e){for(let t of e)o.removeItem(t),document.dispatchEvent(new l(t,void 0))}function m(e){let t=[];for(let n of d(e)){let e=o.getItem(n);null!=e&&t.push(JSON.parse(e))}return t}function h(e){u(d(e))}},99837:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(96540);let a=(e,t,n)=>{let r=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+n:e+(n-r)},i=(e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}),o=({inputRef:e,fallbackEventHandler:t})=>(0,r.useCallback)((n,r,o)=>{let s=e.current;if(!s)return;let l=document.activeElement;s.focus();let c=r??[s.selectionStart??s.value.length,s.selectionEnd??s.value.length],d=void 0===o?a(s.selectionStart??s.value.length,c,n.length):Array.isArray(o)?o[0]:o,u=Array.isArray(o)?o[1]:d,m=!1;try{if(document.activeElement!==s)throw Error("Input must be focused to use execCommand");s.setSelectionRange(c[0],c[1]),m=""===n?document.execCommand("delete",!1):document.execCommand("insertText",!1,n),s.setSelectionRange(d,u)}catch{m=!1}if((l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement)&&l.focus(),!m){let r=s.value.slice(0,c[0])+n+s.value.slice(c[1]),a=new InputEvent("input",{bubbles:!1});e.current.value=r,e.current.setSelectionRange(d,u),e.current.dispatchEvent(a),t(i(a,e.current))}},[e,t])},26033:(e,t,n)=>{n.d(t,{y:()=>o});var r=n(74848),a=n(21728),i=n(78924);function o(e){let t,n,o,s=(0,a.c)(7),{children:l,appName:c,category:d,metadata:u}=e;return s[0]!==c||s[1]!==d||s[2]!==u?(n={appName:c,category:d,metadata:u},s[0]=c,s[1]=d,s[2]=u,s[3]=n):n=s[3],t=n,s[4]!==l||s[5]!==t?(o=(0,r.jsx)(i.I.Provider,{value:t,children:l}),s[4]=l,s[5]=t,s[6]=o):o=s[6],o}try{o.displayName||(o.displayName="AnalyticsProvider")}catch{}},71110:(e,t,n)=>{n.d(t,{V:()=>nr});var r,a,i=n(74848),o=n(21728),s=n(38007),l=n(85647),c=n(10569),d=n(15385),u=n(96540),m=n(44446),h=n(68714),p=n(88334),f=n(24001),g=n(22069),y=n(34164);let x={toggleButton:"ToggleButton-module__toggleButton--Is6Ni",selected:"ToggleButton-module__selected--U03b1",icon:"ToggleButton-module__icon--tnvqW",textContent:"ToggleButton-module__textContent--xvwFK"},v=(0,u.forwardRef)((e,t)=>{let n,r,a,s,l,c,d,u=(0,o.c)(21),{icon:m,isSelected:h,onClick:p,hasMenu:f,isMenuOpen:g,selectedItemLabel:v,children:_}=e,b=void 0!==h&&h,S=void 0!==f&&f,w=void 0!==g&&g;u[0]!==S||u[1]!==w||u[2]!==b?(n=()=>S?{"aria-haspopup":"menu","aria-expanded":w}:{"aria-pressed":b},u[0]=S,u[1]=w,u[2]=b,u[3]=n):n=u[3];let C=n,j=S&&v?v:_;u[4]!==p?(r=e=>{p&&p(e)},u[4]=p,u[5]=r):r=u[5];let N=r,I=b&&x.selected;return u[6]!==I?(a=(0,y.$)(x.toggleButton,I),u[6]=I,u[7]=a):a=u[7],u[8]!==C?(s=C(),u[8]=C,u[9]=s):s=u[9],u[10]!==m?(l=m&&(0,i.jsx)("span",{className:x.icon,children:m}),u[10]=m,u[11]=l):l=u[11],u[12]!==j?(c=(0,i.jsx)("span",{className:x.textContent,children:j}),u[12]=j,u[13]=c):c=u[13],u[14]!==N||u[15]!==t||u[16]!==c||u[17]!==a||u[18]!==s||u[19]!==l?(d=(0,i.jsxs)("button",{ref:t,type:"button",className:a,onClick:N,...s,children:[l,c]}),u[14]=N,u[15]=t,u[16]=c,u[17]=a,u[18]=s,u[19]=l,u[20]=d):d=u[20],d});function _(){let[e,t]=(0,u.useState)(!1),n=(0,l.Zp)(),{handleSpaceSelect:r,clearSpaceSelection:a,activeCopilotSpaceId:o,readOnly:y}=(0,f.C)(),x=()=>{n(g.QT),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_CREATE_SPACE",mode:"immersive"})},_=e=>{o&&e.id===o.id&&e.owner===o.owner?a():(r({id:e.id,owner:e.owner}),(0,s.BI)("dotcom_chat.activate",{target:"SPACES_INPUT_SELECT_SPACE",space:`${e.owner}/${e.id}`})),t(!1)},{data:b=[]}=(0,p.I)(),{data:S=[]}=(0,h.jS)(!0);if(!(0,h.BV)()||y)return;let w=o?S.find(e=>e.id===o.id&&e.owner===o.owner):void 0,C=w?w.name:"Space";return(0,i.jsxs)(c.W,{open:e,onOpenChange:t,children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(v,{icon:(0,i.jsx)(m.I,{icon:"spaces"}),isSelected:!!w,onClick:()=>{},hasMenu:!0,isMenuOpen:e,selectedItemLabel:C,children:C})}),(0,i.jsx)(c.W.Overlay,{style:b.length>0?{width:"260px"}:{},children:(0,i.jsx)(d.l,{selectionVariant:"single",role:"menu","aria-label":"Select a space",children:b.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.l.Group,{children:[(0,i.jsx)(d.l.GroupHeading,{children:"Recent"}),b.map(e=>{let t=!!o&&e.id===o.id&&e.owner===o.owner;return(0,i.jsx)(d.l.Item,{role:"menuitemradio",onSelect:()=>_(e),selected:t,"aria-checked":t,children:(0,i.jsx)("span",{children:e.name})},`${e.owner}, ${e.id}`)})]}),(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(d.l.Item,{onSelect:x,children:"Create a space"})]}):(0,i.jsx)(d.l.Item,{onSelect:x,children:"Create your first space"})})})]})}v.displayName="ToggleButton";try{_.displayName||(_.displayName="SpacesSelect")}catch{}var b=n(98386),S=n(42080),w=n(99837),C=n(38621),j=n(65556),N=n(55847),I=n(94747),T=n(60039),A=n(7277),k=n(47970),E=n(34901),R=n(47397),L=n(26268),P=n(36721);let O=e=>{switch(e){case"issue":return"issue";case"pull-request":return"pull_request";case"discussion":return"discussion";case"thread-scoped-file":case"file":return"file"}},M=/^(?:https:\/\/)?(?:www\.)?(figma\.com\/.+)$/,D=class FigmaNotAuthorizedError extends Error{constructor(){super(),this.name="FigmaNotAuthorizedError"}};async function F(e){let t=await (0,T.lS)(`/copilot/immersive/figma-link?item_url=${e}`);if(!t.ok){if(403===t.status)throw new D;throw Error(`Failed to fetch Figma reference data (${t.status}: ${t.statusText})`)}return await t.json()}async function B(e){let{itemUrl:t}=e,n=await (0,T.lS)(`/copilot/chat-links?item_url=${t}`);if(!n.ok)throw Error(`Failed to fetch reference data (${n.status}: ${n.statusText})`);return await n.json()}var $=n(17515),z=n(74244),U=n(44435);let V=({manager:e})=>[{label:"Delete conversation",command:"delete",icon:C.TrashIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let t=(0,U.W)(n);if(!t)throw Error("Thread not found");await e.deleteThread(t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_DELETE_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Rename conversation",command:"rename",icon:C.PencilIcon,requiresParams:!0,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{let r=(0,U.W)(n);if(!r)throw Error("Thread not found");await e.renameThread(r,t),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_RENAME",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}},{label:"Start a new conversation",command:"new",icon:C.PlusIcon,requiresParams:!1,action:async(t,n)=>{e.dispatch({type:"SLASH_COMMANDS_LOADING"});try{await e.selectThread(null),(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_NEW_THREAD",mode:n.mode}),e.dispatch({type:"SLASH_COMMANDS_LOADED"})}catch{e.dispatch({type:"SLASH_COMMANDS_ERROR"})}}}],H=async(e,t,n)=>{if((e[0]??"")!=="/")return!1;e=e.substring(1);let r=V({manager:n}).filter(t=>{let n=(e.split(" ",1)[0]??"").toLowerCase().trim();return t.command.toLowerCase().includes(n)});if(1!==r.length)return!1;let a=r[0],i=e.substring(a.command.length).trim();return await a.action(i,t),!0};var q=n(67522);function W(e,t,n){if("immersive"===e&&/^\/copilot(\/agents)?\/?$/.test(t)){let e=n.get("prompt");if(e)return e}}var G=n(54005),K=n(91819),J=n(31971),Q=n(22469),X=n(53850),Z=n(86571),Y=n(6901);let ee=(e,t,n)=>e&&"immersive"===t&&!n;var et=n(80597),en=n(39818),er=n(39459);function ea(e){let t,n,r,a,l,u,m=(0,o.c)(24),{onSelectPanel:h,onSelectAgent:p}=e,{availableAgents:f,showLimit:g,disabled:y,loading:x}=(0,en.JE)(),v=f&&f.length>0;if(x){let e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(d.l.Item,{disabled:!0,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.MentionIcon,{})}),"Extension"]}),m[0]=e):e=m[0],e}if(y){let e,t,n;return m[1]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_SUPPORTED",mode:"immersive"}),h("agents-not-supported")},m[1]=h,m[2]=e):e=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.MentionIcon,{})}),m[3]=t):t=m[3],m[4]!==e?(n=(0,i.jsxs)(d.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),m[4]=e,m[5]=n):n=m[5],n}if(!v){let e,t,n;return m[6]!==h?(e=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_NOT_AVAILABLE",mode:"immersive"}),h("no-agents-available")},m[6]=h,m[7]=e):e=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.MentionIcon,{})}),m[8]=t):t=m[8],m[9]!==e?(n=(0,i.jsxs)(d.l.Item,{onSelect:e,children:[t,"Extension\u2026"]}),m[9]=e,m[10]=n):n=m[10],n}if(m[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(c.W.Anchor,{children:(0,i.jsxs)(d.l.Item,{onSelect:eo,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.MentionIcon,{})}),"Extension"]})}),m[11]=t):t=m[11],m[12]!==f||m[13]!==p||m[14]!==g){let e;m[16]!==p||m[17]!==g?(e=e=>(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_SELECTED",mode:"immersive"}),p(e)},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(er.r,{src:e.avatarUrl})}),e.name,!g&&(0,i.jsxs)(d.l.Description,{variant:"inline",truncate:!0,children:[en.Z3,e.slug]}),g&&(0,i.jsx)(d.l.Description,{variant:"block",children:"Start a new conversation to use other extensions."})]},e.slug),m[16]=p,m[17]=g,m[18]=e):e=m[18],n=f.map(e),m[12]=f,m[13]=p,m[14]=g,m[15]=n}else n=m[15];return m[19]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(d.l.Divider,{}),m[19]=r):r=m[19],m[20]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.TelescopeIcon,{})}),m[20]=a):a=m[20],m[21]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsxs)(d.l.LinkItem,{href:en.bn,onClick:ei,children:[a,"Marketplace",(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(C.LinkExternalIcon,{})})]}),m[21]=l):l=m[21],m[22]!==n?(u=(0,i.jsxs)(c.W,{children:[t,(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsxs)(d.l,{children:[n,r,l]})})]}),m[22]=n,m[23]=u):u=m[23],u}function ei(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION_MARKETPLACE",mode:"immersive"})}function eo(){(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_EXTENSION",mode:"immersive"})}try{ea.displayName||(ea.displayName="AgentMenu")}catch{}var es=n(34614),el=n(9852);let ec={AgentsDialogsMainContainer:"AgentsDialogs-module__AgentsDialogsMainContainer--II3RA",dialogContentWrapper:"AgentsDialogs-module__dialogContentWrapper--gIypm",dialogTitle:"AgentsDialogs-module__dialogTitle--sYvdl",dialogDescription:"AgentsDialogs-module__dialogDescription--ylOeG",documentationLinkContainer:"AgentsDialogs-module__documentationLinkContainer--wOVFY",AgentsDialogsAlternateContainer:"AgentsDialogs-module__AgentsDialogsAlternateContainer--mELnh",alertIconContainer:"AgentsDialogs-module__alertIconContainer--bChLB"};function ed(e){let t,n,r=(0,o.c)(4),{onClose:a,returnFocusRef:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},r[0]=t):t=r[0],r[1]!==a||r[2]!==s?(n=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:a,returnFocusRef:s,renderBody:eu}),r[1]=a,r[2]=s,r[3]=n):n=r[3],n}function eu(){return(0,i.jsx)("div",{className:ec.AgentsDialogsMainContainer,children:(0,i.jsxs)("div",{className:ec.dialogContentWrapper,children:[(0,i.jsx)(C.TelescopeIcon,{size:24}),(0,i.jsx)("h3",{className:ec.dialogTitle,children:"Chat with your favorite tools and services"}),(0,i.jsx)("p",{className:ec.dialogDescription,children:"Browse the marketplace to find extensions for the tools and services you rely on"}),(0,i.jsx)(N.Q,{as:"a",href:en.bn,children:"Browse marketplace"}),(0,i.jsx)("div",{className:ec.documentationLinkContainer,children:(0,i.jsx)(es.A,{href:"https://gh.io/copilot-extensions-docs",children:"Documentation"})})]})})}function em(e){let t,n,r,a=(0,o.c)(9),{onClose:s,returnFocusRef:l}=e,c=(0,R.b)(),d=(0,E.Pk)(),u=(0,h.BV)(),m=(0,q.GF)(d.availableModels);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"fullscreen",regular:"center"},a[0]=t):t=a[0],a[1]!==u||a[2]!==m||a[3]!==c?(n=()=>(0,i.jsx)("div",{className:ec.AgentsDialogsAlternateContainer,children:(0,i.jsxs)("div",{className:ec.dialogContentWrapper,children:[(0,i.jsx)("div",{className:ec.alertIconContainer,children:(0,i.jsx)(C.AlertIcon,{size:24})}),(0,i.jsxs)("h3",{className:ec.dialogTitle,children:[u?"Copilots and extensions":"Extensions"," aren't supported by this model"]}),(0,i.jsxs)("p",{className:ec.dialogDescription,children:["Switch back to the ",m.displayName," model or start a new conversation"]}),(0,i.jsx)(N.Q,{onClick:()=>{c.selectThread(null),c.selectModel(m)},children:"New conversation"})]})}),a[1]=u,a[2]=m,a[3]=c,a[4]=n):n=a[4],a[5]!==s||a[6]!==l||a[7]!==n?(r=(0,i.jsx)(el.l,{width:"large",title:"Extensions",position:t,onClose:s,returnFocusRef:l,renderBody:n}),a[5]=s,a[6]=l,a[7]=n,a[8]=r):r=a[8],r}try{ed.displayName||(ed.displayName="NoAgentsAvailableDialog")}catch{}try{em.displayName||(em.displayName="AgentsNotSupportedDialog")}catch{}var eh=n(85351),ep=n(87330),ef=n(21114),eg=n(84217),ey=n(75177),ex=n(3971),ev=n(58569),e_=n(53110),eb=n(40961);let eS={disabledForPreviewModelsPanel:"KnowledgeSelectPanel-module__disabledForPreviewModelsPanel--NqDvF",knowledgeBaseIcon:"KnowledgeSelectPanel-module__knowledgeBaseIcon--8UOiW",KnowledgeSelectPanelContainer:"KnowledgeSelectPanel-module__KnowledgeSelectPanelContainer--udKC7",panelHeader:"KnowledgeSelectPanel-module__panelHeader--qV2cs",headerContent:"KnowledgeSelectPanel-module__headerContent--V2v8A",panelTitle:"KnowledgeSelectPanel-module__panelTitle--g2jcs",emptyStateContainer:"KnowledgeSelectPanel-module__emptyStateContainer--dQbe2",emptyStateContent:"KnowledgeSelectPanel-module__emptyStateContent--flXvx",emptyStateMessage:"KnowledgeSelectPanel-module__emptyStateMessage--BOmgQ",emptyStateDescription:"KnowledgeSelectPanel-module__emptyStateDescription--o3g_H",emptyStateInstructions:"KnowledgeSelectPanel-module__emptyStateInstructions--ZqIt3",actionButtonsContainer:"KnowledgeSelectPanel-module__actionButtonsContainer--Ja6mV",createButton:"KnowledgeSelectPanel-module__createButton--qb36f",organizationsSection:"KnowledgeSelectPanel-module__organizationsSection--i6URP",sectionTitle:"KnowledgeSelectPanel-module__sectionTitle--pLzZE",organizationsList:"KnowledgeSelectPanel-module__organizationsList--WXZKk",organizationLink:"KnowledgeSelectPanel-module__organizationLink--RJw9M",organizationAvatar:"KnowledgeSelectPanel-module__organizationAvatar--PEHVf",organizationName:"KnowledgeSelectPanel-module__organizationName--NFqlr",ssoNotice:"KnowledgeSelectPanel-module__ssoNotice--aspbN"},ew=(0,u.forwardRef)(function(e,t){let n,r,a,s,l,c=(0,o.c)(12);c[0]!==e?({open:r,setOpen:a,...n}=e,c[0]=e,c[1]=n,c[2]=r,c[3]=a):(n=c[1],r=c[2],a=c[3]);let d=!!r||void 0;return c[4]!==r||c[5]!==a?(s=()=>a(!r),c[4]=r,c[5]=a,c[6]=s):s=c[6],c[7]!==n||c[8]!==t||c[9]!==d||c[10]!==s?(l=(0,i.jsx)(ep.K,{ref:t,"aria-expanded":d,"aria-haspopup":!0,"aria-label":"Attach knowledge base","aria-labelledby":void 0,icon:C.BookIcon,onClick:s,variant:"invisible",className:eS.knowledgeBaseIcon,...n}),c[7]=n,c[8]=t,c[9]=d,c[10]=s,c[11]=l):l=c[11],l});function eC({disabledForPreviewModelsProps:e,emptyKnowledgeBaseProps:t,open:n,onOpenChange:r,anchorRef:a}){let o=(0,E.Pk)(),s=(0,R.b)(),l=(0,eh.A)("localStorage"),{knowledgeBases:c}=o,[d,m]=(0,u.useState)([]),[h,p]=(0,u.useState)(!0),[f,y]=(0,u.useState)(""),x=(0,u.useRef)(null),v=l.getItem("lastUsedKnowledgeBaseId")||"",_=l.getItem("lastUsedKnowledgeBaseOrg")||"",{currentReferences:S}=o;(0,u.useEffect)(()=>{n||y("")},[n]);let w=(0,u.useMemo)(()=>""===f?c:c.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())),[f,c]),C=(0,u.useMemo)(()=>w.reduce((e,t)=>{let n=e.find(e=>e.org===t.ownerLogin);return n?n.docsets.push(t):e.push({org:t.ownerLogin,docsets:[t]}),e},[]),[w]),[j,N]=(0,u.useState)(!1),I=h||"pending"===o.knowledgeBasesLoading.state,T=j||"error"===o.knowledgeBasesLoading.state,A=(0,u.useRef)(!1);(0,u.useEffect)(()=>{let e=async()=>{p(!0),await s.fetchKnowledgeBases();let e=await s.service.listAdministratedCopilotEnterpriseOrganizations();e.ok?m(e.payload||[]):N(!0),p(!1)};n&&!A.current&&(A.current=!0,e())},[n,s]);let k=ek(),L=e=>{let t=e.filter(e=>(0,g.P)(e)&&!S.some(t=>(0,g.P)(t)&&t.id===e.id));for(let t of S.filter(t=>(0,g.P)(t)&&!e.some(e=>e.id===t.id)))s.removeReference(t);for(let e of t)s.addReference((0,g.UU)(e),"docsetMenu")};if(o.model?.hasLimitedCapabilities)return(0,i.jsx)(eL,{open:n,setOpen:r,...e});if(!I&&0===c.length)return(0,i.jsx)(ej,{administratedCopilotEnterpriseOrganizations:d,persistentPanelStyles:{position:["fixed","fixed","absolute"],bottom:["60px","60px","0 !important"],"@media screen and (max-height: 480px)":{bottom:"0 !important"},top:"initial !important",left:["18px","18px","calc(50% - 360px) !important"],maxHeight:"100%"},open:n,setOpen:r,mode:o.mode,...t});let P=e=>{L(e.map(e=>c.find(t=>t.id===e.id)).filter(e=>void 0!==e))},O=w.sort((e,t)=>e.id===v?-1:+(t.id===v)).map(e=>({id:e.id,key:e.id,groupId:e.ownerLogin,text:e.name,description:e.description,disabled:!e.canChat,descriptionVariant:"block"})),M=[...C].sort((e,t)=>e.org===_?-1:+(t.org===_)).map(e=>({id:e.org,key:e.org,text:e.org,groupId:e.org,header:{title:e.org}})),D=c.filter(e=>S.some(t=>(0,g.P)(t)&&t.id===e.id));return(0,i.jsx)("div",{ref:x,...(0,b.G)("knowledge-select-panel"),children:(0,i.jsx)(ef.X,{title:"Select knowledge bases",subtitle:"Knowledge bases consolidate content from multiple repositories for an improved chat experience.",onCancel:()=>{(0,eb.flushSync)(()=>r(!1)),a.current?.focus()},open:n,renderAnchor:null,anchorRef:a,onOpenChange:r,loading:I,items:O,onFilterChange:y,groupMetadata:M,notice:null!==k?{text:k,variant:"info"}:void 0,message:T?{variant:"error",title:"Failed to load knowledge bases",body:"Try again later"}:0===C.length?{variant:"empty",title:`No knowledge bases found for \`${f}\``,body:"Try a different search term"}:void 0,...{selected:D,onSelectedChange:e=>P(e)},variant:"modal",overlayProps:{maxHeight:"xlarge"},width:"large"})})}function ej(e){let t,n,r,a,s,l,c,d,u,m,h,p,f,g,y,x,v,_,S,w,j,N,I,T,A=(0,o.c)(53),{administratedCopilotEnterpriseOrganizations:k,anchorRef:E,open:R,setOpen:L}=e,P=ek();A[0]!==E||A[1]!==R||A[2]!==L?(t=E?{anchorRef:E,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(ew,{open:R,setOpen:L,...t})}},A[0]=E,A[1]=R,A[2]=L,A[3]=t):t=A[3];let O=t,M=k?.length===0;A[4]!==M?(n=M?{flexGrow:1,maxHeight:"100%",overflowY:"auto"}:{},A[4]=M,A[5]=n):n=A[5];let D=n;A[6]!==M?(r=M?{maxHeight:"100%"}:{},A[6]=M,A[7]=r):r=A[7];let F=r;A[8]!==M?(a=M?{height:"100%"}:{},A[8]=M,A[9]=a):a=A[9];let B=a;return A[10]!==L?(s=()=>L(!0),l=()=>L(!1),A[10]=L,A[11]=s,A[12]=l):(s=A[11],l=A[12]),A[13]===Symbol.for("react.memo_cache_sentinel")?(c={anchorSide:"outside-bottom",sx:{width:"min(100%, 350px)"}},A[13]=c):c=A[13],A[14]!==B?(d={...B},A[14]=B,A[15]=d):d=A[15],A[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,b.G)("empty-knowledge-base-picker"),A[16]=u):u=A[16],A[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(eg.A,{id:"knowledge-base-dialog-title",as:"h4",className:eS.panelTitle,children:"Attach a knowledge base"}),A[17]=m):m=A[17],A[18]!==L?(h=(0,i.jsx)("div",{className:eS.panelHeader,children:(0,i.jsxs)("div",{className:eS.headerContent,children:[m,(0,i.jsx)(ep.K,{unsafeDisableTooltip:!0,"aria-label":"Close",icon:C.XIcon,variant:"invisible",onClick:()=>L(!1)})]})}),A[18]=L,A[19]=h):h=A[19],A[20]!==D?(p={...D},A[20]=D,A[21]=p):p=A[21],A[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(e_.A,{icon:C.BookIcon,size:"medium",className:eS.knowledgeBaseIcon}),A[22]=f):f=A[22],A[23]!==F?(g={...F},A[23]=F,A[24]=g):g=A[24],A[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)("span",{className:eS.emptyStateMessage,children:"You don't have any knowledge bases"}),A[25]=y):y=A[25],A[26]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)("p",{children:"Knowledge bases consolidate content from multiple repositories for an improved chat experience."}),A[26]=x):x=A[26],A[27]!==M?(v=M&&(0,i.jsx)("p",{className:eS.emptyStateInstructions,...(0,b.G)("ask-admin-for-knowledge-base"),children:"Speak with an organization owner about creating a knowledge base for your organization."}),A[27]=M,A[28]=v):v=A[28],A[29]!==v?(_=(0,i.jsxs)("div",{className:eS.emptyStateDescription,children:[x,v]}),A[29]=v,A[30]=_):_=A[30],A[31]!==k?(S=k.length>0&&(0,i.jsx)(eN,{administratedCopilotEnterpriseOrganizations:k}),A[31]=k,A[32]=S):S=A[32],A[33]!==g||A[34]!==_||A[35]!==S?(w=(0,i.jsxs)(ey.A,{sx:g,className:eS.emptyStateContent,children:[y,_,S]}),A[33]=g,A[34]=_,A[35]=S,A[36]=w):w=A[36],A[37]!==p||A[38]!==w?(j=(0,i.jsxs)(ey.A,{sx:p,className:eS.emptyStateContainer,children:[f,w]}),A[37]=p,A[38]=w,A[39]=j):j=A[39],A[40]!==P?(N=P&&(0,i.jsx)("div",{className:eS.actionButtonsContainer,children:(0,i.jsx)(eA,{message:P})}),A[40]=P,A[41]=N):N=A[41],A[42]!==h||A[43]!==j||A[44]!==N||A[45]!==d?(I=(0,i.jsxs)(ey.A,{role:"dialog","aria-labelledby":"knowledge-base-dialog-title",sx:d,className:eS.KnowledgeSelectPanelContainer,...u,children:[h,j,N]}),A[42]=h,A[43]=j,A[44]=N,A[45]=d,A[46]=I):I=A[46],A[47]!==O||A[48]!==R||A[49]!==I||A[50]!==s||A[51]!==l?(T=(0,i.jsx)(ex.T,{open:R,onOpen:s,onClose:l,overlayProps:c,...O,children:I}),A[47]=O,A[48]=R,A[49]=I,A[50]=s,A[51]=l,A[52]=T):T=A[52],T}function eN(e){let t=(0,o.c)(11),{administratedCopilotEnterpriseOrganizations:n}=e;if(1===n.length){let e,r,a;return t[0]!==n[0]?(e=eR(n[0]),t[0]=n[0],t[1]=e):e=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,b.G)("create-knowledge-base-button"),t[2]=r):r=t[2],t[3]!==e?(a=(0,i.jsx)(N.Q,{as:"a",href:e,className:eS.createButton,...r,children:"Create a knowledge base"}),t[3]=e,t[4]=a):a=t[4],a}{let e,r,a,o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,b.G)("create-knowledge-base-dropdown"),r=(0,i.jsx)(eg.A,{as:"h3",className:eS.sectionTitle,children:"Create a knowledge base for an organization"}),t[5]=e,t[6]=r):(e=t[5],r=t[6]),t[7]!==n?(a=n.map(eI),t[7]=n,t[8]=a):a=t[8],t[9]!==a?(o=(0,i.jsxs)("div",{className:eS.organizationsSection,...e,children:[r,(0,i.jsx)(d.l,{className:eS.organizationsList,children:a})]}),t[9]=a,t[10]=o):o=t[10],o}}function eI(e){return(0,i.jsx)(eT,{org:e},e.id)}function eT(e){let t,n,r,a,s=(0,o.c)(11),{org:l}=e;return s[0]!==l?(t=eR(l),s[0]=l,s[1]=t):t=s[1],s[2]!==l.avatarUrl||s[3]!==l.login?(n=(0,i.jsx)(er.r,{square:!0,src:l.avatarUrl,alt:l.login,"aria-hidden":"true",className:eS.organizationAvatar}),s[2]=l.avatarUrl,s[3]=l.login,s[4]=n):n=s[4],s[5]!==l.login?(r=(0,i.jsx)(ev.A,{inline:!0,title:l.login,className:eS.organizationName,children:l.login}),s[5]=l.login,s[6]=r):r=s[6],s[7]!==t||s[8]!==n||s[9]!==r?(a=(0,i.jsx)(d.l.Item,{children:(0,i.jsxs)(es.A,{href:t,className:eS.organizationLink,children:[n,r]})}),s[7]=t,s[8]=n,s[9]=r,s[10]=a):a=s[10],a}function eA(e){let t,n=(0,o.c)(2),{message:r}=e;return r?(n[0]!==r?(t=(0,i.jsx)("div",{"data-testid":"knowledge-select-panel-sso",className:eS.ssoNotice,children:r}),n[0]=r,n[1]=t):t=n[1],t):null}function ek(){let e=(0,E.Pk)(),t=e.ssoOrganizations.map(eE);for(let n of e.knowledgeBases)for(let e of n.protectedOrganizations)t.includes(e)||t.push(e);if(!t||0===t.length)return null;{if(1===t.length)return`Single sign-on to see content from ${t[0]}.`;if(2===t.length)return`Single sign-on to see content from ${t[0]} and ${t[1]}.`;let e=t.length-2;return`Single sign-on to see content from ${t[0]}, ${t[1]}, and ${e} organization${e>1?"s":""}`}}function eE(e){return e.login}function eR(e){return`/organizations/${e.login}/settings/copilot/chat_settings/new`}function eL(e){let t,n,r,a,s,l=(0,o.c)(13),{anchorRef:c,open:d,setOpen:u}=e;l[0]!==c||l[1]!==d||l[2]!==u?(t=c?{anchorRef:c,renderAnchor:null}:{anchorRef:void 0,renderAnchor:e=>{let{...t}=e;return(0,i.jsx)(ew,{open:d,setOpen:u,...t})}},l[0]=c,l[1]=d,l[2]=u,l[3]=t):t=l[3];let m=t;return l[4]!==u?(n=()=>u(!0),r=()=>u(!1),l[4]=u,l[5]=n,l[6]=r):(n=l[5],r=l[6]),l[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:(0,y.$)("m-3 d-flex flex-column flex-items-center text-center",eS.disabledForPreviewModelsPanel),children:[(0,i.jsx)(C.AlertIcon,{className:"fgColor-attention mb-3"}),(0,i.jsx)("h3",{className:"h5 mb-2",children:"Knowledge bases aren't supported by this model"}),(0,i.jsx)("span",{className:"text-small fgColor-muted",children:"Switch back to the GPT-4o model or start a new conversation"})]}),l[7]=a):a=l[7],l[8]!==m||l[9]!==d||l[10]!==n||l[11]!==r?(s=(0,i.jsx)(ex.T,{open:d,onOpen:n,onClose:r,...m,children:a}),l[8]=m,l[9]=d,l[10]=n,l[11]=r,l[12]=s):s=l[12],s}try{ew.displayName||(ew.displayName="KBIconButton")}catch{}try{(r=KBIconButtonInner).displayName||(r.displayName="KBIconButtonInner")}catch{}try{eC.displayName||(eC.displayName="KnowledgeSelectPanel")}catch{}try{ej.displayName||(ej.displayName="EmptyKnowledgeBase")}catch{}try{eN.displayName||(eN.displayName="CreateKnowledgeBaseButton")}catch{}try{eT.displayName||(eT.displayName="CreateKnowledgeBaseActionRow")}catch{}try{eA.displayName||(eA.displayName="SSOFooter")}catch{}try{eL.displayName||(eL.displayName="DisabledForPreviewModels")}catch{}var eP=n(42342),eO=n(70170),eM=n(83978),eD=n(97286);async function eF(e,t,n,r){return new Promise((a,i)=>{if(!window.Worker)return void setTimeout(()=>a(e.filter(e=>e.includes(t))));let o=new Worker(n);o.addEventListener("message",e=>a(e.data.list)),o.addEventListener("error",e=>i(Error(`Worker error: ${e.message}`))),r.addEventListener("abort",()=>{o.terminate(),i(Error("Worker aborted"))}),o.postMessage({baseList:e,query:t})})}function eB(e,t){let n,r,a,i=(0,o.c)(9),{findFileWorkerPath:s}=(0,E.Pk)();i[0]!==e||i[1]!==t||i[2]!==s?(n=["copilot-worker-filter",s,e,t],r=async n=>{let{signal:r}=n;return e?0===t.length?e:eF(e,t,s,r):[]},i[0]=e,i[1]=t,i[2]=s,i[3]=n,i[4]=r):(n=i[3],r=i[4]);let l=null!==e;return i[5]!==n||i[6]!==r||i[7]!==l?(a={queryKey:n,queryFn:r,enabled:l,staleTime:1/0,gcTime:1e4,networkMode:"always",retry:!1,placeholderData:e$},i[5]=n,i[6]=r,i[7]=l,i[8]=a):a=i[8],(0,eD.I)(a)}function e$(e){return e}function ez(e,t){let n,r,a,i=(0,o.c)(11),s=void 0===t||t,l=(0,R.b)(),c=null!==e;return i[0]!==s||i[1]!==e?(n=["copilot-repository-files",e,s],i[0]=s,i[1]=e,i[2]=n):n=i[2],i[3]!==s||i[4]!==l||i[5]!==e?(r=async()=>{if(!e)return{};let t=await l.service.listRepoFiles(e,s);if(!t.ok)throw Error("Failed to fetch files for repository");return t.payload},i[3]=s,i[4]=l,i[5]=e,i[6]=r):r=i[6],i[7]!==c||i[8]!==n||i[9]!==r?(a={enabled:c,queryKey:n,queryFn:r,staleTime:3e5},i[7]=c,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eD.I)(a)}function eU(e,t){let n,r,a,i=(0,o.c)(11),s=(0,R.b)(),l=null!==e&&t.length>0;return i[0]!==e||i[1]!==t?(n=["copilot-repository-symbols",e,t],i[0]=e,i[1]=t,i[2]=n):n=i[2],i[3]!==s||i[4]!==e||i[5]!==t?(r=async()=>{if(!e)return[];let n=await s.service.querySymbols(e,t);if(!n.ok)throw Error("Failed to fetch symbols for repository");return n.payload.filter(eV)},i[3]=s,i[4]=e,i[5]=t,i[6]=r):r=i[6],i[7]!==l||i[8]!==n||i[9]!==r?(a={enabled:l,queryKey:n,queryFn:r},i[7]=l,i[8]=n,i[9]=r,i[10]=a):a=i[10],(0,eD.I)(a)}function eV(e){return!!e.symbol}var eH=n(51295),eq=n(39546);let eW={chooseRepoInstructionPanel:"ReferencesSelectPanel-module__chooseRepoInstructionPanel--ZB4TR",chooseRepoTitle:"ReferencesSelectPanel-module__chooseRepoTitle--WR2cM",chooseRepoSubtitle:"ReferencesSelectPanel-module__chooseRepoSubtitle--D5U0G",selectPanelContainer:"ReferencesSelectPanel-module__selectPanelContainer--pXThH",ActionList:"ReferencesSelectPanel-module__ActionList--_r6z2",referenceListItem:"ReferencesSelectPanel-module__referenceListItem--E4oD7",referenceItemText:"ReferencesSelectPanel-module__referenceItemText--SSG5P"};var eG=n(69359);let eK="Search",eJ=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Select files, folders, and symbols":t&&n?"Select files and folders":t&&r?"Select files and symbols":n&&r?"Select folders and symbols":t?"Select files":n?"Select folders":r?"Select symbols":"Select references"},eQ=(e,t)=>{let n=t.includes("files"),r=t.includes("folders"),a=t.includes("symbols"),i="references";return n&&r&&a?i="files, folders, and symbols":n&&r?i="files and folders":n&&a?i="files and symbols":r&&a?i="folders and symbols":n?i="files":r?i="folders":a&&(i="symbols"),`Choose ${i} from ${e} to chat about. Use fewer references for more accurate responses.`},eX=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Fetching files, folders, and symbols\u2026":t&&n?"Fetching files and folders\u2026":t&&r?"Fetching files and symbols\u2026":n&&r?"Fetching folders and symbols\u2026":t?"Fetching files\u2026":n?"Fetching folders\u2026":r?"Fetching symbols\u2026":"Fetching references\u2026"},eZ=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols"),a="References";return t&&n&&r?a="Files, folders, and symbols":t&&n?a="Files and folders":t&&r?a="Files and symbols":n&&r?a="Folders and symbols":t?a="Files":n?a="Folders":r&&(a="Symbols"),a},eY=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"Choose a repository to browse for files, folders, and symbols.":t&&n?"Choose a repository to browse for files and folders.":t&&r?"Choose a repository to browse for files and symbols.":n&&r?"Choose a repository to browse for folders and symbols.":t?"Choose a repository to browse for files.":n?"Choose a repository to browse for folders.":r?"Choose a repository to browse for symbols.":"Choose a repository to browse for references."},e0=e=>{let t=e.includes("files"),n=e.includes("folders"),r=e.includes("symbols");return t&&n&&r?"No files, folders, or symbols found":t&&n?"No files or folders found":t&&r?"No files or symbols found":n&&r?"No folders or symbols found":t?"No files found":n?"No folders found":r?"No symbols found":"No references found"},e1=e=>{let t,n,r,a,s,l,c,d,m,h,p,f=(0,o.c)(34);f[0]!==e?({open:r,onOpenChange:n,cancelReturnFocusRef:t,submitReturnFocusRef:s,...a}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a,f[5]=s):(t=f[1],n=f[2],r=f[3],a=f[4],s=f[5]);let g=(0,R.b)(),[y,x]=(0,u.useState)();f[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>x(void 0),f[6]=l):l=f[6],f[7]!==r?(c=[r],f[7]=r,f[8]=c):c=f[8],(0,u.useEffect)(l,c);let v=(0,E.pn)(tt);f[9]!==v?(d=new Set(v.filter(tn).map(tr)),f[9]=v,f[10]=d):d=f[10];let _=d,[b,S]=(0,u.useState)(),w=(0,u.useRef)(!1);f[11]!==g.service?(m=async e=>{S(void 0),w.current=!0;let t=await g.service.fetchRepo(e);t.ok?x(t.payload):S("Error: failed to load repository details. Please try again."),w.current=!1},f[11]=g.service,f[12]=m):m=f[12];let C=m,j=a.supportedReferenceTypes??e2;f[13]!==j?(h=eY(j),f[13]=j,f[14]=h):h=f[14];let N=h;if(!y){let e,a,o;return f[15]!==n?(e=e=>{w.current||n(e)},f[15]=n,f[16]=e):e=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(a=new Set,f[17]=a):a=f[17],f[18]!==t||f[19]!==N||f[20]!==C||f[21]!==r||f[22]!==_||f[23]!==b||f[24]!==s||f[25]!==e?(o=(0,i.jsx)(eG.X1,{selectionVariant:"instant",open:r,onOpenChange:e,selectedRepoIds:a,onSelectRepo:C,cancelReturnFocusRef:t,submitReturnFocusRef:s,description:N,featuredRepoIds:_,error:b}),f[18]=t,f[19]=N,f[20]=C,f[21]=r,f[22]=_,f[23]=b,f[24]=s,f[25]=e,f[26]=o):o=f[26],o}return f[27]!==t||f[28]!==n||f[29]!==r||f[30]!==a||f[31]!==y||f[32]!==s?(p=(0,i.jsx)(e3,{...a,open:r,onOpenChange:n,sourceRepository:y,cancelReturnFocusRef:t,submitReturnFocusRef:s}),f[27]=t,f[28]=n,f[29]=r,f[30]=a,f[31]=y,f[32]=s,f[33]=p):p=f[33],p},e2=["files","folders","symbols"],e3=e=>{let t,n,r,a,s,l,c,m,h,p,f,y,x,v=(0,o.c)(40),{renderAnchor:_,anchorRef:b,open:S,onOpenChange:w,submitReturnFocusRef:C,cancelReturnFocusRef:j,sourceRepository:N,supportedReferenceTypes:I}=e,T=void 0===I?e2:I,[A,k]=(0,u.useState)("");v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eO.s)(k,250),v[0]=t):t=v[0];let L=(0,u.useRef)(t);v[1]!==S?(n=()=>{S||k("")},r=[S],v[1]=S,v[2]=n,v[3]=r):(n=v[2],r=v[3]),(0,u.useEffect)(n,r);let{initialLoading:P,filterLoading:O,selected:M,unselected:D,toggleSelection:F}=function(e,t,n,r=e2){let a=(0,E.Pk)(),i=(0,R.b)(),s=function(e,t,n,r){let a,i,s,l,c,d=(0,o.c)(16),u=void 0===r?e2:r;d[0]!==u?(a=u.includes("folders"),d[0]=u,d[1]=a):a=d[1];let m=a,h=u.includes("symbols");d[2]!==u?(i=u.includes("files"),d[2]=u,d[3]=i):i=d[3];let p=i,f=n?t:null,g=ez(f,m),y=eB(g.data?.paths??null,e),x=eB(g.data?.directories??null,e),v=eU(h?f:null,e);d[4]!==v.data?(s=v.data?.map(te)??null,d[4]=v.data,d[5]=s):s=d[5];let _=eB(s,e);if(d[6]!==x||d[7]!==y.data||d[8]!==_.data||d[9]!==p||d[10]!==m){let e=p?y.data?.slice(0,7).map(e9)??[]:[];l=[...e,...m?x.data?.slice(0,7).map(e8)??[]:[],..._.data?.slice(0,7).map(e7)??[]],d[6]=x,d[7]=y.data,d[8]=_.data,d[9]=p,d[10]=m,d[11]=l}else l=d[11];let b=l,S=null===y.data&&null===x.data&&null===v.data,w=g.isFetching||y.isFetching||x.isFetching||v.isFetching||_.isFetching;return d[12]!==w||d[13]!==S||d[14]!==b?(c={items:b,filterLoading:w,initialLoading:S},d[12]=w,d[13]=S,d[14]=b,d[15]=c):c=d[15],c}(t,n,e,r),l=r.includes("symbols"),c=eU(e&&l?n:null,t).data,[d,m,h]=(0,u.useMemo)(()=>{let e=new Set,t=new Set,r=new Set;for(let i of a.currentReferences)"file"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?e.add(i.path):"folder"===i.type&&i.repoOwner===n?.ownerLogin&&i.repoName===n?.name?t.add(i.path):"symbol"===i.type&&"suggestionSymbol"===i.kind&&i.suggestionDefinitions?.some(e=>e.repoOwner===n?.ownerLogin&&e.repoName===n?.name)&&r.add(i.name);return[e,t,r]},[a.currentReferences,n?.ownerLogin,n?.name]),{selected:p=[],unselected:f=[]}=(0,eH.O)(s.items,e=>{switch(e.type){case"file":return d.has(e.text)?"selected":"unselected";case"folder":return m.has(e.text)?"selected":"unselected";case"symbol":return h.has(e.text)?"selected":"unselected"}}),y=(0,u.useCallback)(e=>{let t;if(!n)return;switch(e.type){case"file":t=(0,g.Od)(e.text,n);break;case"folder":t=(0,g.OC)(e.text,n);break;case"symbol":{let r=c?.find(t=>(0,g.Sm)(t)===e.text);if(!r)return;t=(0,g.Qt)(r,n)}}let r=(0,g.Vb)(t),o=a.currentReferences.find(e=>r===(0,g.Vb)(e));o?i.removeReference(o):i.addReference(t,"references-menu")},[i,n,a.currentReferences,c]);return{...s,selected:p,unselected:f,toggleSelection:y}}(S,A,N,T),B=M.length+D.length,$=`${N.ownerLogin}/${N.name}`;return v[4]!==_?(a=_?.({}),v[4]=_,v[5]=a):a=v[5],v[6]!==T?(s=eJ(T),v[6]=T,v[7]=s):s=v[7],v[8]!==$||v[9]!==T?(l=eQ($,T),v[8]=$,v[9]=T,v[10]=l):l=v[10],v[11]!==w||v[12]!==C.current?(c=()=>{(0,eb.flushSync)(()=>w(!1)),C.current?.focus()},v[11]=w,v[12]=C.current,v[13]=c):c=v[13],v[14]!==j.current||v[15]!==w?(m=()=>{(0,eb.flushSync)(()=>w(!1)),j.current?.focus()},v[14]=j.current,v[15]=w,v[16]=m):m=v[16],v[17]===Symbol.for("react.memo_cache_sentinel")?(h=e=>L.current(e.target.value),v[17]=h):h=v[17],v[18]!==O?(p=(0,i.jsx)(eM.X.Header,{children:(0,i.jsx)(eM.X.SearchInput,{loading:O,onChange:h,placeholder:eK,"aria-label":eK})}),v[18]=O,v[19]=p):p=v[19],v[20]!==O||v[21]!==P||v[22]!==M||v[23]!==T||v[24]!==F||v[25]!==B||v[26]!==D?(f=(0,i.jsx)(d.l,{className:eW.ActionList,children:P?(0,i.jsx)(eM.X.Loading,{children:eX(T)}):0!==B||O?(0,i.jsxs)(i.Fragment,{children:[M.map(e=>(0,i.jsx)(e4,{item:e,selected:!0,toggleSelection:F},e6(e))),M.length>0&&D.length>0&&(0,i.jsx)(d.l.Divider,{}),D.map(e=>(0,i.jsx)(e4,{item:e,selected:!1,toggleSelection:F},e6(e)))]}):(0,i.jsx)("div",{children:(0,i.jsx)(eq.O,{delay:500,children:(0,i.jsx)(eM.X.Message,{variant:"empty",title:e0(T),children:"Try a different search term"})})})}),v[20]=O,v[21]=P,v[22]=M,v[23]=T,v[24]=F,v[25]=B,v[26]=D,v[27]=f):f=v[27],v[28]!==b||v[29]!==S||v[30]!==p||v[31]!==f||v[32]!==s||v[33]!==l||v[34]!==c||v[35]!==m?(y=(0,i.jsxs)(eM.X,{anchorRef:b,title:s,description:l,onCancel:c,onSubmit:m,open:S,selectionVariant:"multiple",variant:"modal",width:"large",maxHeight:"xlarge",children:[p,f]}),v[28]=b,v[29]=S,v[30]=p,v[31]=f,v[32]=s,v[33]=l,v[34]=c,v[35]=m,v[36]=y):y=v[36],v[37]!==y||v[38]!==a?(x=(0,i.jsxs)("div",{className:eW.selectPanelContainer,children:[a,y]}),v[37]=y,v[38]=a,v[39]=x):x=v[39],x};function e5(e){let t,n,r,a,s,l=(0,o.c)(11),{open:c,setOpen:d,renderAnchor:u}=e;return l[0]!==d?(t=()=>d(!0),n=()=>d(!1),l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==u?(r=e=>u?.(e)??(0,i.jsx)(i.Fragment,{}),l[3]=u,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsxs)("div",{className:eW.chooseRepoInstructionPanel,children:[(0,i.jsx)(C.PaperclipIcon,{}),(0,i.jsx)("h3",{className:eW.chooseRepoTitle,children:"Attach a repository first"}),(0,i.jsx)("p",{className:eW.chooseRepoSubtitle,children:"To pick attachments, attach a repository where the files are stored."})]}),l[5]=a):a=l[5],l[6]!==c||l[7]!==t||l[8]!==n||l[9]!==r?(s=(0,i.jsx)(ex.T,{open:c,onOpen:t,onClose:n,renderAnchor:r,children:a}),l[6]=c,l[7]=t,l[8]=n,l[9]=r,l[10]=s):s=l[10],s}let e6=e=>`${e.type}#${e.text}`;function e4(e){let t,n,r,a,s,l=(0,o.c)(15),{toggleSelection:c,selected:u,item:m}=e;return l[0]!==m||l[1]!==c?(t=()=>{c(m),setTimeout(()=>{document.getElementById(e6(m))?.focus()})},l[0]=m,l[1]=c,l[2]=t):t=l[2],l[3]!==m?(n=e6(m),l[3]=m,l[4]=n):n=l[4],l[5]!==m.type?(r=(0,i.jsx)(d.l.LeadingVisual,{children:"symbol"===m.type?(0,i.jsx)(C.CodeSquareIcon,{}):"folder"===m.type?(0,i.jsx)(C.FileDirectoryFillIcon,{}):(0,i.jsx)(C.FileIcon,{})}),l[5]=m.type,l[6]=r):r=l[6],l[7]!==m.text?(a=(0,i.jsx)("div",{className:eW.referenceItemText,children:m.text}),l[7]=m.text,l[8]=a):a=l[8],l[9]!==u||l[10]!==t||l[11]!==n||l[12]!==r||l[13]!==a?(s=(0,i.jsxs)(d.l.Item,{onSelect:t,selected:u,id:n,className:eW.referenceListItem,children:[r,a]}),l[9]=u,l[10]=t,l[11]=n,l[12]=r,l[13]=a,l[14]=s):s=l[14],s}function e7(e){return{type:"symbol",text:e}}function e8(e){return{type:"folder",text:e}}function e9(e){return{type:"file",text:e}}function te(e){return(0,g.Sm)(e)}try{(a=e=>{let t,n,r,a,s=(0,o.c)(12);s[0]!==e?({open:n,onOpenChange:t,...r}=e,s[0]=e,s[1]=t,s[2]=n,s[3]=r):(t=s[1],n=s[2],r=s[3]);let{currentTopic:l}=(0,E.Pk)();if(!(0,g.Z6)(l)){let e;return s[4]!==t||s[5]!==n?(e=(0,i.jsx)(e5,{open:n,setOpen:t}),s[4]=t,s[5]=n,s[6]=e):e=s[6],e}return s[7]!==l||s[8]!==t||s[9]!==n||s[10]!==r?(a=(0,i.jsx)(e3,{...r,open:n,onOpenChange:t,sourceRepository:l}),s[7]=l,s[8]=t,s[9]=n,s[10]=r,s[11]=a):a=s[11],a}).displayName||(a.displayName="TopicReferencesSelectPanel")}catch{}try{e1.displayName||(e1.displayName="MultistepReferencesSelectPanel")}catch{}try{e3.displayName||(e3.displayName="ReferencesSelectPanel")}catch{}try{e5.displayName||(e5.displayName="ChooseRepositoryInstruction")}catch{}try{e4.displayName||(e4.displayName="ReferenceListItem")}catch{}function tt(e){return e.currentReferences}function tn(e){return"repository"===e.type}function tr(e){return e.id}let ta=(0,u.memo)(e=>{let t,n,r,a,l,m,h,p,f,y,x,v,_,S,w,j,N,I,T,A,k,L,P,O,M,D=(0,o.c)(91);D[0]!==e?({panel:n,onPanelChange:a,anchorRef:t,...r}=e,D[0]=e,D[1]=t,D[2]=n,D[3]=r,D[4]=a):(t=D[1],n=D[2],r=D[3],a=D[4]);let{inputRef:F}=r,B=(0,R.b)(),$=(0,E.Pk)(),{supportedAttachmentTypes:z,supportedReferenceTypes:U}=function(){let e=(0,E.Pk)(),t=null!==(0,et.G)(),n=["upload"],r=e.renderKnowledgeBases&&(e.currentTopic&&(0,g.Z6)(e.currentTopic)||!e.currentTopic);return t||n.push("repositories"),n.push("references"),r&&!t&&n.push("knowledge-bases"),t||n.push("agents"),{supportedAttachmentTypes:n,supportedReferenceTypes:t?["files"]:["files","folders","symbols"]}}(),{model:V}=(0,E.bP)("model"),H=J.W.attachImagesImmersive&&"immersive"===$.mode&&!!V.capabilities.supports.vision||!1,q=(0,en.kw)(r),W=(0,u.useRef)(null),G=(0,et.G)(),K=(0,Y.FQ)(!0),X=!!(G&&K);D[5]!==G||D[6]!==H||D[7]!==B||D[8]!==V||D[9]!==X||D[10]!==$||D[11]!==z?(l=z.includes("upload")&&(0,i.jsx)("input",{id:"image-uploader",...(0,b.G)("image-uploader"),hidden:!0,ref:W,type:"file",accept:[H?Q.s.getAllowedImageFileExtensions(V):"",Z.E.getTextFileExtensions()].join(","),multiple:!0,onChange:e=>{if(!e.target.files)return;let[t,n]=Q.s.getAllowedFiles([...e.target.files],V),r=[];for(let e of(H?new Q.s($,B).addImageAttachments(t,"menu",G,X):r.push(...t),n))new Z.E(B).addAttachment(e);for(let e of r)(0,s.BI)("dotcom_chat.upload_unsupported_file",{name:e.name,type:e.type,size:e.size});e.currentTarget.value=""}}),D[5]=G,D[6]=H,D[7]=B,D[8]=V,D[9]=X,D[10]=$,D[11]=z,D[12]=l):l=D[12];let ee="attachment-types"===n;D[13]!==a?(m=e=>a(t=>e&&null===t?"attachment-types":e||"attachment-types"!==t?t:null),D[13]=a,D[14]=m):m=D[14];let er="assistive"===$.mode?eP.E5:void 0;D[15]!==a||D[16]!==$.mode||D[17]!==z?(h=z.includes("repositories")&&(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REPOSITORIES",mode:$.mode}),a("repositories")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.RepoIcon,{})}),"Repositories\u2026"]}),D[15]=a,D[16]=$.mode,D[17]=z,D[18]=h):h=D[18],D[19]!==a||D[20]!==$.mode?(p=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_REFERENCES",mode:$.mode}),a("references")},D[19]=a,D[20]=$.mode,D[21]=p):p=D[21];let ei=z.includes("references")?void 0:"First attach a repository";D[22]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.FileCodeIcon,{})}),D[22]=f):f=D[22],D[23]!==U?(y=eZ(U),D[23]=U,D[24]=y):y=D[24],D[25]!==p||D[26]!==ei||D[27]!==y?(x=(0,i.jsxs)(d.l.Item,{onSelect:p,inactiveText:ei,children:[f,y,"\u2026"]}),D[25]=p,D[26]=ei,D[27]=y,D[28]=x):x=D[28],D[29]!==a||D[30]!==$.mode||D[31]!==z?(v=z.includes("knowledge-bases")&&(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_KNOWLEDGE_BASES",mode:$.mode}),a("knowledge-bases")},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.BookIcon,{})}),(0,i.jsx)("span",{...(0,b.G)("knowledge-bases-action-list-item"),children:"Knowledge bases\u2026"})]}),D[29]=a,D[30]=$.mode,D[31]=z,D[32]=v):v=D[32],D[33]!==a||D[34]!==$.mode||D[35]!==z?(_=z.includes("upload")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsxs)(d.l.Item,{onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU_IMAGES",mode:$.mode}),a(null),W.current?.click()},children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.UploadIcon,{})}),"Upload from computer"]})]}),D[33]=a,D[34]=$.mode,D[35]=z,D[36]=_):_=D[36],D[37]!==q||D[38]!==a||D[39]!==z?(S=z.includes("agents")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(ea,{onSelectPanel:e=>a(e),onSelectAgent:e=>setTimeout(()=>q(e.slug))})]}),D[37]=q,D[38]=a,D[39]=z,D[40]=S):S=D[40],D[41]!==x||D[42]!==v||D[43]!==_||D[44]!==S||D[45]!==h?(w=(0,i.jsxs)(d.l,{children:[h,x,v,_,S]}),D[41]=x,D[42]=v,D[43]=_,D[44]=S,D[45]=h,D[46]=w):w=D[46],D[47]!==w||D[48]!==er?(j=(0,i.jsx)(c.W.Overlay,{width:"small",side:"outside-top",align:"start",portalContainerName:er,children:w}),D[47]=w,D[48]=er,D[49]=j):j=D[49],D[50]!==t||D[51]!==j||D[52]!==ee||D[53]!==m?(N=(0,i.jsx)(c.W,{anchorRef:t,open:ee,onOpenChange:m,children:j}),D[50]=t,D[51]=j,D[52]=ee,D[53]=m,D[54]=N):N=D[54];let eo="references"===n;D[55]!==a?(I=e=>a(e?"references":null),D[55]=a,D[56]=I):I=D[56],D[57]!==t||D[58]!==F||D[59]!==U||D[60]!==eo||D[61]!==I?(T=(0,i.jsx)(e1,{open:eo,onOpenChange:I,submitReturnFocusRef:F,cancelReturnFocusRef:t,supportedReferenceTypes:U}),D[57]=t,D[58]=F,D[59]=U,D[60]=eo,D[61]=I,D[62]=T):T=D[62];let es="repositories"===n;return D[63]!==a?(A=e=>a(e?"repositories":null),D[63]=a,D[64]=A):A=D[64],D[65]!==t||D[66]!==F||D[67]!==es||D[68]!==A?(k=(0,i.jsx)(eG.FZ,{open:es,onOpenChange:A,submitReturnFocusRef:F,cancelReturnFocusRef:t}),D[65]=t,D[66]=F,D[67]=es,D[68]=A,D[69]=k):k=D[69],D[70]!==t||D[71]!==n||D[72]!==a||D[73]!==z?(L=z.includes("knowledge-bases")&&(0,i.jsx)(eC,{disabledForPreviewModelsProps:{anchorRef:t},emptyKnowledgeBaseProps:{anchorRef:t},open:"knowledge-bases"===n,onOpenChange:e=>a(e?"knowledge-bases":null),anchorRef:t}),D[70]=t,D[71]=n,D[72]=a,D[73]=z,D[74]=L):L=D[74],D[75]!==t||D[76]!==n||D[77]!==a?(P="no-agents-available"===n&&(0,i.jsx)(ed,{onClose:()=>a(null),returnFocusRef:t}),D[75]=t,D[76]=n,D[77]=a,D[78]=P):P=D[78],D[79]!==t||D[80]!==n||D[81]!==a?(O="agents-not-supported"===n&&(0,i.jsx)(em,{onClose:()=>a(null),returnFocusRef:t}),D[79]=t,D[80]=n,D[81]=a,D[82]=O):O=D[82],D[83]!==l||D[84]!==N||D[85]!==T||D[86]!==k||D[87]!==L||D[88]!==P||D[89]!==O?(M=(0,i.jsxs)("div",{children:[l,N,T,k,L,P,O]}),D[83]=l,D[84]=N,D[85]=T,D[86]=k,D[87]=L,D[88]=P,D[89]=O,D[90]=M):M=D[90],M});ta.displayName="AttachmentMenu";var ti=n(90051);let to={agents:"Extensions",repositories:"Repositories",files:"Files and folders",issues:"Issues",pulls:"Pull requests",discussions:"Discussions"},ts=[{name:to.agents,icon:C.StackIcon,value:"agents",where:"start"},{name:to.repositories,icon:C.RepoIcon,value:"repositories",where:"anywhere"},{name:to.files,icon:C.FileIcon,value:"repositories:files",where:"anywhere"},{name:to.issues,icon:C.IssueOpenedIcon,value:"repositories:issues",where:"anywhere"},{name:to.pulls,icon:C.GitPullRequestIcon,value:"repositories:pulls",where:"anywhere"},{name:to.discussions,icon:C.CommentDiscussionIcon,value:"repositories:discussions",where:"anywhere"}],tl={is:e=>ts.some(t=>t.value===e)};function tc(e){let t,n,r,a,s,l=(0,o.c)(12);return l[0]!==e?({agent:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t.avatarUrl?(r=(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(er.r,{src:t.avatarUrl})}),l[3]=t.avatarUrl,l[4]=r):r=l[4],l[5]!==t.slug?(a=(0,i.jsxs)(d.l.Description,{variant:"inline",truncate:!0,children:[en.Z3,t.slug]}),l[5]=t.slug,l[6]=a):a=l[6],l[7]!==t.name||l[8]!==n||l[9]!==r||l[10]!==a?(s=(0,i.jsxs)(d.l.Item,{...n,children:[r,t.name,a]}),l[7]=t.name,l[8]=n,l[9]=r,l[10]=a,l[11]=s):s=l[11],s}try{tc.displayName||(tc.displayName="AgentSuggestion")}catch{}function td(e){let t,n,r,a,s,l,c,m,h=(0,o.c)(20);h[0]!==e?({leadingVisual:t,...n}=e,h[0]=e,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let p=(0,u.useId)(),f=(0,u.useId)();return h[3]!==f||h[4]!==p?(r=(0,y.$)(p,f),h[3]=f,h[4]=p,h[5]=r):r=h[5],h[6]!==t?(a=void 0!==t&&(0,i.jsx)(d.l.LeadingVisual,{children:t}),h[6]=t,h[7]=a):a=h[7],h[8]!==p||h[9]!==n.children?(s=(0,i.jsx)("span",{id:p,children:n.children}),h[8]=p,h[9]=n.children,h[10]=s):s=h[10],h[11]!==f?(l=(0,i.jsx)("span",{className:"d-none","aria-hidden":!0,id:f,children:"Opens in new tab."}),h[11]=f,h[12]=l):l=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(C.LinkExternalIcon,{})}),h[13]=c):c=h[13],h[14]!==n||h[15]!==r||h[16]!==a||h[17]!==s||h[18]!==l?(m=(0,i.jsxs)(d.l.Item,{...n,"aria-labelledby":r,children:[a,s,l,c]}),h[14]=n,h[15]=r,h[16]=a,h[17]=s,h[18]=l,h[19]=m):m=h[19],m}try{td.displayName||(td.displayName="LinkSuggestion")}catch{}function tu(e){return{value:`@${e.slug}`,render:t=>(0,i.jsx)(tc,{agent:e,...t})}}function tm(e){let t,n,r,a,s,l=(0,o.c)(9);return l[0]!==e?({leadingVisual:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]!==t?(r=void 0!==t&&(0,i.jsx)(d.l.LeadingVisual,{children:t}),l[3]=t,l[4]=r):r=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(d.l.TrailingVisual,{children:(0,i.jsx)(C.ArrowRightIcon,{})}),l[5]=a):a=l[5],l[6]!==n||l[7]!==r?(s=(0,i.jsxs)(d.l.Item,{"aria-haspopup":!0,...n,children:[r,n.children,a]}),l[6]=n,l[7]=r,l[8]=s):s=l[8],s}try{tm.displayName||(tm.displayName="MultistepSuggestion")}catch{}function th(e){let t,n,r,a,s=(0,o.c)(9);s[0]!==e?({category:n,...t}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let{name:l,icon:c}=n;return s[3]!==c?(r=(0,i.jsx)(c,{}),s[3]=c,s[4]=r):r=s[4],s[5]!==l||s[6]!==t||s[7]!==r?(a=(0,i.jsx)(tm,{leadingVisual:r,...t,children:l}),s[5]=l,s[6]=t,s[7]=r,s[8]=a):a=s[8],a}try{th.displayName||(th.displayName="CategorySuggestion")}catch{}let tp={asyncSuggestion:"shared-module__asyncSuggestion--lDyxK",stale:"shared-module__stale--IEVWo"};function tf(e){let t,n,r,a,s,l,c,u,m,h,p,f=(0,o.c)(25);f[0]!==e?({discussion:n,stale:a,className:t,...r}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=r,f[4]=a):(t=f[1],n=f[2],r=f[3],a=f[4]);let g=a&&tp.stale;return f[5]!==t||f[6]!==g?(s=(0,y.$)(tp.asyncSuggestion,g,t),f[5]=t,f[6]=g,f[7]=s):s=f[7],f[8]!==n.state?(l="open"===n.state&&(0,i.jsx)(C.CommentDiscussionIcon,{className:"fgColor-open"}),f[8]=n.state,f[9]=l):l=f[9],f[10]!==n.state?(c="closed"===n.state&&(0,i.jsx)(C.DiscussionClosedIcon,{className:"fgColor-muted"}),f[10]=n.state,f[11]=c):c=f[11],f[12]!==l||f[13]!==c?(u=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c]}),f[12]=l,f[13]=c,f[14]=u):u=f[14],f[15]!==n.title?(m=(0,i.jsx)(ev.A,{title:n.title,maxWidth:350,children:n.title}),f[15]=n.title,f[16]=m):m=f[16],f[17]!==n.number?(h=(0,i.jsxs)(d.l.Description,{children:["#",n.number]}),f[17]=n.number,f[18]=h):h=f[18],f[19]!==r||f[20]!==s||f[21]!==u||f[22]!==m||f[23]!==h?(p=(0,i.jsxs)(d.l.Item,{...r,className:s,children:[u,m,h]}),f[19]=r,f[20]=s,f[21]=u,f[22]=m,f[23]=h,f[24]=p):p=f[24],p}try{tf.displayName||(tf.displayName="DiscussionSuggestion")}catch{}function tg(e){let t,n,r,a,s,l,c,u,m,h,p,f,g,x,v,_=(0,o.c)(35);if(_[0]!==e?({type:s,path:n,stale:a,className:t,...r}=e,_[0]=e,_[1]=t,_[2]=n,_[3]=r,_[4]=a,_[5]=s):(t=_[1],n=_[2],r=_[3],a=_[4],s=_[5]),_[6]!==t||_[7]!==n||_[8]!==r||_[9]!==a||_[10]!==s){let e=n.split("/"),o=e.pop();c=d.l.Item,h=r;let x=a&&tp.stale;_[19]!==t||_[20]!==x?(p=(0,y.$)(tp.asyncSuggestion,x,t),_[19]=t,_[20]=x,_[21]=p):p=_[21],_[22]!==s?(f=(0,i.jsx)(d.l.LeadingVisual,{children:"folder"===s?(0,i.jsx)(C.FileDirectoryFillIcon,{}):(0,i.jsx)(C.FileIcon,{})}),_[22]=s,_[23]=f):f=_[23],g=o,l=d.l.Description,u="inline",m=e.join("/"),_[6]=t,_[7]=n,_[8]=r,_[9]=a,_[10]=s,_[11]=l,_[12]=c,_[13]=u,_[14]=m,_[15]=h,_[16]=p,_[17]=f,_[18]=g}else l=_[11],c=_[12],u=_[13],m=_[14],h=_[15],p=_[16],f=_[17],g=_[18];return _[24]!==l||_[25]!==u||_[26]!==m?(x=(0,i.jsxs)(l,{variant:u,children:[m,"/"]}),_[24]=l,_[25]=u,_[26]=m,_[27]=x):x=_[27],_[28]!==c||_[29]!==h||_[30]!==p||_[31]!==f||_[32]!==g||_[33]!==x?(v=(0,i.jsxs)(c,{...h,className:p,children:[f,g,x]}),_[28]=c,_[29]=h,_[30]=p,_[31]=f,_[32]=g,_[33]=x,_[34]=v):v=_[34],v}try{tg.displayName||(tg.displayName="FileSuggestion")}catch{}function ty(e){let t,n,r,a,s,l,c,u,m,h,p,f,g=(0,o.c)(28);g[0]!==e?({issue:n,stale:a,className:t,...r}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let x=a&&tp.stale;return g[5]!==t||g[6]!==x?(s=(0,y.$)(tp.asyncSuggestion,x,t),g[5]=t,g[6]=x,g[7]=s):s=g[7],g[8]!==n.state?(l="draft"===n.state&&(0,i.jsx)(C.IssueDraftIcon,{className:"fgColor-neutral"}),g[8]=n.state,g[9]=l):l=g[9],g[10]!==n.state?(c="open"===n.state&&(0,i.jsx)(C.IssueOpenedIcon,{className:"fgColor-open"}),g[10]=n.state,g[11]=c):c=g[11],g[12]!==n.state?(u="closed"===n.state&&(0,i.jsx)(C.IssueClosedIcon,{className:"fgColor-done"}),g[12]=n.state,g[13]=u):u=g[13],g[14]!==l||g[15]!==c||g[16]!==u?(m=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c,u]}),g[14]=l,g[15]=c,g[16]=u,g[17]=m):m=g[17],g[18]!==n.title?(h=(0,i.jsx)(ev.A,{title:n.title,maxWidth:350,children:n.title}),g[18]=n.title,g[19]=h):h=g[19],g[20]!==n.number?(p=(0,i.jsxs)(d.l.Description,{children:["#",n.number]}),g[20]=n.number,g[21]=p):p=g[21],g[22]!==r||g[23]!==s||g[24]!==m||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(d.l.Item,{...r,className:s,children:[m,h,p]}),g[22]=r,g[23]=s,g[24]=m,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{ty.displayName||(ty.displayName="IssueSuggestion")}catch{}function tx(e){let t,n,r,a,s,l,c,u,m,h,p,f,g=(0,o.c)(28);g[0]!==e?({pullRequest:r,stale:a,className:t,...n}=e,g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=a):(t=g[1],n=g[2],r=g[3],a=g[4]);let x=a&&tp.stale;return g[5]!==t||g[6]!==x?(s=(0,y.$)(tp.asyncSuggestion,x,t),g[5]=t,g[6]=x,g[7]=s):s=g[7],g[8]!==r.state?(l="draft"===r.state&&(0,i.jsx)(C.GitPullRequestDraftIcon,{className:"fgColor-neutral"}),g[8]=r.state,g[9]=l):l=g[9],g[10]!==r.state?(c="open"===r.state&&(0,i.jsx)(C.GitPullRequestIcon,{className:"fgColor-open"}),g[10]=r.state,g[11]=c):c=g[11],g[12]!==r.state?(u="closed"===r.state&&(0,i.jsx)(C.GitPullRequestClosedIcon,{className:"fgColor-done"}),g[12]=r.state,g[13]=u):u=g[13],g[14]!==l||g[15]!==c||g[16]!==u?(m=(0,i.jsxs)(d.l.LeadingVisual,{children:[l,c,u]}),g[14]=l,g[15]=c,g[16]=u,g[17]=m):m=g[17],g[18]!==r.title?(h=(0,i.jsx)(ev.A,{title:r.title,maxWidth:350,children:r.title}),g[18]=r.title,g[19]=h):h=g[19],g[20]!==r.number?(p=(0,i.jsxs)(d.l.Description,{children:["#",r.number]}),g[20]=r.number,g[21]=p):p=g[21],g[22]!==n||g[23]!==s||g[24]!==m||g[25]!==h||g[26]!==p?(f=(0,i.jsxs)(d.l.Item,{...n,className:s,children:[m,h,p]}),g[22]=n,g[23]=s,g[24]=m,g[25]=h,g[26]=p,g[27]=f):f=g[27],f}try{tx.displayName||(tx.displayName="PullRequestSuggestion")}catch{}function tv(e){let t,n,r,a,s,l,c,u,m=(0,o.c)(18);m[0]!==e?({repository:a,isMultistep:n,stale:s,className:t,...r}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=a,m[5]=s):(t=m[1],n=m[2],r=m[3],a=m[4],s=m[5]);let h=s&&tp.stale;m[6]!==t||m[7]!==h?(l=(0,y.$)(tp.asyncSuggestion,h,t),m[6]=t,m[7]=h,m[8]=l):l=m[8];let p=l;m[9]!==a.isInOrganization||m[10]!==a.ownerAvatarUrl?(c=a.ownerAvatarUrl?(0,i.jsx)(er.r,{src:a.ownerAvatarUrl,alt:"",size:16,square:a.isInOrganization}):(0,i.jsx)(C.RepoIcon,{}),m[9]=a.isInOrganization,m[10]=a.ownerAvatarUrl,m[11]=c):c=m[11];let f=c;return m[12]!==f||m[13]!==p||m[14]!==n||m[15]!==r||m[16]!==a.nwo?(u=n?(0,i.jsx)(tm,{...r,className:p,leadingVisual:f,children:a.nwo},a.nwo):(0,i.jsxs)(d.l.Item,{...r,className:p,children:[(0,i.jsx)(d.l.LeadingVisual,{children:f}),a.nwo]},a.nwo),m[12]=f,m[13]=p,m[14]=n,m[15]=r,m[16]=a.nwo,m[17]=u):u=m[17],u}try{tv.displayName||(tv.displayName="RepositorySuggestion")}catch{}function t_(e){return{value:null,key:e.value,render:t=>(0,i.jsx)(th,{category:e,...t})}}function tb(e){return null!==e}function tS(e){let t,n,r=(0,o.c)(3),[a,i]=(0,u.useState)(null);return(null===a&&null!==e||null!==a&&null===e)&&i(e),r[0]!==e?(t=()=>{let t=setTimeout(()=>i(e),200);return()=>clearTimeout(t)},n=[e],r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,u.useEffect)(t,n),a}function tw(e){return e}function tC(e){return e}function tj(e){return e}var tN=n(6612);function tI(e){let t,n,r,a,s=(0,o.c)(9);return s[0]!==e?({org:t,...n}=e,s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==t.avatarUrl?(r=(0,i.jsx)(er.r,{square:!0,src:t.avatarUrl}),s[3]=t.avatarUrl,s[4]=r):r=s[4],s[5]!==t.login||s[6]!==n||s[7]!==r?(a=(0,i.jsx)(td,{leadingVisual:r,...n,children:t.login}),s[5]=t.login,s[6]=n,s[7]=r,s[8]=a):a=s[8],a}function tT(e){let t,n,r,a=(0,o.c)(7);return a[0]!==e?({orgs:t,...n}=e,a[0]=e,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==t[0]?.login||a[4]!==t.length||a[5]!==n?(r=1===t.length?(0,i.jsxs)(td,{leadingVisual:(0,i.jsx)(C.ShieldLockIcon,{}),...n,children:["Single sign-on to ",(0,i.jsx)("strong",{children:t[0]?.login})," for more"]}):(0,i.jsx)(tm,{leadingVisual:(0,i.jsx)(C.ShieldLockIcon,{}),...n,children:"Single sign-on for more"}),a[3]=t[0]?.login,a[4]=t.length,a[5]=n,a[6]=r):r=a[6],r}try{tI.displayName||(tI.displayName="SSOOrgSuggestion")}catch{}try{tT.displayName||(tT.displayName="SSOPromptSuggestion")}catch{}let tA=e=>`/orgs/${encodeURIComponent(e.login)}/sso?return_to=${encodeURIComponent(location.href)}`;function tk(e){return{value:null,key:`open-link:${tA(e)}`,render:t=>(0,i.jsx)(tI,{org:e,...t})}}let tE=e=>(t,n)=>e.has(t.databaseId)&&!e.has(n.databaseId)?-1:e.has(n.databaseId)&&!e.has(t.databaseId)?1:0,tR=[{triggerChar:"@",insertSpaceOnCommit:!0,keepTriggerCharOnCommit:!1,multiWord:!0}];function tL(e){let t,n,r,a,l,c,m,h,p,f,g=(0,o.c)(25),{children:y,onSelectReference:x,onShowAgentsDialog:v}=e,{mode:_}=(0,E.Pk)(),[b,S]=(0,u.useState)(tP);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>S(!0),n=[],g[0]=t,g[1]=n):(t=g[0],n=g[1]),(0,u.useEffect)(t,n);let[w,j]=(0,u.useState)(null),{suggestions:N,stale:I}=function(e){let t=(0,o.c)(7),n=function(e){let t,n=(0,o.c)(3),{currentReferences:r}=(0,E.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==r||n[1]!==e){let t=e.filter.toLowerCase(),o=e=>e.toLowerCase().includes(t)&&e.toLowerCase()!==t,s=r.map(e=>{let t=L.Q.for(e);switch(t?.type){case void 0:break;case"repository":{let e=`${t.reference.ownerLogin}/${t.reference.name}`;if(!o(e))return null;return{value:L.Q.stringify(t),render:n=>(0,i.jsx)(tv,{repository:{databaseId:t.reference.id,isInOrganization:"Organization"===t.reference.ownerType,name:t.reference.name,nwo:e,ownerLogin:t.reference.ownerLogin},...n})}}case"issue":{let e=t.reference.title??"";if(!o(e))return null;return{value:L.Q.stringify(t),render:n=>(0,i.jsx)(ty,{issue:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"pull-request":{let e=t.reference.title??"";if(!o(e))return null;return{value:L.Q.stringify(t),render:n=>(0,i.jsx)(tx,{pullRequest:{number:t.reference.number,state:t.reference.state??"",title:e},...n})}}case"discussion":{let e=t.reference.title??"";if(!o(e))return null;return{value:L.Q.stringify(t),render:n=>(0,i.jsx)(tf,{discussion:{number:t.reference.number,state:t.reference.state,title:e},...n})}}case"file":{let e=t.reference.path;if(!o(e))return null;return{value:L.Q.stringify(t),render:n=>(0,i.jsx)(tg,{type:"folder"===t.reference.type?"folder":"file",path:e,...n})}}}return null}).filter(tb),l=ts.filter(n=>n.name.toLowerCase().includes(t)&&function(e,t){switch(e){case"start":return 0===t.index;case"anywhere":return!0}}(n.where,e)).map(t_);if(l.length>0){let e=s.at(-1);if(e&&"object"==typeof e){let t=e.render;e.render=e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{...e}),(0,i.jsx)(d.l.Divider,{})]})}}a=s.concat(l),n[0]=r,n[1]=e,n[2]=a}else a=n[2];t=a}return t}(e?.category==="categories"?e:null),r=function(e){let t,n=(0,o.c)(4),{availableAgents:r,loading:a,showLimit:s,disabled:l}=(0,en.JE)(null!==e);e:{let o;if(l||!e){t=null;break e}if(a&&!r){t="loading";break e}n[0]!==r||n[1]!==e||n[2]!==s?(o=r?.filter(t=>e?.category==="agents"&&t.name.toLowerCase().includes(e.filter.toLowerCase())).map(tu).concat({value:null,key:`open-link:${en.bn}`,render:e=>(0,i.jsxs)(i.Fragment,{children:[r.length>0&&(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(td,{leadingVisual:(0,i.jsx)(C.TelescopeIcon,{}),...e,inactiveText:s?"Start a new conversation to use other extensions.":void 0,children:"Marketplace"})]})})??null,n[0]=r,n[1]=e,n[2]=s,n[3]=o):o=n[3],t=o}return t}(e?.category==="agents"?e:null),a=function(e){let{currentReferences:t}=(0,E.Pk)(),n=tS(e),r=e!==n,{repositories:a,loading:o}=(0,tN.U)(n?.filter??"",null!==n),s=(0,u.useMemo)(()=>new Set(t.filter(e=>"repository"===e.type).map(e=>e.id)),[t]),{ssoOrganizations:l}=(0,E.Pk)();return{suggestions:(0,u.useMemo)(()=>{if(!n)return null;if("initial"===o)return"loading";let e=void 0!==n.nextCategory,t=a.toSorted(tE(s)).slice(0,5).map(t=>({value:e?null:L.Q.stringify({type:"repository",repo:t.nwo}),key:t.nwo,render:n=>(0,i.jsx)(tv,{repository:t,isMultistep:e,stale:!!o||r,...n})}))??[];return l.length>0&&t.push({value:null,key:1===l.length?`open-link:${tA(l[0])}`:"sso-orgs",render:e=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l.Divider,{}),(0,i.jsx)(tT,{orgs:l,...e})]})}),t},[a,o,n,s,l,r]),stale:!0===o}}(e?.category==="repositories"?e:null),s=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,R.b)(),d=tS(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-issues",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteIssues(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tC},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eD.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:L.Q.stringify({type:"issue",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(ty,{...t,issue:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="issues"?e:null),l=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,R.b)(),d=tS(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-pulls",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompletePullRequests(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tj},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eD.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==u||l[12]!==f.data||l[13]!==f.isPlaceholderData?(e=f.data?.map(e=>({value:L.Q.stringify({type:"pull-request",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tx,{...t,pullRequest:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=u,l[12]=f.data,l[13]=f.isPlaceholderData,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="pulls"?e:null),c=function(e){let t,n,r,a,s,l=(0,o.c)(18),{service:c}=(0,R.b)(),d=tS(e),u=e!==d,m=null!==d,h=d?.repository,p=d?.filter;l[0]!==h||l[1]!==p?(t=["copilot-autocomplete-discussions",h,p],l[0]=h,l[1]=p,l[2]=t):t=l[2],l[3]!==d||l[4]!==c?(n=async()=>c.fetchAutocompleteDiscussions(d.repository,d.filter),l[3]=d,l[4]=c,l[5]=n):n=l[5],l[6]!==m||l[7]!==t||l[8]!==n?(r={enabled:m,queryKey:t,queryFn:n,placeholderData:tw},l[6]=m,l[7]=t,l[8]=n,l[9]=r):r=l[9];let f=(0,eD.I)(r);e:{let e;if(!d){a=null;break e}if(f.isLoading){a="loading";break e}l[10]!==d||l[11]!==f.data||l[12]!==f.isPlaceholderData||l[13]!==u?(e=f.data?.map(e=>({value:L.Q.stringify({type:"discussion",repo:d.repository,id:e.number.toString()}),key:e.number.toString(),render:t=>(0,i.jsx)(tf,{...t,discussion:e,stale:f.isPlaceholderData||u})}))??null,l[10]=d,l[11]=f.data,l[12]=f.isPlaceholderData,l[13]=u,l[14]=e):e=l[14],a=e}let g=a;return l[15]!==f.isPlaceholderData||l[16]!==g?(s={suggestions:g,stale:f.isPlaceholderData},l[15]=f.isPlaceholderData,l[16]=g,l[17]=s):s=l[17],s}(e?.category==="discussions"?e:null),m=function(e){let t,n,r,a,s,l,c,d,u,m=(0,o.c)(23),h=(0,R.b)(),p=null!==e,f=e?.repository;m[0]!==f?(t=["copilot-repository",f],m[0]=f,m[1]=t):t=m[1],m[2]!==h||m[3]!==e?.repository?(n=async()=>{if(!e?.repository)return null;let t=await h.service.fetchRepo(e?.repository);if(!t.ok)throw Error("Failed to fetch repository");return t.payload},m[2]=h,m[3]=e?.repository,m[4]=n):n=m[4],m[5]!==p||m[6]!==t||m[7]!==n?(r={enabled:p,queryKey:t,queryFn:n,staleTime:3e5},m[5]=p,m[6]=t,m[7]=n,m[8]=r):r=m[8];let g=(0,eD.I)(r),y=ez(g.data??null);y.data?.directories,m[9]!==y.data?.directories?(s=y.data?.directories??[],m[9]=y.data?.directories,m[10]=s):s=m[10],m[11]!==s?(l=new Set(s),m[11]=s,m[12]=l):l=m[12],a=l,m[13]!==y.data?(c=y.data?(y.data.paths??[]).concat(y.data.directories??[]):null,m[13]=y.data,m[14]=c):c=m[14];let x=eB(c,e?.filter??"");e:{let t;if(!e){d=null;break e}if(g.isLoading||y.isLoading||x.isLoading){d="loading";break e}m[15]!==a||m[16]!==x.data||m[17]!==x.isPlaceholderData||m[18]!==e?(t=[...x.data?.slice(0,5).map(t=>({value:L.Q.stringify({repo:e.repository,type:"file",id:t}),key:t,render:e=>(0,i.jsx)(tg,{...e,path:t,type:a.has(t)?"folder":"file",stale:x.isPlaceholderData})}))??[]],m[15]=a,m[16]=x.data,m[17]=x.isPlaceholderData,m[18]=e,m[19]=t):t=m[19];let n=t;d=n.length>0?n:null}let v=d;return m[20]!==g.isPlaceholderData||m[21]!==v?(u={suggestions:v,stale:g.isPlaceholderData},m[20]=g.isPlaceholderData,m[21]=v,m[22]=u):u=m[22],u}(e?.category==="files"?e:null),h=function(e){let t,n=(0,o.c)(5),{ssoOrganizations:r}=(0,E.Pk)();e:{let a;if(!e){t=null;break e}if(n[0]!==e||n[1]!==r){let t;n[3]!==e?(t=t=>t.login.toLowerCase().includes(e.filter.toLowerCase()),n[3]=e,n[4]=t):t=n[4],a=r.filter(t).slice(0,10).map(tk),n[0]=e,n[1]=r,n[2]=a}else a=n[2];t=a}return t}(e?.category==="sso-orgs"?e:null);switch(e?.category){case void 0:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={suggestions:null,stale:!1},t[0]=e):e=t[0],e}case"categories":{let e;return t[1]!==n?(e={suggestions:n,stale:!1},t[1]=n,t[2]=e):e=t[2],e}case"repositories":return a;case"issues":return s;case"agents":{let e;return t[3]!==r?(e={suggestions:r,stale:!1},t[3]=r,t[4]=e):e=t[4],e}case"discussions":return c;case"pulls":return l;case"files":return m;case"sso-orgs":{let e;return t[5]!==h?(e={suggestions:h,stale:!1},t[5]=h,t[6]=e):e=t[6],e}}}(w);if(g[2]!==v||g[3]!==w?(r={query:w,onShowAgentsDialog:v},g[2]=v,g[3]=w,g[4]=r):r=g[4],!function(e){let t,n,r=(0,o.c)(12),{query:a,onShowAgentsDialog:i}=e,s=a?.category==="agents",{availableAgents:l,loading:c,disabled:d}=(0,en.JE)(s);r[0]!==s||r[1]!==l?.length||r[2]!==d||r[3]!==c||r[4]!==i?(t=()=>{s&&!c&&(d?i("agents-not-supported"):l?.length||i("no-agents-available"))},r[0]=s,r[1]=l?.length,r[2]=d,r[3]=c,r[4]=i,r[5]=t):t=r[5],r[6]!==s||r[7]!==l||r[8]!==d||r[9]!==c||r[10]!==i?(n=[s,c,l,d,i],r[6]=s,r[7]=l,r[8]=d,r[9]=c,r[10]=i,r[11]=n):n=r[11],(0,u.useEffect)(t,n)}(r),!b){let e;return g[5]!==y?(e=(0,i.jsx)("div",{children:y}),g[5]=y,g[6]=e):e=g[6],e}g[7]!==_||g[8]!==x||g[9]!==w?(a=e=>{let{suggestion:t}=e,n="string"==typeof t?t:t.value;(0,s.BI)("dotcom_chat.activate",{target:"AUTOCOMPLETE_ITEM_SELECTED",mode:_,suggestion:n});let r=null!==n&&w?.category!=="agents"?L.Q.parse(n):void 0;if(r&&x(r),"object"!=typeof t||null!==t.value)return;let a=/^open-link:(.+)$/.exec(t.key);if(a){j(null),window.open(a[1],"_blank");return}switch(w?.category){case"categories":tl.is(t.key)&&j(function(e){switch(e){case"repositories":return{category:"repositories",filter:""};case"agents":return{category:"agents",filter:""};case"repositories:discussions":return{category:"repositories",filter:"",nextCategory:"discussions"};case"repositories:issues":return{category:"repositories",filter:"",nextCategory:"issues"};case"repositories:pulls":return{category:"repositories",filter:"",nextCategory:"pulls"};case"repositories:files":return{category:"repositories",filter:"",nextCategory:"files"}}}(t.key));break;case"repositories":"sso-orgs"===t.key?j({category:"sso-orgs",filter:""}):w.nextCategory&&j({category:w.nextCategory,filter:"",repository:t.key})}},g[7]=_,g[8]=x,g[9]=w,g[10]=a):a=g[10];let T=a;g[11]===Symbol.for("react.memo_cache_sentinel")?(l=e=>j(t=>t?{...t,filter:e.query}:{category:"categories",filter:e.query,index:(e.target.selectionStart??0)-(e.query.length+e.trigger.triggerChar.length)}),g[11]=l):l=g[11];let A=l;g[12]===Symbol.for("react.memo_cache_sentinel")?(c=()=>j(null),g[12]=c):c=g[12];let k=c;return g[13]!==w?(m=w&&function(e){switch(e.category){case"categories":return null;case"repositories":switch(e.nextCategory){case"discussions":case"issues":case"pulls":case"files":return`${to[e.nextCategory]} \u{203A}`;default:return"Repositories \u203A"}case"agents":return to[e.category];case"discussions":case"issues":case"pulls":case"files":return`${to[e.category]} \u{203A} ${e.repository} \u{203A}`;case"sso-orgs":return"Single sign-on"}}(w)||void 0,g[13]=w,g[14]=m):m=g[14],g[15]!==y||g[16]!==T||g[17]!==N||g[18]!==m?(h=(0,i.jsx)(ti.a,{fullWidth:!0,suggestions:N,triggers:tR,tabInsertsSuggestions:!1,onHideSuggestions:k,onShowSuggestions:A,onSelectSuggestion:T,suggestionsPlacement:"above",title:m,asMenu:!0,children:y}),g[15]=y,g[16]=T,g[17]=N,g[18]=m,g[19]=h):h=g[19],g[20]!==I?(p=I&&(0,i.jsx)("span",{role:"status","aria-live":"polite",className:"sr-only",children:"Loading"}),g[20]=I,g[21]=p):p=g[21],g[22]!==h||g[23]!==p?(f=(0,i.jsxs)(i.Fragment,{children:[h,p]}),g[22]=h,g[23]=p,g[24]=f):f=g[24],f}function tP(){return"undefined"!=typeof document}try{tL.displayName||(tL.displayName="ChatInputAutocomplete")}catch{}let tO={container:"ChatInput-module__container--NFzCy",input:"ChatInput-module__input--iApWs",clicked:"ChatInput-module__clicked--hHA9l",attachments:"ChatInput-module__attachments--a9G6d",inputContainer:"ChatInput-module__inputContainer--BcExV",inputPreview:"ChatInput-module__inputPreview--f_0H3",toolbar:"ChatInput-module__toolbar--ZtCiG",toolbarLeft:"ChatInput-module__toolbarLeft--cjV2H",toolbarRight:"ChatInput-module__toolbarRight--PiQJn",containerSmall:"ChatInput-module__containerSmall--PJkO5",CommandIconButton:"ChatInput-module__CommandIconButton--eueFJ"};var tM=n(13897),tD=n(10370);let tF=(0,u.forwardRef)(function(e,t){let n,r,a,s,l,c=(0,o.c)(14),{text:d}=e;c[0]!==d?(n=(0,tM._)(d),c[0]=d,c[1]=n):n=c[1];let{availableAgents:m}=(0,en.JE)(n);c[2]!==m?(r=void 0===m?[]:m,c[2]=m,c[3]=r):r=c[3];let h=r,{currentReferences:p}=(0,E.Pk)(),f=(0,R.b)(),y=(0,A.l)().use(P.U,{references:p,agents:h}).parse(d),x=(0,tM.O)(y),v=(0,u.useRef)(x);c[4]!==p||c[5]!==f||c[6]!==x?(a=function(){for(let e of v.current)if(!x.has(e)){let t=p.find(t=>(0,g.Vb)(t)===e);t&&f.removeReference(t)}v.current=x},c[4]=p,c[5]=f,c[6]=x,c[7]=a):a=c[7],(0,u.useEffect)(a),c[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,b.G)("copilot-chat-input-textarea-preview"),c[8]=s):s=c[8];let _=y.children.map(tB);return c[9]!==t||c[10]!==_||c[11]!==s||c[12]!==tO.inputPreview?(l=(0,i.jsx)("div",{id:"copilot-chat-textarea-preview",...s,"aria-hidden":!0,className:tO.inputPreview,ref:t,role:"presentation",children:_}),c[9]=t,c[10]=_,c[11]=s,c[12]=tO.inputPreview,c[13]=l):l=c[13],l});try{tF.displayName||(tF.displayName="ChatInputPreview")}catch{}function tB(e,t){switch(e.type){case"text":return e.value;case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,i.jsx)("span",{className:tD.A.mention,...(0,b.G)("input-preview-ref"),children:e.value},t):e.value;case"agent-mention":return(0,i.jsx)("span",{className:tD.A.mention,children:e.value},t)}}var t$=n(69676),tz=n(82678),tU=n(63867),tV=n(5878),tH=n(33900);let tq={container:"ChatInputReferences-module__container--kZx3r",attachmentsList:"ChatInputReferences-module__attachmentsList--c0Z3e",scrolledToEnd:"ChatInputReferences-module__scrolledToEnd--qEVr3",loading:"ChatInputReferences-module__loading--G1S4m",divider:"ChatInputReferences-module__divider--m7eF_",menuButton:"ChatInputReferences-module__menuButton--R82CM",functionLoading:"ChatInputReferences-module__functionLoading--_Tp1T",convertToFileButton:"ChatInputReferences-module__convertToFileButton--JUfME",hoveringDismissConvertToFile:"ChatInputReferences-module__hoveringDismissConvertToFile--BVZ5r",convertToFileButtonContent:"ChatInputReferences-module__convertToFileButtonContent--pQ4zi"};var tW=n(53655);let tG=(0,u.memo)(e=>{let t,n,r,a,s,l,m,h,p,f,x,v,_,S,w,j,I,T=(0,o.c)(45),{className:A,isLoading:k,returnFocusRef:L,tokenSize:P,onSelectReference:O,getReferenceVersion:M,showConvertToFileText:D,onConvertToFile:F,onConvertToFileDismiss:B}=e,z=void 0===P?"medium":P,{currentReferences:U}=(0,E.Pk)(),V=(0,R.b)(),H=(0,u.useRef)(null),q=(0,tV.g)(H),[W,G]=(0,u.useState)(!1);T[0]!==U?(n=(0,g.rT)(U),T[0]=U,T[1]=n):n=T[1],t=n;let K=(0,u.useRef)(null);T[2]===Symbol.for("react.memo_cache_sentinel")?(r={containerRef:K,focusableElementFilter:tJ,bindKeys:t$.z0.ArrowHorizontal|t$.z0.HomeAndEnd,focusInStrategy:"previous",focusOutBehavior:"stop"},T[2]=r):r=T[2],T[3]!==t?(a=[t],T[3]=t,T[4]=a):a=T[4],(0,tz.G)(r,a),T[5]===Symbol.for("react.memo_cache_sentinel")?(s=[],T[5]=s):s=T[5];let J=(0,u.useRef)(s),Q=(e,t)=>{let n=J.current[t+1]??J.current[t-1]??L.current;n?.focus(),V.removeReference(e)};T[6]!==V||T[7]!==L?(l=()=>{setTimeout(()=>L.current?.focus()),V.clearCurrentReferences()},T[6]=V,T[7]=L,T[8]=l):l=T[8];let X=l,Z=(0,u.useRef)(t);T[9]!==t?(m=()=>{if(Z.current.length<t.length){let e=t.find(e=>!Z.current.find(t=>(0,g.x_)(t,e))),n=e?t.indexOf(e):-1;J?.current?.[n]?.scrollIntoView({behavior:"smooth",inline:"end"})}Z.current=t},h=[t],T[9]=t,T[10]=m,T[11]=h):(m=T[10],h=T[11]),(0,$.N)(m,h),T[12]!==B?(p=()=>{G(!1),B?.()},T[12]=B,T[13]=p):p=T[13];let Y=p,ee=(0,u.useId)();T[14]!==Y||T[15]!==D?(f=e=>{("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),e.stopPropagation(),D&&Y())},T[14]=Y,T[15]=D,T[16]=f):f=T[16];let et=f;if(0===t.length&&!k&&!D)return null;T[17]!==A?(x=(0,y.$)(A,tq.container),T[17]=A,T[18]=x):x=T[18];let en=q&&tq.scrolledToEnd,er=k&&tq.loading;T[19]!==en||T[20]!==er?(v=(0,y.$)(tq.attachmentsList,en,er),T[19]=en,T[20]=er,T[21]=v):v=T[21],T[22]!==ee||T[23]!==Y||T[24]!==W||T[25]!==F||T[26]!==et||T[27]!==D||T[28]!==z?(_=D&&(0,i.jsx)(N.Q,{onClick:F,leadingVisual:C.FileIcon,className:(0,y.$)(tq.convertToFileButton,W&&tq.hoveringDismissConvertToFile),"aria-describedby":ee,onKeyDown:et,children:(0,i.jsxs)("div",{className:tq.convertToFileButtonContent,children:["Convert to file",(0,i.jsx)(tW.lh,{size:z,onRemove:Y,descriptionId:ee,onMouseOver:()=>G(!0),onMouseLeave:()=>G(!1)})]})}),T[22]=ee,T[23]=Y,T[24]=W,T[25]=F,T[26]=et,T[27]=D,T[28]=z,T[29]=_):_=T[29];let ea=t.map((e,t)=>"repository"===e.type?(0,i.jsx)(tK,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:z,onRemove:()=>Q(e,t),onClick:O,getReferenceVersion:M},(0,g.Vb)(e)):(0,i.jsx)(tW.BR,{reference:e,ref:e=>{J.current[t]=e},"data-index":t,size:z,onRemove:()=>Q(e,t),onClick:O,getReferenceVersion:M},(0,g.Vb)(e)));return T[30]!==k?(S=k&&(0,i.jsxs)("div",{className:tq.functionLoading,...(0,b.G)("loading-indicator"),children:[(0,i.jsx)(tU.A,{size:"small"}),"Retrieving\u2026"]}),T[30]=k,T[31]=S):S=T[31],T[32]!==v||T[33]!==_||T[34]!==ea||T[35]!==S?(w=(0,i.jsxs)("div",{className:v,ref:H,children:[_,ea,S]}),T[32]=v,T[33]=_,T[34]=ea,T[35]=S,T[36]=w):w=T[36],T[37]!==X||T[38]!==t.length||T[39]!==z?(j=t.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tq.divider}),(0,i.jsxs)(c.W,{children:[(0,i.jsx)(c.W.Anchor,{children:(0,i.jsx)(ep.K,{icon:C.KebabHorizontalIcon,"aria-label":"Attachments options",variant:"invisible",tooltipDirection:"n",className:tq.menuButton,size:z})}),(0,i.jsx)(c.W.Overlay,{width:"small",children:(0,i.jsx)(d.l,{children:(0,i.jsxs)(d.l.Item,{onSelect:X,children:[(0,i.jsx)(d.l.LeadingVisual,{children:(0,i.jsx)(C.TrashIcon,{})}),"Remove attachments"]})})})]})]}),T[37]=X,T[38]=t.length,T[39]=z,T[40]=j):j=T[40],T[41]!==x||T[42]!==w||T[43]!==j?(I=(0,i.jsxs)("div",{role:"toolbar","aria-label":"Attachments",className:x,ref:K,children:[w,j]}),T[41]=x,T[42]=w,T[43]=j,T[44]=I):I=T[44],I});tG.displayName="ChatInputReferences";let tK=(0,u.forwardRef)(function(e,t){let n,r,a,s=(0,o.c)(8),l=e.reference,c=(0,E.pn)(tQ),d=`${l.ownerLogin}/${l.name}`,[m,h]=(0,tH.vn)(d),p=(0,u.useRef)(!1),f=m.code===tH.W5.Unindexed||m.docs===tH.W5.Unindexed;return s[0]!==c||s[1]!==f||s[2]!==h?(n=function(){!p.current&&f&&c&&(p.current=!0,h())},r=[c,f,h],s[0]=c,s[1]=f,s[2]=h,s[3]=n,s[4]=r):(n=s[3],r=s[4]),(0,u.useEffect)(n,r),s[5]!==e||s[6]!==t?(a=(0,i.jsx)(tW.BR,{ref:t,...e}),s[5]=e,s[6]=t,s[7]=a):a=s[7],a});try{tK.displayName||(tK.displayName="RepoReferenceToken")}catch{}try{tK.displayName||(tK.displayName="RepoReferenceToken")}catch{}function tJ(e){return!e.hasAttribute("aria-hidden")}function tQ(e){return e.model&&!e.model.hasLimitedCapabilities}var tX=n(9591),tZ=n(55864),tY=n(65607),t0=n(93116),t1=n(73451),t2=n(43371),t3=n.n(t2);let t5={dialogForm:"ConfigureMcpServersMenu-module__dialogForm--axjnZ",underline:"ConfigureMcpServersMenu-module__underline--Ii6ZO",inputError:"ConfigureMcpServersMenu-module__inputError--xZK7_",formField:"ConfigureMcpServersMenu-module__formField--nch6o",hiddenSubmitButton:"ConfigureMcpServersMenu-module__hiddenSubmitButton--rguJJ"},t6=(0,i.jsx)("a",{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"},children:"MCP authorization specification"}),t4=({panel:e,onPanelChange:t})=>{let[n,r]=(0,u.useState)(!1),a=(0,u.useRef)(null),[o,s]=(0,u.useState)(""),[l,c]=(0,u.useState)(""),[d,m]=(0,u.useState)(null);(0,u.useEffect)(()=>{"add-mcp"===e&&r(!0)},[e]);let h=(0,u.useCallback)(()=>{r(!1),s(""),c(""),m(null),t(null)},[t]),p=()=>""!==l.trim(),f=async e=>{if(e&&e.preventDefault(),!p()){l.trim()||m("MCP server URL is required");return}try{if(m(null),!function(e){try{let t=new URL(e.trim(),window.location.origin),n=t3()();return"https:"===t.protocol&&!!t.hostname&&/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.hostname)&&!n.test(e)}catch{return!1}}(l))return void m("Invalid HTTPS URL format");let e=new FormData;e.append("mcp_server_url",l.trim()),e.append("name",o.trim());let t=await (0,T.DI)("/copilot/mcp/servers",{method:"POST",body:e});if(!t.ok){let e="Failed to add MCP server";try{let n=await t.text();try{let t=JSON.parse(n);"unsupported_server_type"===t.error?e=(0,i.jsxs)(i.Fragment,{children:["This server does not conform to the ",t6,"."]}):t.message&&(e=t.message)}catch{e=n.includes("well-known/oauth-authorization-server")?(0,i.jsxs)(i.Fragment,{children:["This server does not conform to the ",t6,"."]}):n||e}}catch{e="Failed to add MCP server"}m(e);return}let n=(await t.json()).redirect_url;n&&"string"==typeof n?(h(),window.location.assign(n)):h()}catch(e){e instanceof Error?m(e.message):m("An unknown error occurred")}};return(0,i.jsx)(i.Fragment,{children:n&&(0,i.jsx)(el.l,{title:"Add remote MCP",onClose:h,footerButtons:[{buttonType:"default",content:"Cancel",onClick:h},{buttonType:"primary",content:(0,i.jsxs)(i.Fragment,{children:["Connect to MCP",(0,i.jsx)("span",{style:{marginLeft:8},children:(0,i.jsx)(C.LinkExternalIcon,{size:16})})]}),onClick:()=>{f()}}],returnFocusRef:a,children:(0,i.jsxs)("form",{className:t5.dialogForm,onSubmit:f,autoComplete:"on",children:[(0,i.jsxs)(t1.A,{className:t5.formField,children:[(0,i.jsx)(t1.A.Label,{children:"Name"}),(0,i.jsx)(tX.A,{name:"mcp-server-name",type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"Enter a name for this MCP",autoComplete:"on",block:!0})]}),(0,i.jsxs)(t1.A,{required:!0,className:t5.formField,children:[(0,i.jsx)(t1.A.Label,{children:"MCP server URL"}),(0,i.jsx)(tX.A,{name:"mcp-url",type:"url",value:l,onChange:e=>{c(e.target.value),m(null)},placeholder:"https://mcp.example.com/sse",className:d?t5.inputError:void 0,autoComplete:"on",block:!0}),d&&(0,i.jsx)(t1.A.Validation,{variant:"error",children:d})]}),(0,i.jsx)("button",{type:"submit",className:t5.hiddenSubmitButton,tabIndex:-1,children:"Submit"}),(0,i.jsxs)("p",{children:["MCP data will be processed by models coming from third-party providers. Always review the permissions required by the MCP and only connect to MCPs you know and trust. You can revoke access for the MCP at any time in"," ",(0,i.jsx)("a",{href:"/settings",className:t5.underline,children:"your settings"}),"."]})]})})})};try{t6.displayName||(t6.displayName="MCP_SPEC_LINK")}catch{}try{t4.displayName||(t4.displayName="ConfigureMcpServersMenu")}catch{}let t7={container:"McpToolsManager-module__container--cYWPI",header:"McpToolsManager-module__header--Oajnd",headerTitle:"McpToolsManager-module__headerTitle--gw2Fr",searchInput:"McpToolsManager-module__searchInput--EnBEo",contentArea:"McpToolsManager-module__contentArea--QjXge",loadingContainer:"McpToolsManager-module__loadingContainer--BSyl_",emptyState:"McpToolsManager-module__emptyState--nZxUC",emptyStateTitle:"McpToolsManager-module__emptyStateTitle--AaZZo",emptyStateDescription:"McpToolsManager-module__emptyStateDescription--xBhZh",footer:"McpToolsManager-module__footer--dAl5m"},t8=({anchorRef:e,open:t,onOpenChange:n,onSelectionChange:r})=>{let[a,o]=(0,u.useState)(!1),[s,l]=(0,u.useState)(null),[c,d]=(0,u.useState)([]),[m,h]=(0,u.useState)(!1),[p,f]=(0,u.useState)(null),[g,y]=(0,u.useState)(()=>new Set),[x,v]=(0,u.useState)(""),_=e=>{y(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},b=(0,u.useCallback)(()=>{let e=[];for(let t of c)g.has(t.id)&&e.push({serverId:t.id,serverText:t.text});return e},[c,g]);u.useEffect(()=>{let e=b();r?.(e)},[g,c,b,r]),(0,u.useEffect)(()=>{t&&S()},[t]);let S=async()=>{h(!0),f(null);try{let e=await fetch("/copilot/mcp/servers.json",{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let t=await e.json();d(t.servers)}catch(e){f(e instanceof Error?e.message:"Failed to load MCP servers")}finally{h(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ex.T,{open:t,onOpen:()=>n(!0),onClose:()=>n(!1),anchorRef:e,renderAnchor:()=>(0,i.jsx)(i.Fragment,{}),width:"medium",children:(0,i.jsxs)("div",{className:t7.container,children:[(0,i.jsxs)("div",{className:t7.header,children:[(0,i.jsx)("div",{className:t7.headerTitle,children:"Select MCP servers"}),(0,i.jsx)(tX.A,{placeholder:"Search by provider",value:x,onChange:e=>v(e.target.value),className:t7.searchInput,leadingVisual:C.SearchIcon})]}),(0,i.jsx)("div",{className:t7.contentArea,children:m?(0,i.jsx)("div",{className:t7.loadingContainer,children:(0,i.jsx)(tU.A,{})}):p?(0,i.jsxs)(t0.E,{children:[(0,i.jsx)(t0.E.Visual,{children:"\u26A0\uFE0F"}),(0,i.jsx)(t0.E.Heading,{children:"Error loading tools"})]}):0===c.length?(0,i.jsxs)("div",{className:t7.emptyState,children:[(0,i.jsx)(C.ToolsIcon,{size:24}),(0,i.jsx)("div",{className:t7.emptyStateTitle,children:"You don't have any MCP tools configured"}),(0,i.jsx)("div",{className:t7.emptyStateDescription,children:"Add one to connect models to files, APIs, databases, and more."})]}):(0,i.jsx)(tZ.G,{"aria-label":"MCP server selection","aria-multiselectable":"true",children:c.filter(e=>e.text.toLowerCase().includes(x.toLowerCase())).map(e=>{let t=g.has(e.id);return(0,i.jsxs)(tZ.G.Item,{id:e.id,onSelect:()=>_(e.id),current:t,"aria-selected":t,children:[(0,i.jsx)(tZ.G.LeadingVisual,{children:(0,i.jsx)(tY.A,{checked:t,readOnly:!0,"aria-label":`Select ${e.text}`})}),e.text,(0,i.jsx)(tZ.G.SubTree,{})]},e.id)})})}),(0,i.jsx)("div",{className:t7.footer,children:(0,i.jsx)(N.Q,{variant:"default",leadingVisual:C.PlusIcon,onClick:()=>{o(!0),l("add-mcp")},block:!0,children:"New tool"})})]})},"mcp-tool-manager"),a&&(0,i.jsx)(t4,{panel:s,onPanelChange:e=>{l(e),!e&&(o(!1),t&&S())}})]})};try{t8.displayName||(t8.displayName="McpToolsManager")}catch{}let t9=()=>{let e,t,n=(0,o.c)(3),[r,a]=(0,u.useState)(!1),s=(0,u.useRef)(null);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(N.Q,{ref:s,leadingVisual:C.SlidersIcon,variant:"invisible","aria-label":"MCP Tools",onClick:()=>a(!0),children:"Tools"}),n[0]=e):e=n[0],n[1]!==r?(t=(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)(t8,{anchorRef:s,open:r,onOpenChange:a})]}),n[1]=r,n[2]=t):t=n[2],t};try{t9.displayName||(t9.displayName="McpToolMenu")}catch{}var ne=n(66912),nt=n(31637);let nn=["github:cancel","copilot-chat:send-message","copilot-chat:edit-last-message"],nr=e=>{let t,n,r,a,c,d,m,h,p,x,v,_,C,N,U,V,ee,et,en,er,ea,ei,eo,es,el,ec,ed,eu,em,eh,ep,ef,eg,ey=(0,o.c)(145),ex=(0,E.Pk)(),ev=(0,R.b)();ey[0]!==ev?(t=ev.maxMessagesReached(),ey[0]=ev,ey[1]=t):t=ey[1];let e_=t,[eb,eS]=(0,u.useState)(null),ew="loading"===ex.slashCommandLoading.state,{safeSetTimeout:eC}=(0,j.A)(),{isLicensedLimited:ej}=(0,nt.xR)(),{onSelectReference:eN}=e,eI=(0,u.useRef)(null),eT=(0,u.useRef)(""),eA=(0,u.useRef)(!1),{activeCopilotSpaceId:ek}=(0,f.C)();ey[2]!==eb||ey[3]!==ex.mode?(n=e=>{eI.current=null,eT.current="",eA.current=!1,eb&&(eS(null),void 0!==e&&e&&(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_DISMISS",mode:ex.mode}))},ey[2]=eb,ey[3]=ex.mode,ey[4]=n):n=ey[4];let eE=n,eR=ex.isWaitingOnCopilot||ex.isWaitingOnAttachment||ew;ey[5]!==eE||ey[6]!==e.onSubmit||ey[7]!==e.textAreaRef||ey[8]!==eR?(r={isLoading:eR,onSubmit:e.onSubmit,textAreaRef:e.textAreaRef,clearPastedFile:eE},ey[5]=eE,ey[6]=e.onSubmit,ey[7]=e.textAreaRef,ey[8]=eR,ey[9]=r):r=ey[9];let{typingHasStarted:eL,textAreaRef:eP,textareaPreviewRef:eO,textAreaPreviewContainerRef:eM,text:eD,setText:eF,handleSubmit:eB,handleSubmitToNewThread:e$,handleScroll:ez,handleChange:eU,handleStop:eV,handleFocus:eH}=function(e){let t=(0,E.Pk)(),n=(0,R.b)(),{selectedThreadID:r,mode:a,autoSubmit:i,model:o}=t,{clearPastedFile:c,isLoading:d,onSubmit:m}=e,h=z.J.getSavedMessage(r),p=z.J.getSavedUserMessageOnError(r),{pathname:f}=(0,l.zy)(),[g,y]=(0,l.ok)(),[x,v]=(0,u.useState)(()=>W(t.mode,f,g)??p??h??""),[_,b]=(0,u.useState)(!1),S=(0,u.useRef)(null),w=e.textAreaRef||S,C=(0,u.useRef)(null),j=(0,u.useRef)(null),N=(0,u.useRef)(0),I=(0,u.useRef)(null),T=(0,u.useRef)(()=>{}),A=(0,u.useRef)(!1),k=(0,q.GF)(t.availableModels),L=(0,u.useCallback)(async()=>{t.renderAttachKnowledgeBaseHerePopover&&await n.fetchKnowledgeBases()},[n,t.renderAttachKnowledgeBaseHerePopover]);(0,u.useEffect)(()=>{L()},[L]),(0,u.useEffect)(()=>{z.J.setSavedMessage(r,x)},[r,x]),(0,$.N)(()=>{let e=0;!function t(){if(!w.current||!j.current||!C.current)return;e++,0===w.current.scrollHeight&&e<10&&setTimeout(t,1),w.current.style.height="0";let n=w.current.scrollHeight,r=Math.min(n,300);C.current.style.height=`${n}px`,w.current.style.height=`${n}px`,j.current.style.height=`${r}px`}()},[x,w,C]);let P=(0,u.useCallback)(()=>{w?.current&&C?.current&&j?.current&&(C.current.scrollTop=w.current.scrollTop,C.current.scrollLeft=w.current.scrollLeft)},[w]),O=(0,u.useMemo)(()=>t.currentReferences.filter(e=>!("isClientOnly"in e)||!e.isClientOnly),[t.currentReferences]),M=(0,u.useCallback)(async e=>{if(b(!1),z.J.clearSavedUserMessage(r),z.J.clearSavedUserMessageOnError(r),t.defaultRecipient&&!x.includes(`@${t.defaultRecipient}`)&&n.clearDefaultRecipient(),e?.preventDefault(),"assistive"===t.mode&&await H(x,t,n)){(0,s.BI)("dotcom_chat.activate",{target:"SLASH_COMMAND_EXECUTED",mode:t.mode,command:x}),"/new"===x.trim()&&z.J.setSavedMessageFast(r,null),v("");return}if(!d){let e=x;if(!e){let[t,r]=n.tryInferMessage(O);if(!t||!r)return;e=r}v(""),await m?.(e)}},[d,n,m,r,O,t,x]),D=(0,u.useCallback)(()=>n.sendMessageToNewThread(r,x,O,t.context,k),[n,r,t.context,O,x,k]);(0,u.useEffect)(()=>{(async()=>{let e=W(a,f,g),t=new URLSearchParams(g),n=t.get("model"),r=!n||n===o.id;e&&r&&!A.current&&(t.delete("prompt"),t.delete("model"),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_PROMPT_LOADED_FROM_URL",mode:"immersive"}),y(t,{replace:!0}),i&&(A.current=!0,await Promise.resolve(),await M()))})()},[f,g,y,a,i,o,M]);let F=(0,u.useCallback)(e=>{b(!0),w?.current&&(v(e.target.value),c?.(),N.current=0,P())},[P,c,w]),B=(0,u.useCallback)(async()=>{await n.stopStreaming(),null!=r&&(n.startThreadReload(),await new Promise(e=>{I.current=setTimeout(()=>e(r),6e3)}),T.current=await n.fetchMessages(r,!0,!0))},[n,r]);return(0,u.useEffect)(()=>{T.current&&(T.current(),T.current=()=>{})},[t.messages]),(0,u.useEffect)(()=>()=>{I.current&&(clearTimeout(I.current),I.current=null),n.cancelThreadReload(),T.current=()=>{}},[n]),{typingHasStarted:_,textAreaRef:w,textareaPreviewRef:C,textAreaPreviewContainerRef:j,text:x,setText:v,handleSubmit:M,handleSubmitToNewThread:D,handleScroll:P,handleChange:F,handleStop:B,handleFocus:e=>{e.currentTarget.selectionStart>0||e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)}}}(r);ey[10]!==eU||ey[11]!==eP?(a={inputRef:eP,fallbackEventHandler:eU},ey[10]=eU,ey[11]=eP,ey[12]=a):a=ey[12];let eq=(0,w.H)(a);ey[13]!==eq||ey[14]!==e.figmaAuthUrl||ey[15]!==eP?(c={figmaAuthUrl:e.figmaAuthUrl,textAreaRef:eP,emitChange:eq},ey[13]=eq,ey[14]=e.figmaAuthUrl,ey[15]=eP,ey[16]=c):c=ey[16];let{replaceUrlWithReferenceMention:eW}=function(e){let t,n,r,a,i,s,l,c,d,u,m,h,p,f=(0,o.c)(37),{figmaAuthUrl:y,textAreaRef:x,emitChange:v}=e,_=(0,R.b)(),{currentReferences:b}=(0,E.Pk)();f[0]!==v||f[1]!==x?(t=(e,t,n)=>{if(!x.current||e===t)return;let r=n?.[0]??0,a=x.current.value.slice(r,n?.[1]),i=a.indexOf(e);for(;i>-1;){let n=i+e.length;v(t,[i+r,n+r]),i=(a=a.replace(e,t)).indexOf(e)}},f[0]=v,f[1]=x,f[2]=t):t=f[2];let S=t;f[3]!==_?(n=e=>{let{itemUrl:t}=e,n=(0,g.Vc)(t);return _.addReference(n,"url-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),n},f[3]=_,f[4]=n):n=f[4],f[5]!==S||f[6]!==_?(r=(e,t,n)=>{let{parsedReferenceMention:r}=t;_.replaceReference(n,e);let a=L.Q.for(e);if(!a)return;let i=L.Q.stringify(r),o=L.Q.stringify(a);i!==o&&S(i,o)},a=(e,t,n)=>{let{itemUrl:r,parsedReferenceMention:a}=t;_.removeReference(n),S(L.Q.stringify(a),r)},f[5]=S,f[6]=_,f[7]=r,f[8]=a):(r=f[7],a=f[8]),f[9]!==_?(i=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[9]=_,f[10]=i):i=f[10],f[11]!==n||f[12]!==r||f[13]!==a||f[14]!==i?(s={mutationFn:B,onMutate:n,onSuccess:r,onError:a,onSettled:i},f[11]=n,f[12]=r,f[13]=a,f[14]=i,f[15]=s):s=f[15];let w=(0,I.n)(s);f[16]!==_?(l=e=>{let t=(0,g.Vc)(e);return _.addReference(t,"figma-attacher"),_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!0}),t},c=(e,t,n)=>{_.replaceReference(n,e)},f[16]=_,f[17]=l,f[18]=c):(l=f[17],c=f[18]),f[19]!==y||f[20]!==_?(d=(e,t,n)=>{n&&y&&e instanceof D?_.replaceReference(n,{type:"figma",title:"Sign in to Figma",id:`forbidden-${t}`,url:y,thumbnailUrl:"",fullImageUrl:"",authenticationRequired:!0}):_.removeReference(n)},f[19]=y,f[20]=_,f[21]=d):d=f[21],f[22]!==_?(u=()=>{_.dispatch({type:"WAITING_ON_ATTACHMENT",loading:!1})},f[22]=_,f[23]=u):u=f[23],f[24]!==u||f[25]!==l||f[26]!==c||f[27]!==d?(m={mutationFn:F,onMutate:l,onSuccess:c,onError:d,onSettled:u},f[24]=u,f[25]=l,f[26]=c,f[27]=d,f[28]=m):m=f[28];let C=(0,I.n)(m);f[29]!==b||f[30]!==C||f[31]!==S||f[32]!==w||f[33]!==x?(h=e=>{let t=x.current?.value.slice(...e)??"";if(/\s/.test(t))return t;let n=L.Q.fromUrl(t);n&&(b.every(e=>!L.Q.refersTo(n,e))&&w.mutate({itemUrl:t,parsedReferenceMention:n}),S(t,L.Q.stringify(n),e));let r=M.exec(t);return r&&(C.mutate(t),S(t,r[1],e)),t},f[29]=b,f[30]=C,f[31]=S,f[32]=w,f[33]=x,f[34]=h):h=f[34];let j=h;return f[35]!==j?(p={replaceUrlWithReferenceMention:j},f[35]=j,f[36]=p):p=f[36],p}(c),{isLoading:eG,addReferenceForMention:eK,addReferencesForMentions:eJ}=function(){let e=(0,R.b)(),{currentReferences:t,mode:n}=(0,E.Pk)(),r=(0,I.n)({mutationFn:async e=>{let t="repository"===e.type?[e.repo]:[e.repo,O(e.type),e.id??""],r=await (0,T.lS)(`/copilot/chat/reference/${t.join("/")}`);if(!r.ok)throw Error(`Failed to fetch reference data (${r.status}: ${r.statusText})`);return(0,s.BI)("dotcom_chat.activate",{target:"REFERENCE_LINK_PASTE",mode:n,linkType:e.type}),await r.json()},onSuccess:t=>e.addReference(t,"chatInput")}),a=e=>{t.every(t=>!L.Q.refersTo(e,t))&&r.mutate(e)};return{isLoading:r.isPending,addReferenceForMention:a,addReferencesForMentions:e=>{let n=(0,A.l)().use(P.U,{references:t,agents:[]}).parse(e),r=0;(0,k.YR)(n,e=>{"reference-mention"===e.type&&void 0===e.data.mentionedReferenceId&&r<20&&(r++,a(e.data.referenceMention))})}}}(),eQ=(0,Y.FQ)(),eX=!!(ek&&eQ),eZ=ew||eG||ex.isWaitingOnAttachment||!!e.submitDisabled,eY=0===eD.length;ey[17]!==eV||ey[18]!==ex.mode?(d=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_STOP",mode:ex.mode}),eV()},ey[17]=eV,ey[18]=ex.mode,ey[19]=d):d=ey[19];let e0=d;ey[20]!==ek||ey[21]!==eE||ey[22]!==eB||ey[23]!==ev||ey[24]!==eb||ey[25]!==eX||ey[26]!==ex.mode||ey[27]!==eZ?(m=async()=>{eZ||((0,s.BI)("dotcom_chat.activate",{target:"CHAT_MESSAGE_SUBMIT",mode:ex.mode}),eX&&await ev.selectPendingThread(ek),eb&&eE(!1),eB())},ey[20]=ek,ey[21]=eE,ey[22]=eB,ey[23]=ev,ey[24]=eb,ey[25]=eX,ey[26]=ex.mode,ey[27]=eZ,ey[28]=m):m=ey[28];let e1=m;ey[29]!==ek||ey[30]!==e$||ey[31]!==ev||ey[32]!==eX||ey[33]!==eZ?(h=async()=>{eZ||(eX&&await ev.selectPendingThread(ek),e$())},ey[29]=ek,ey[30]=e$,ey[31]=ev,ey[32]=eX,ey[33]=eZ,ey[34]=h):h=ey[34];let e2=h;ey[35]!==ev||ey[36]!==ex.messages?(p=()=>{let e=ex.messages.findLast(ns)?.id;e&&ev.startEditingMessage(e)},ey[35]=ev,ey[36]=ex.messages,ey[37]=p):p=ey[37];let e3=p,e5=ex.isWaitingOnCopilot?"Copilot is responding\u2026":ex.defaultRecipient?void 0:e_?"Message limit reached. To continue chatting with Copilot, start a new conversation.":e.placeholder?e.placeholder:"How can I help you?";ex.defaultRecipient&&""===eD&&!eL&&eF(`@${ex.defaultRecipient} `);let e6=(0,u.useRef)(null),[e4,e7]=(0,u.useState)(null);ey[38]!==ex.mode?(x=()=>{(0,s.BI)("dotcom_chat.activate",{target:"ATTACHMENT_MENU",mode:ex.mode}),e7(nl)},ey[38]=ex.mode,ey[39]=x):x=ey[39];let e8=x;ey[40]!==ev||ey[41]!==ex.mode||ey[42]!==ex.skillOptions?.deepCodeSearch?(v=()=>{(0,s.BI)("dotcom_chat.activate",{target:"DEEP_CODESEARCH",mode:ex.mode}),ev.dispatch({type:"SET_DEEP_CODESEARCH",deepCodeSearch:!ex.skillOptions?.deepCodeSearch})},ey[40]=ev,ey[41]=ex.mode,ey[42]=ex.skillOptions?.deepCodeSearch,ey[43]=v):v=ey[43],ex.skillOptions?.deepCodeSearch;let e9=v,{model:te}=(0,E.bP)("model"),tt=J.W.attachImagesImmersive&&"immersive"===ex.mode&&!!te.capabilities.supports.vision||!1;ey[44]!==ek||ey[45]!==ev||ey[46]!==te||ey[47]!==eX||ey[48]!==e.existingFileNames||ey[49]!==tt||ey[50]!==ex?(_=async(t,n,r,a)=>{let i=new Q.s(ex,ev),o=new Z.E(ev,e.existingFileNames),s=[];[...t].some(nc)&&!te.capabilities.supports.vision&&(ev.addAmbientError(`The ${te.displayName} model doesn't support answering questions about images. Select a different model and try again.`),(0,X.d)("vision_not_supported_for_model",{modelId:te.id,uploadType:n}));let[l,c]=Q.s.getAllowedFiles([...t],te);if(tt){let e=await i.addImageAttachments(l,n,ek,eX);e&&s.push(...e)}let d=[];for(let e of c)if(await Z.E.isAttachable(e)){let t=await o.addAttachment(e,r,a);t&&s.push(t)}else d.push(e.type);return tt&&d.length>0&&(0,X.d)("included_unsupported_file",{fileTypes:d.join(","),uploadType:n}),s},ey[44]=ek,ey[45]=ev,ey[46]=te,ey[47]=eX,ey[48]=e.existingFileNames,ey[49]=tt,ey[50]=ex,ey[51]=_):_=ey[51];let tn=_;ey[52]!==eE||ey[53]!==tn||ey[54]!==eb||ey[55]!==eF||ey[56]!==ex.mode||ey[57]!==eD?(C=async()=>{if(!eb)return;let e=[eb],t=await tn(e,"paste",eI.current||void 0,eT.current);if(t.length>0&&t[0]?.type==="thread-scoped-file"){let e=await eb.text();eF(eD.replaceAll(e,`@${t[0].name}`)),eE(!1),(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_CONVERT",mode:ex.mode})}},ey[52]=eE,ey[53]=tn,ey[54]=eb,ey[55]=eF,ey[56]=ex.mode,ey[57]=eD,ey[58]=C):C=ey[58];let tr=C;ey[59]!==eE?(N=()=>{eE(!0)},ey[59]=eE,ey[60]=N):N=ey[60];let ti=N;ey[61]!==eb||ey[62]!==ex.isWaitingOnAttachment||ey[63]!==ex.mode?(U=()=>{!eb||ex.isWaitingOnAttachment||eA.current||(eA.current=!0,(0,s.BI)("dotcom_chat.activate",{target:"CONVERT_TO_FILE_TRIGGER",mode:ex.mode}))},V=[eb,ex.isWaitingOnAttachment,ex.mode],ey[61]=eb,ey[62]=ex.isWaitingOnAttachment,ey[63]=ex.mode,ey[64]=U,ey[65]=V):(U=ey[64],V=ey[65]),(0,u.useEffect)(U,V),ey[66]!==eJ||ey[67]!==tn||ey[68]!==ev||ey[69]!==e.existingFileNames||ey[70]!==eW||ey[71]!==eC||ey[72]!==eP?(ee=t=>{let n=t.clipboardData;if(n?.items){let r=[];for(let t=0;t<n.items.length;t++){let a=n.items[t];if(a){if("file"===a.kind){let e=a.getAsFile();e&&r.push(e)}else if("string"===a.kind&&["text","text/plain"].includes(a.type)){let t=n.getData(a.type);if(t.length>1e3&&t.length<=Z.E.getAttachmentSizeLimit())eC(()=>{eA.current=!1;let n=new File([t],"",{type:Z.x}),r=new Z.E(ev,e.existingFileNames);eS(n),eI.current=r.generateFileName(t,n.type).then(e=>eT.current=e)},1);else{eJ(t);let e=eP.current?.selectionStart??0;setTimeout(()=>eW([e,e+t.length]));return}}}}r.length>0&&(t.preventDefault(),tn(r,"paste"))}},ey[66]=eJ,ey[67]=tn,ey[68]=ev,ey[69]=e.existingFileNames,ey[70]=eW,ey[71]=eC,ey[72]=eP,ey[73]=ee):ee=ey[73];let to=ee;ey[74]!==tn?(et=e=>{tn(e,"drag")},ey[74]=tn,ey[75]=et):et=ey[75];let ts=et,tl=tt&&J.W.wholeAreaDragDrop,tc=ek&&eQ,td=!tl||tc?eP.current:void 0;ey[76]!==ts||ey[77]!==td?(en={onFilesDrop:ts,targetElement:td},ey[76]=ts,ey[77]=td,ey[78]=en):en=ey[78],(0,G.J)(en);let tu=e.isStreaming||ex.isWaitingOnCopilot,tm=tu?e0:void 0,th=eY?e3:void 0;ey[79]!==e8||ey[80]!==e1||ey[81]!==e2||ey[82]!==e9||ey[83]!==tm||ey[84]!==th?(ea={"github:cancel":tm,"copilot-chat:send-message":e1,"copilot-chat:send-message-new-conversation":e2,"copilot-chat:add-attachment":e8,"copilot-chat:edit-last-message":th,"copilot-chat:deep-codesearch":e9},ey[79]=e8,ey[80]=e1,ey[81]=e2,ey[82]=e9,ey[83]=tm,ey[84]=th,ey[85]=ea):ea=ey[85],er=ea;let tp="small"===e.size;ey[86]!==tp?(ei=(0,y.$)(tO.container,{[tO.containerSmall]:tp}),ey[86]=tp,ey[87]=ei):ei=ey[87];let tf="small"===e.size?"small":"medium",tg=!!eb&&!ex.isWaitingOnAttachment;ey[88]!==tr||ey[89]!==ti||ey[90]!==eG||ey[91]!==eN||ey[92]!==e.getReferenceVersion||ey[93]!==tf||ey[94]!==tg?(eo=(0,i.jsx)(tG,{className:tO.attachments,returnFocusRef:e6,tokenSize:tf,isLoading:eG,onSelectReference:eN,getReferenceVersion:e.getReferenceVersion,showConvertToFileText:tg,onConvertToFile:tr,onConvertToFileDismiss:ti}),ey[88]=tr,ey[89]=ti,ey[90]=eG,ey[91]=eN,ey[92]=e.getReferenceVersion,ey[93]=tf,ey[94]=tg,ey[95]=eo):eo=ey[95];let ty=e_||e.disabled;ey[96]===Symbol.for("react.memo_cache_sentinel")?(es=(0,b.G)("copilot-chat-input-textarea"),ey[96]=es):es=ey[96],ey[97]!==eU||ey[98]!==eH||ey[99]!==to||ey[100]!==ez||ey[101]!==e5||ey[102]!==ty||ey[103]!==eD||ey[104]!==eP?(el=(0,i.jsx)("textarea",{autoFocus:!0,id:K.wg,className:tO.input,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",onPaste:to,ref:eP,onScroll:ez,onChange:eU,onFocus:eH,placeholder:e5,value:eD,"data-react-autofocus":!0,disabled:ty,...es}),ey[97]=eU,ey[98]=eH,ey[99]=to,ey[100]=ez,ey[101]=e5,ey[102]=ty,ey[103]=eD,ey[104]=eP,ey[105]=el):el=ey[105],ey[106]!==eK||ey[107]!==el?(ec=(0,i.jsx)(tL,{onSelectReference:eK,onShowAgentsDialog:e7,children:el}),ey[106]=eK,ey[107]=el,ey[108]=ec):ec=ey[108],ey[109]!==eD||ey[110]!==eO?(ed=(0,i.jsx)(tF,{text:eD,ref:eO}),ey[109]=eD,ey[110]=eO,ey[111]=ed):ed=ey[111],ey[112]!==ec||ey[113]!==ed||ey[114]!==eM?(eu=(0,i.jsxs)(S.tL.LimitKeybindingScope,{commandIds:nn,className:tO.inputContainer,ref:eM,children:[ec,ed]}),ey[112]=ec,ey[113]=ed,ey[114]=eM,ey[115]=eu):eu=ey[115];let tx=ex.skillOptions?.deepCodeSearch,tv=!!e.hideAttachmentButton;return ey[116]!==e8||ey[117]!==eQ||ey[118]!==ej||ey[119]!==e.extraToolbarLeft||ey[120]!==e.onNewThreadSelected||ey[121]!==e.showModelPicker||ey[122]!==e.showSpacesSelect||ey[123]!==e.submitButtonLabel||ey[124]!==ex.mode||ey[125]!==tu||ey[126]!==eZ||ey[127]!==tx||ey[128]!==tv?(em=(0,i.jsx)(na,{addAttachment:e8,attachmentButtonRef:e6,deepCodeSearch:tx,hideAttachmentButton:tv,stoppable:tu,submitDisabled:eZ,onNewThreadSelected:e.onNewThreadSelected,showModelPicker:e.showModelPicker,isLicensedLimited:ej,mode:ex.mode,extraToolbarLeft:e.extraToolbarLeft,isCopilotSpacePath:eQ,submitButtonLabel:e.submitButtonLabel,showSpacesSelect:e.showSpacesSelect}),ey[116]=e8,ey[117]=eQ,ey[118]=ej,ey[119]=e.extraToolbarLeft,ey[120]=e.onNewThreadSelected,ey[121]=e.showModelPicker,ey[122]=e.showSpacesSelect,ey[123]=e.submitButtonLabel,ey[124]=ex.mode,ey[125]=tu,ey[126]=eZ,ey[127]=tx,ey[128]=tv,ey[129]=em):em=ey[129],ey[130]!==ei||ey[131]!==eo||ey[132]!==eu||ey[133]!==em?(eh=(0,i.jsxs)("form",{className:ei,children:[eo,eu,em]}),ey[130]=ei,ey[131]=eo,ey[132]=eu,ey[133]=em,ey[134]=eh):eh=ey[134],ey[135]!==er||ey[136]!==eh?(ep=(0,i.jsx)(S.tL,{commands:er,children:eh}),ey[135]=er,ey[136]=eh,ey[137]=ep):ep=ey[137],ey[138]!==e4||ey[139]!==eU||ey[140]!==eP?(ef=(0,i.jsx)(ta,{inputRef:eP,inputOnChange:eU,anchorRef:e6,panel:e4,onPanelChange:e7}),ey[138]=e4,ey[139]=eU,ey[140]=eP,ey[141]=ef):ef=ey[141],ey[142]!==ep||ey[143]!==ef?(eg=(0,i.jsxs)(i.Fragment,{children:[ep,ef]}),ey[142]=ep,ey[143]=ef,ey[144]=eg):eg=ey[144],eg},na=(0,u.memo)(e=>{let t,n,r,a,s,l,c,d,u,m=(0,o.c)(31),{addAttachment:h,attachmentButtonRef:p,deepCodeSearch:f,hideAttachmentButton:g,stoppable:x,submitDisabled:v,onNewThreadSelected:b,showModelPicker:w,isLicensedLimited:j,mode:I,extraToolbarLeft:T,isCopilotSpacePath:A,submitButtonLabel:k,showSpacesSelect:E}=e;return m[0]!==f?(t=J.W.showDeepCodeSearchButton&&(0,i.jsx)(S.N5,{commandId:"copilot-chat:deep-codesearch",icon:C.RocketIcon,variant:"invisible",tooltipDirection:"n",className:(0,y.$)({[tO.clicked]:f})}),m[0]=f,m[1]=t):t=m[1],m[2]!==h||m[3]!==p||m[4]!==g?(n=!g&&(0,i.jsx)(N.Q,{ref:p,leadingVisual:C.PaperclipIcon,variant:"invisible",onClick:h,"data-testid":"attachment-menu-button",children:"Attach"}),m[2]=h,m[3]=p,m[4]=g,m[5]=n):n=m[5],m[6]!==A||m[7]!==I?(r=ee(J.W.copilotMcp,I,A)&&(0,i.jsx)(t9,{}),m[6]=A,m[7]=I,m[8]=r):r=m[8],m[9]!==E?(a=J.W.spacesInputMenuSelect&&E&&(0,i.jsx)(_,{}),m[9]=E,m[10]=a):a=m[10],m[11]!==T||m[12]!==t||m[13]!==n||m[14]!==r||m[15]!==a?(s=(0,i.jsxs)("div",{className:tO.toolbarLeft,children:[t,n,r,T,a]}),m[11]=T,m[12]=t,m[13]=n,m[14]=r,m[15]=a,m[16]=s):s=m[16],m[17]!==j||m[18]!==b||m[19]!==w?(l=b&&w&&(0,i.jsx)(ne.Yb,{onNewThreadSelected:b,limited:j}),m[17]=j,m[18]=b,m[19]=w,m[20]=l):l=m[20],m[21]!==x||m[22]!==k||m[23]!==v?(c=x?(0,i.jsx)(no,{}):(0,i.jsx)(ni,{disabled:v,label:k}),m[21]=x,m[22]=k,m[23]=v,m[24]=c):c=m[24],m[25]!==l||m[26]!==c?(d=(0,i.jsxs)("div",{className:tO.toolbarRight,children:[l,c]}),m[25]=l,m[26]=c,m[27]=d):d=m[27],m[28]!==s||m[29]!==d?(u=(0,i.jsxs)("div",{className:tO.toolbar,children:[s,d]}),m[28]=s,m[29]=d,m[30]=u):u=m[30],u});function ni(e){let t,n=(0,o.c)(3),{disabled:r,label:a}=e,s=a||"Send now";return n[0]!==r||n[1]!==s?(t=(0,i.jsx)(S.N5,{commandId:"copilot-chat:send-message",variant:"invisible",size:"medium",icon:C.PaperAirplaneIcon,"aria-label":s,disabled:r,tooltipDirection:"n"}),n[0]=r,n[1]=s,n[2]=t):t=n[2],t}function no(){let e,t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(S.N5,{...(0,b.G)("copilot-chat-stop-button"),commandId:"github:cancel",variant:"invisible",size:"medium",icon:C.SquareFillIcon,tooltipDirection:"n",className:tO.CommandIconButton}),t[0]=e):e=t[0],e}na.displayName="ChatInputToolbar";try{nr.displayName||(nr.displayName="ChatInput")}catch{}try{ni.displayName||(ni.displayName="SubmitButton")}catch{}try{no.displayName||(no.displayName="StopButton")}catch{}function ns(e){return"user"===e.role}function nl(e){return"attachment-types"===e?null:"attachment-types"}function nc(e){return e.type.startsWith("image/")}},42342:(e,t,n)=>{n.d(t,{UJ:()=>y,E5:()=>c,Dq:()=>d,Gj:()=>u,f1:()=>m,cB:()=>h,zc:()=>p,Cb:()=>f,hl:()=>g});var r=n(74848),a=n(21728),i=n(16255),o=n(10569),s=n(96540);let l={chatPortalContainer:"PortalContainerUtils-module__chatPortalContainer--QCSxu",menuPortalContainer:"PortalContainerUtils-module__menuPortalContainer--MjmMh"},c="copilotChatMenuPortalRoot",d="copilotChatMessagesMenuPortalRoot",u="copilotChatPortalRoot",m="copilotChatTopicPickerPortalRoot",h=()=>{let e,t,n,o=(0,a.c)(3),c=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(c.current,u)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:c,className:l.chatPortalContainer}),o[2]=n):n=o[2],n},p=()=>{let e,t,n,o=(0,a.c)(3),d=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(d.current,c)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:d,className:l.menuPortalContainer}),o[2]=n):n=o[2],n},f=()=>{let e,t,n,o=(0,a.c)(3),l=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(l.current,d)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),o[2]=n):n=o[2],n},g=()=>{let e,t,n,o=(0,a.c)(3),l=(0,s.useRef)(null);return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{(0,i.c)(l.current,m)},t=[],o[0]=e,o[1]=t):(e=o[0],t=o[1]),(0,s.useEffect)(e,t),o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{ref:l}),o[2]=n):n=o[2],n},y=e=>{let t,n,i,l,d,u,m=(0,a.c)(10);m[0]!==e?({children:t,portalContainerName:i,...n}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i):(t=m[1],n=m[2],i=m[3]);let[h,p]=(0,s.useState)(x);if(m[4]===Symbol.for("react.memo_cache_sentinel")?(l=()=>p(!0),d=[],m[4]=l,m[5]=d):(l=m[4],d=m[5]),(0,s.useEffect)(l,d),!h)return null;let f=i||c;return m[6]!==t||m[7]!==n||m[8]!==f?(u=(0,r.jsx)(o.W.Overlay,{...n,portalContainerName:f,children:t}),m[6]=t,m[7]=n,m[8]=f,m[9]=u):u=m[9],u};try{h.displayName||(h.displayName="ChatPortalContainer")}catch{}try{p.displayName||(p.displayName="MenuPortalContainer")}catch{}try{f.displayName||(f.displayName="MessagesPortalContainer")}catch{}try{g.displayName||(g.displayName="TopicPickerPortalContainer")}catch{}try{y.displayName||(y.displayName="ActionMenuOverlay")}catch{}function x(){return"undefined"!=typeof document}},53655:(e,t,n)=>{n.d(t,{BR:()=>_,lh:()=>w,a_:()=>b});var r,a=n(74848),i=n(21728),o=n(59706),s=n(38621),l=n(63867),c=n(87330),d=n(35642),u=n(34164),m=n(96540),h=n(22069),p=n(34901),f=n(47397),g=n(65011),y=n(39038);let x={referenceToken:"ReferenceToken-module__referenceToken--MoDht",small:"ReferenceToken-module__small--LxJV_",loadingName:"ReferenceToken-module__loadingName--OEUm0",name:"ReferenceToken-module__name--Wq2Bs",trailingVisual:"ReferenceToken-module__trailingVisual--JeIeK",removeButton:"ReferenceToken-module__removeButton--BIbYP",icon:"ReferenceToken-module__icon--WJse5",openIcon:"ReferenceToken-module__openIcon--LVVWZ",closedIcon:"ReferenceToken-module__closedIcon--qYsTG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--ivG0w",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--S1IFs",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--PpoUe",figmaIcon:"ReferenceToken-module__figmaIcon--x5K98"};var v=n(30581);let _=(0,m.forwardRef)(function(e,t){let n,r,o,l,c,g,y,_,S,j,N,I=(0,i.c)(40),{reference:T,message:A,onClick:k,onRemove:E,size:R,getReferenceVersion:L}=e;I[0]!==E?(n=e=>{E&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),E())},I[0]=E,I[1]=n):n=I[1];let P=n,O=(0,f.b)(),M=(0,p.pn)(C),D=(0,p.A3)("selectedThreadID");I[2]!==M||I[3]!==O||I[4]!==A||I[5]!==k||I[6]!==T||I[7]!==D?(r=e=>{if(!k||(k(T,e),!e.defaultPrevented)){if(!M){if(("issue"===T.type||"pull-request"===T.type||"discussion"===T.type)&&(window.open(T.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(T.type)){let e=D?`/copilot/c/${D}`:"/copilot";e+=`?reference_id=${(0,h.Vb)(T)}`,A&&(e+=`&message_index=${A.messageIndex}`),window.open(e,"_blank");return}["repository","folder","docset","third-party","image","issue","pull-request"].includes(T.type)||(e.preventDefault(),O.selectReference(T))}}},I[2]=M,I[3]=O,I[4]=A,I[5]=k,I[6]=T,I[7]=D,I[8]=r):r=I[8];let F=r,B=(0,p.A3)("currentTopic");I[9]!==T||I[10]!==B?(o=b(T,(0,h.P)(B)),I[9]=T,I[10]=B,I[11]=o):o=I[11];let $=o,z=(0,m.useId)();I[12]!==L||I[13]!==T?(l=L?.(T),I[12]=L,I[13]=T,I[14]=l):l=I[14];let U=l;I[15]!==T?(c=(0,h.JP)(T),I[15]=T,I[16]=c):c=I[16];let V="small"===R&&x.small;I[17]!==V?(g=(0,u.$)(x.referenceToken,V),I[17]=V,I[18]=g):g=I[18];let H=E&&z;return I[19]!==$?(y=$&&(0,a.jsx)($,{size:"small",className:(0,u.$)(x.icon,$===s.IssueOpenedIcon&&x.openIcon,$===s.GitPullRequestIcon&&x.openIcon,$===s.IssueClosedIcon&&x.closedIcon,$===s.GitPullRequestClosedIcon&&x.pullRequestClosedIcon,$===s.GitMergeIcon&&x.pullRequestMergedIcon)}),I[19]=$,I[20]=y):y=I[20],I[21]!==T?(_="loading"===T.type?(0,a.jsx)("span",{className:x.loadingName,children:(0,a.jsx)(d.r,{"aria-hidden":"true"})}):(0,a.jsx)("span",{className:x.name,children:(0,h.z$)(T)}),I[21]=T,I[22]=_):_=I[22],I[23]!==U?(S=void 0!==U&&(0,a.jsx)("span",{className:x.trailingVisual,children:(0,a.jsx)(v.g,{version:U})}),I[23]=U,I[24]=S):S=I[24],I[25]!==z||I[26]!==E||I[27]!==R?(j=E&&(0,a.jsx)(w,{size:R,onRemove:E,descriptionId:z}),I[25]=z,I[26]=E,I[27]=R,I[28]=j):j=I[28],I[29]!==F||I[30]!==P||I[31]!==t||I[32]!==y||I[33]!==_||I[34]!==S||I[35]!==j||I[36]!==c||I[37]!==g||I[38]!==H?(N=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("a",{href:c,className:g,onKeyDown:P,onClick:F,ref:t,"aria-describedby":H,children:[y,_,S,j]})}),I[29]=F,I[30]=P,I[31]=t,I[32]=y,I[33]=_,I[34]=S,I[35]=j,I[36]=c,I[37]=g,I[38]=H,I[39]=N):N=I[39],N});function b(e,t){switch(e.type){case"figma":return S;case"file":return s.FileIcon;case"folder":return s.FileDirectoryFillIcon;case"file-diff":return s.FileDiffIcon;case"snippet":return t&&"languageName"in e&&e.languageName&&g.Yr.has(e.languageName)?s.BookIcon:s.CodeIcon;case"repository":return s.RepoIcon;case"symbol":return s.CodeSquareIcon;case"docset":return s.BookIcon;case"commit":return s.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return s.GitPullRequestDraftIcon;switch(e.state){case"open":default:return s.GitPullRequestIcon;case"closed":return s.GitPullRequestClosedIcon;case"merged":return s.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return s.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return s.IssueOpenedIcon;case"closed":return s.IssueClosedIcon;case"not_planned":return s.SkipIcon}return;case"draft-issue":return s.IssueDraftIcon;case"discussion":return s.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return o._;else return s.GlobeIcon;return;case"thread-scoped-file":return"language"in e&&g.Yr.has(e.language)?s.MarkdownIcon:s.CodeIcon;case"loading":return l.A;default:return}}function S(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:x.figmaIconOuter,children:(0,a.jsx)(y._,{className:x.figmaIcon})}),t[0]=e):e=t[0],e}let w=e=>{let t,n,r,o,l=(0,i.c)(12),{size:d,onRemove:u,descriptionId:m,onMouseOver:h,onMouseLeave:p}=e;return l[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},l[0]=u,l[1]=t):t=l[1],l[2]!==p||l[3]!==h||l[4]!==d||l[5]!==t?(n=(0,a.jsx)(c.K,{tabIndex:-1,"aria-hidden":!0,size:d,icon:s.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:x.removeButton,onMouseOver:h,onMouseLeave:p}),l[2]=p,l[3]=h,l[4]=d,l[5]=t,l[6]=n):n=l[6],l[7]!==m?(r=(0,a.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),l[7]=m,l[8]=r):r=l[8],l[9]!==n||l[10]!==r?(o=(0,a.jsxs)(a.Fragment,{children:[n,r]}),l[9]=n,l[10]=r,l[11]=o):o=l[11],o};try{_.displayName||(_.displayName="ReferenceToken")}catch{}try{(r=Icon).displayName||(r.displayName="Icon")}catch{}try{S.displayName||(S.displayName="StylizedFigmaIcon")}catch{}try{w.displayName||(w.displayName="RemoveReferenceTokenButton")}catch{}function C(e){return"immersive"===e.mode}},69359:(e,t,n)=>{n.d(t,{FZ:()=>C,X1:()=>I});var r,a=n(74848),i=n(21728),o=n(38007),s=n(19139),l=n(98386),c=n(15385),d=n(83978),u=n(34164),m=n(96540),h=n(40961),p=n(6612),f=n(51295),g=n(22069),y=n(74244),x=n(34901),v=n(47397),_=n(39546),b=n(42342);let S={ActionList:"RepoSelectPanel-module__ActionList--KXTae",emptyStateMessage:"RepoSelectPanel-module__emptyStateMessage--n1cfY"};var w=n(99629);function C(e){let t,n,r,o,s=(0,i.c)(12),{currentReferences:l}=(0,x.Pk)(),c=(0,v.b)();s[0]!==l?(n=new Set((t=l.filter(N)).map(j)),s[0]=l,s[1]=t,s[2]=n):(t=s[1],n=s[2]);let d=n,[u,h]=(0,m.useState)();s[3]!==c||s[4]!==e||s[5]!==t?(r=async n=>{h(void 0);let r=t.find(e=>e.id===n);if(r)return void c.removeReference(r);let a=await c.service.fetchRepo(n);if(!a.ok){h("Error: failed to attach repository. Please try again."),e.onOpenChange(!0);return}let i=(0,g.qS)(a.payload);c.addReference(i,"repoMenu")},s[3]=c,s[4]=e,s[5]=t,s[6]=r):r=s[6];let p=r;return s[7]!==u||s[8]!==e||s[9]!==d||s[10]!==p?(o=(0,a.jsx)(I,{...e,selectionVariant:"multiple",selectedRepoIds:d,onSelectRepo:p,description:"Choose repositories to chat about.",error:u}),s[7]=u,s[8]=e,s[9]=d,s[10]=p,s[11]=o):o=s[11],o}function j(e){return e.id}function N(e){return"repository"===e.type}function I(e){let t,n,r,g,y,v,C,j,N,I,k,E,R,L,P,O,M,D,F,B,$=(0,i.c)(54),{open:z,onOpenChange:U,submitReturnFocusRef:V,cancelReturnFocusRef:H,selectedRepoIds:q,featuredRepoIds:W,onSelectRepo:G,selectionVariant:K,description:J,error:Q,ownerDisplayLogin:X,includeForks:Z}=e,Y=void 0===W?q:W,{ssoOrganizations:ee}=(0,x.Pk)(),[et,en]=(0,m.useState)("");$[0]!==z?(t=()=>{z||en("")},n=[z],$[0]=z,$[1]=t,$[2]=n):(t=$[1],n=$[2]),(0,m.useEffect)(t,n);let{repositories:er,loading:ea}=(0,p.U)(et,z,void 0,X,void 0!==Z&&Z);e:{if(ea){r="Loading repositories";break e}if(0===er.length){r="No repositories found";break e}if(1===er.length){r="1 repository found";break e}r=`${er.length} repositories found`}let ei=r;$[3]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{en(e.currentTarget.value)},$[3]=g):g=$[3];let eo=g;t:{let e;if(!ee){let e;$[4]===Symbol.for("react.memo_cache_sentinel")?(e=[],$[4]=e):e=$[4],y=e;break t}$[5]!==ee?(e=ee.map(A),$[5]=ee,$[6]=e):e=$[6],y=e}let es=y;$[7]!==Y?(v=e=>Y.has(e.databaseId)?"featuredRepos":"nonFeaturedRepos",$[7]=Y,$[8]=v):v=$[8];let{featuredRepos:el,nonFeaturedRepos:ec}=(0,f.O)(er,v),[ed,eu]=(0,m.useState)(!1);$[9]!==G?(C=async e=>{eu(!0),await G(e),eu(!1)},$[9]=G,$[10]=C):C=$[10];let em=C;$[11]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.G)("repo-select-panel"),$[11]=j):j=$[11];let eh=d.X;$[12]!==H.current||$[13]!==U?(N=()=>{(0,h.flushSync)(()=>U(!1)),H.current?.focus(),(0,o.BI)("dotcom_chat.activate",{target:"REPOSITORY_DIALOG_CLOSE",mode:"immersive"})},$[12]=H.current,$[13]=U,$[14]=N):N=$[14],$[15]!==U||$[16]!==V.current?(I=()=>{(0,h.flushSync)(()=>U(!1)),V.current?.focus()},$[15]=U,$[16]=V.current,$[17]=I):I=$[17];let ep="multiple"===K?"Select repositories":"Select a repository",ef=es.length>0&&"border-bottom-0";$[18]!==ef?(k=(0,u.$)(ef),$[18]=ef,$[19]=k):k=$[19];let eg=!0===ea||ed;$[20]!==eg?(E=(0,a.jsx)(d.X.SearchInput,{loading:eg,onChange:eo,placeholder:"Search repositories","aria-label":"Search repositories"}),$[20]=eg,$[21]=E):E=$[21],$[22]!==k||$[23]!==E?(R=(0,a.jsx)(d.X.Header,{className:k,children:E}),$[22]=k,$[23]=E,$[24]=R):R=$[24],$[25]!==X||$[26]!==es?(L=(void 0===X||""===X)&&(0,a.jsx)(s.x,{portalContainerName:b.f1,protectedOrgs:es,redirectURI:T,useFullWidthStyle:!0}),$[25]=X,$[26]=es,$[27]=L):L=$[27],$[28]===Symbol.for("react.memo_cache_sentinel")?(P=(0,a.jsx)(b.hl,{}),$[28]=P):P=$[28],$[29]!==Q?(O=Q&&(0,a.jsx)(d.X.Message,{variant:"error",size:"inline",children:Q}),$[29]=Q,$[30]=O):O=$[30];let ey=c.l;$[31]!==ei?(M=(0,a.jsx)("div",{className:"sr-only",children:ei}),$[31]=ei,$[32]=M):M=$[32];let ex="initial"===ea?(0,a.jsx)(d.X.Loading,{children:"Fetching repositories\u2026"}):0!==er.length||ea?(0,a.jsxs)(a.Fragment,{children:[el?.map(e=>(0,a.jsx)(w.W,{repo:e,onSelect:em,selected:q.has(e.databaseId)},e.databaseId)),el&&ec&&(0,a.jsx)(c.l.Divider,{}),ec?.map(e=>(0,a.jsx)(w.W,{repo:e,onSelect:em,selected:q.has(e.databaseId)},e.databaseId))]}):(0,a.jsx)("div",{className:S.emptyStateMessage,children:(0,a.jsx)(_.O,{delay:750,children:(0,a.jsx)(d.X.Message,{variant:"empty",title:"No repositories found",children:"Try a different search term"})})});return $[33]!==ey||$[34]!==S.ActionList||$[35]!==M||$[36]!==ex?(D=(0,a.jsxs)(ey,{className:S.ActionList,children:[M,ex]}),$[33]=ey,$[34]=S.ActionList,$[35]=M,$[36]=ex,$[37]=D):D=$[37],$[38]!==eh||$[39]!==J||$[40]!==z||$[41]!==K||$[42]!==N||$[43]!==I||$[44]!==ep||$[45]!==R||$[46]!==L||$[47]!==P||$[48]!==O||$[49]!==D?(F=(0,a.jsxs)(eh,{width:"large",maxHeight:"xlarge",onCancel:N,onSubmit:I,open:z,variant:"modal",selectionVariant:K,title:ep,description:J,children:[R,L,P,O,D]}),$[38]=eh,$[39]=J,$[40]=z,$[41]=K,$[42]=N,$[43]=I,$[44]=ep,$[45]=R,$[46]=L,$[47]=P,$[48]=O,$[49]=D,$[50]=F):F=$[50],$[51]!==j||$[52]!==F?(B=(0,a.jsx)("div",{...j,children:F}),$[51]=j,$[52]=F,$[53]=B):B=$[53],B}function T(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function A(e){return e.login}try{(r=function(e){let t,n,r,o=(0,i.c)(9),{selectedThreadID:s,currentTopic:l}=(0,x.Pk)(),c=(0,v.b)();o[0]!==c||o[1]!==s?(t=async e=>{y.J.setSelectedTopic(s??"",e.toString()),c.clearCurrentReferences(["image","issue"]),await c.fetchCurrentRepo(e)},o[0]=c,o[1]=s,o[2]=t):t=o[2];let d=t;return o[3]!==l?(n=new Set(l?[l.id]:[]),o[3]=l,o[4]=n):n=o[4],o[5]!==d||o[6]!==e||o[7]!==n?(r=(0,a.jsx)(I,{...e,selectionVariant:"instant",selectedRepoIds:n,onSelectRepo:d,description:"Choose a repository to chat about."}),o[5]=d,o[6]=e,o[7]=n,o[8]=r):r=o[8],r}).displayName||(r.displayName="RepoTopicSelectPanel")}catch{}try{C.displayName||(C.displayName="RepoReferencesSelectPanel")}catch{}try{I.displayName||(I.displayName="RepoSelectPanel")}catch{}},99629:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(74848),a=n(21728),i=n(39459),o=n(15385);function s(e){let t,n,s,l,c=(0,a.c)(14),{onSelect:d,repo:u,selected:m,trailingVisualComponent:h}=e,{databaseId:p,isInOrganization:f,nwo:g,ownerAvatarUrl:y}=u;return c[0]!==p||c[1]!==d?(t=()=>d(p),c[0]=p,c[1]=d,c[2]=t):t=c[2],c[3]!==f||c[4]!==y?(n=(0,r.jsx)(o.l.LeadingVisual,{children:(0,r.jsx)(i.r,{src:y,square:f,size:16})}),c[3]=f,c[4]=y,c[5]=n):n=c[5],c[6]!==h?(s=h&&(0,r.jsx)(o.l.TrailingVisual,{children:h}),c[6]=h,c[7]=s):s=c[7],c[8]!==g||c[9]!==m||c[10]!==t||c[11]!==n||c[12]!==s?(l=(0,r.jsxs)(o.l.Item,{onSelect:t,selected:m,children:[n,g,s]},g),c[8]=g,c[9]=m,c[10]=t,c[11]=n,c[12]=s,c[13]=l):l=c[13],l}try{s.displayName||(s.displayName="RepositoryListItem")}catch{}},30581:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(74848),a=n(21728),i=n(2676);let o={version:"VersionName-module__version--DI4zD"};function s(e){let t,n=(0,a.c)(3),{"data-testid":s,version:l}=e;return n[0]!==s||n[1]!==l?(t=(0,r.jsxs)(i.A,{className:o.version,as:"span","data-testid":s,children:["v",l]}),n[0]=s,n[1]=l,n[2]=t):t=n[2],t}try{s.displayName||(s.displayName="VersionName")}catch{}},39038:(e,t,n)=>{n.d(t,{_:()=>i});var r=n(74848),a=n(21728);function i(e){let t,n,i,o,s,l=(0,a.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,r.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,r.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,r.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,r.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,r.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=i):i=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_216_3161",children:(0,r.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=o):o=l[4],l[5]!==t||l[6]!==n?(s=(0,r.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[i,o]}),l[5]=t,l[6]=n,l[7]=s):s=l[7],s}try{i.displayName||(i.displayName="FigmaIcon")}catch{}},39546:(e,t,n)=>{n.d(t,{O:()=>o});var r=n(74848),a=n(21728),i=n(96540);let o=e=>{let t,n,o,s=(0,a.c)(6),{children:l,delay:c,assertive:d}=e,u=void 0===c?500:c,[m,h]=(0,i.useState)(!1);if(s[0]!==u?(t=()=>{h(!1);let e=setTimeout(()=>h(!0),u);return()=>clearTimeout(e)},n=[u,h],s[0]=u,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,i.useEffect)(t,n),!m)return null;let p=void 0!==d&&d?"assertive":"polite";return s[3]!==l||s[4]!==p?(o=(0,r.jsx)("div",{role:"alert","aria-live":p,"aria-atomic":"true",children:l}),s[3]=l,s[4]=p,s[5]=o):o=s[5],o};try{o.displayName||(o.displayName="DelayedComponent")}catch{}},9677:(e,t,n)=>{n.d(t,{O:()=>N});var r=n(74848),a=n(21728),i=n(38621),o=n(75177),s=n(87330),l=n(84217),c=n(55847),d=n(15385),u=n(63867),m=n(53110),h=n(96540);function p(e){let t,n,i,s,l=(0,a.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column"},l[2]=i):i=l[2],l[3]!==c?(s=(0,r.jsx)(o.A,{sx:t,children:(0,r.jsx)(o.A,{sx:n,children:(0,r.jsx)(o.A,{sx:i,children:c})})}),l[3]=c,l[4]=s):s=l[4],s}function f(e){let t,n,c,d,u,m=(0,a.c)(9),{children:h,onDismiss:p}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},m[0]=t):t=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},m[1]=n):n=m[1],m[2]!==h?(c=(0,r.jsx)(o.A,{sx:n,children:h}),m[2]=h,m[3]=c):c=m[3],m[4]!==p?(d=p&&(0,r.jsx)(s.K,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:i.XIcon,onClick:p,variant:"invisible",sx:{flexShrink:0}}),m[4]=p,m[5]=d):d=m[5],m[6]!==c||m[7]!==d?(u=(0,r.jsxs)(l.A,{as:"h3",sx:t,children:[c,d]}),m[6]=c,m[7]=d,m[8]=u):u=m[8],u}function g(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsx)(o.A,{sx:t,children:s}),i[1]=s,i[2]=n):n=i[2],n}function y(e){let t,n,o,s,l,d,u=(0,a.c)(11),{children:p,title:f,initiallyOpen:g}=e,[y,v]=(0,h.useState)(g??!1);u[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>v(x),u[0]=t):t=u[0],u[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},u[1]=n):n=u[1];let _=y?i.ChevronDownIcon:i.ChevronRightIcon;u[2]===Symbol.for("react.memo_cache_sentinel")?(o={mr:2},u[2]=o):o=u[2],u[3]!==_?(s=(0,r.jsx)(m.A,{icon:_,sx:o}),u[3]=_,u[4]=s):s=u[4],u[5]!==s||u[6]!==f?(l=(0,r.jsxs)(c.Q,{onClick:t,sx:n,children:[s,f]}),u[5]=s,u[6]=f,u[7]=l):l=u[7];let b=y&&p;return u[8]!==l||u[9]!==b?(d=(0,r.jsxs)(r.Fragment,{children:[l,b]}),u[8]=l,u[9]=b,u[10]=d):d=u[10],d}function x(e){return!e}function v(e){let t,n,i=(0,a.c)(3),{children:s}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},i[0]=t):t=i[0],i[1]!==s?(n=(0,r.jsx)(o.A,{sx:t,children:s}),i[1]=s,i[2]=n):n=i[2],n}function _(e){let t,n,s,l,d,u,h,p=(0,a.c)(14),{direction:f,onExpand:g}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},p[0]=t):t=p[0],p[1]!==f?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===f?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},p[1]=f,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(s={display:"flex",alignItems:"center"},p[3]=s):s=p[3];let y="below"===f?i.FoldDownIcon:i.FoldUpIcon;return p[4]===Symbol.for("react.memo_cache_sentinel")?(l={mr:2},p[4]=l):l=p[4],p[5]!==y?(d=(0,r.jsx)(m.A,{icon:y,sx:l}),p[5]=y,p[6]=d):d=p[6],p[7]!==f||p[8]!==d?(u=(0,r.jsxs)(o.A,{sx:s,children:[d,"Show content ",f]}),p[7]=f,p[8]=d,p[9]=u):u=p[9],p[10]!==g||p[11]!==n||p[12]!==u?(h=(0,r.jsx)(c.Q,{onClick:g,sx:n,children:u}),p[10]=g,p[11]=n,p[12]=u,p[13]=h):h=p[13],h}function b(e){let t,n,i=(0,a.c)(3),{children:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.l.GroupHeading,{as:"h3",children:"Reference details"}),i[0]=t):t=i[0],i[1]!==o?(n=(0,r.jsx)(d.l,{children:(0,r.jsxs)(d.l.Group,{children:[t,o]})}),i[1]=o,i[2]=n):n=i[2],n}function S(e){let t,n,i=(0,a.c)(6),{children:o,href:s,icon:l}=e;return i[0]!==l?(t=(0,r.jsx)(d.l.LeadingVisual,{children:(0,r.jsx)(m.A,{icon:l})}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=(0,r.jsxs)(d.l.LinkItem,{href:s,children:[t,o]}),i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],n}function w(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)(o.A,{sx:e,children:[(0,r.jsx)(u.A,{sx:{mb:2}}),(0,r.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function C(){let e,t,n=(0,a.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(o.A,{sx:e,children:(0,r.jsx)(o.A,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function j(e){let t,n=(0,a.c)(4),{children:i,detailsError:o,detailsLoading:s}=e;return n[0]!==i||n[1]!==o||n[2]!==s?(t=o?(0,r.jsx)(C,{}):s?(0,r.jsx)(w,{}):(0,r.jsx)(r.Fragment,{children:i}),n[0]=i,n[1]=o,n[2]=s,n[3]=t):t=n[3],t}let N={Frame:p,Header:f,Body:j,Content:v,CollapsibleSubsection:y,ContentExpander:_,Details:b,DetailLink:S,SectionDivider:g};try{p.displayName||(p.displayName="Frame")}catch{}try{f.displayName||(f.displayName="Header")}catch{}try{g.displayName||(g.displayName="SectionDivider")}catch{}try{y.displayName||(y.displayName="CollapsibleSubsection")}catch{}try{v.displayName||(v.displayName="Content")}catch{}try{_.displayName||(_.displayName="ContentExpander")}catch{}try{b.displayName||(b.displayName="Details")}catch{}try{S.displayName||(S.displayName="DetailLink")}catch{}try{w.displayName||(w.displayName="Loading")}catch{}try{C.displayName||(C.displayName="Error")}catch{}try{j.displayName||(j.displayName="Body")}catch{}},59706:(e,t,n)=>{n.d(t,{_:()=>m,I:()=>d});var r=n(74848),a=n(21728),i=n(75177),o=n(52464),s=n(34614),l=n(9677);let c={"bing-icon":"WebSearchReferencePreview-module__bing-icon--kFZ4I"};function d(e){let t,n,c,d,h,p,f,g,y,x,v,_=(0,a.c)(19),{reference:b,onDismiss:S}=e;_[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,r.jsx)(m,{}),_[0]=t,_[1]=n):(t=_[0],n=_[1]),_[2]===Symbol.for("react.memo_cache_sentinel")?(c={fontSize:0,fontWeight:400,color:"fg.muted"},_[2]=c):c=_[2],_[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},_[3]=d):d=_[3];let w=1===b.results.length?" result ":" results ";return _[4]!==b.results.length||_[5]!==w?(h=(0,r.jsxs)(i.A,{sx:t,children:[n,(0,r.jsxs)(o.A,{sx:c,children:[(0,r.jsxs)(o.A,{sx:d,children:[b.results.length," ",w]}),"from Bing search."]})]}),_[4]=b.results.length,_[5]=w,_[6]=h):h=_[6],_[7]!==S||_[8]!==h?(p=(0,r.jsx)(l.O.Header,{onDismiss:S,children:h}),_[7]=S,_[8]=h,_[9]=p):p=_[9],_[10]===Symbol.for("react.memo_cache_sentinel")?(f={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},_[10]=f):f=_[10],_[11]!==b.results?(g=b.results.map(u),_[11]=b.results,_[12]=g):g=_[12],_[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)(o.A,{sx:{fontSize:0,fontWeight:400},children:(0,r.jsx)(s.A,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),_[13]=y):y=_[13],_[14]!==g?(x=(0,r.jsx)(l.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,r.jsxs)(i.A,{sx:f,children:[g,y]})}),_[14]=g,_[15]=x):x=_[15],_[16]!==x||_[17]!==p?(v=(0,r.jsxs)(l.O.Frame,{children:[p,x]}),_[16]=x,_[17]=p,_[18]=v):v=_[18],v}function u(e,t){return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,r.jsx)(s.A,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,r.jsx)("div",{children:e.excerpt}),(0,r.jsx)(i.A,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let m=()=>{let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:c["bing-icon"]}),t[0]=e):e=t[0],e};try{d.displayName||(d.displayName="WebSearchReferencePreview")}catch{}try{m.displayName||(m.displayName="BingIcon")}catch{}},90051:(e,t,n)=>{n.d(t,{a:()=>R});var r=n(74848),a=n(70170),i=n(96679),o=n(42080),s=n(99837),l=n(74021),c=n(64515),d=n(16255),u=n(34164),m=n(24249),h=n(96540),p=n(15385),f=n(45221),g=n(22870),y=n(35642);let x={Overlay_0:"AutocompleteSuggestions-module__Overlay_0--QuLJW",suggestion:"AutocompleteSuggestions-module__suggestion--qvk1X"},v=new Set([" ",`
`]),_=new Set([".",`
`]),b=(e,t,n)=>{let r=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=n-1,a="",i=r;e>=0&&i.length>0;e--){let n=t[e]??"";for(let r of(a=n+a,v.has(n)&&(i=i.filter(e=>e.multiWord)),_.has(n)&&(i=i.filter(e=>!e.multiWord)),i.filter(e=>a.startsWith(e.triggerChar)))){let n=t[e-1]??"",o=a[1]??"";if((!n||/[\s([]/.test(n))&&(!o||!/\s/.test(o)))return{trigger:r,query:a.slice(r.triggerChar.length)};i=i.filter(e=>e!==r)}}return null},S=e=>"object"==typeof e&&null===e.value,w=e=>"string"==typeof e?e:e.value,C=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,j=(...e)=>t=>{for(let n of[...e].reverse())t.isDefaultPrevented()||n?.(t)},N=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})}),(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})}),(0,r.jsx)(p.l.Item,{disabled:!0,children:(0,r.jsx)(y.r,{})})]}),I=({suggestion:e,onSelect:t,isActive:n,id:a,parentRole:i})=>{let o={id:a,children:w(e),role:"menu"===i?"menuitem":"option",active:n,className:x.suggestion,"aria-selected":"listbox"===i&&!!n||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,r.jsx)(p.l.Item,{...o}):e.render(o)},T=({suggestions:e,portalName:t,triggerCharCoords:n,onClose:a,onCommit:i,inputRef:o,visible:s,defaultPlacement:l,activeSuggestion:c,getSuggestionId:d,id:u,menuTitle:m,role:y})=>{let v=(0,h.useRef)(null),[_,b]=(0,h.useState)(0);(0,f.A)(function(){let e=v.current?.offsetHeight??0,t=n.top+n.height,r=t+e>window.innerHeight,a=n.top-e,i=a<0,o={below:r&&!i?a:t,above:i&&!r?t:a}[l];b(Number.isNaN(o)?0:o)},[n.top,n.height,e,s,l]);let S=(0,r.jsx)(r.Fragment,{children:"loading"===e?(0,r.jsx)(N,{}):e?.map(e=>(0,r.jsx)(I,{suggestion:e,id:d(e),onSelect:()=>i(e),isActive:c===e,parentRole:y},C(e)))}),w=(0,h.useId)();return s?(0,r.jsx)(g.Ay,{onEscape:a,onClickOutside:a,returnFocusRef:o,preventFocusOnOpen:!0,portalContainerName:t,top:_,left:n.left,ref:v,className:x.Overlay_0,children:(0,r.jsx)(p.l,{role:y,id:u,"aria-label":m?void 0:"Autocomplete suggestions","aria-labelledby":m?w:void 0,children:m?(0,r.jsxs)(p.l.Group,{children:[(0,r.jsx)(p.l.GroupHeading,{id:w,children:m}),S]}):S})}):(0,r.jsx)(r.Fragment,{})};try{N.displayName||(N.displayName="LoadingIndicator")}catch{}try{I.displayName||(I.displayName="SuggestionListItem")}catch{}try{T.displayName||(T.displayName="AutocompleteSuggestions")}catch{}let A={container:"InlineAutocomplete-module__container--UwGMb",fullWidth:"InlineAutocomplete-module__fullWidth--X6eXo"},k=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},E=()=>{},R=({triggers:e,suggestions:t,onShowSuggestions:n,onHideSuggestions:p,onSelectSuggestion:f,style:g,children:y,tabInsertsSuggestions:x=!1,suggestionsPlacement:v="below",portalName:_,fullWidth:N=!1,title:I,asMenu:R,...L})=>{let[,P]=(0,h.useState)(0),O=(0,l.Lf)(L),M=(0,h.useRef)(null);(0,c.T)(y.ref??E,M);let D=function(e,t){if(h.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(y,M),F=(0,s.H)({inputRef:M,fallbackEventHandler:D.props.onChange??E}),B=(0,h.useRef)(null),$=null!==t&&t.length>0,[z,U]=(0,h.useState)(),V=Array.isArray(t)?t.find(e=>C(e)===z)??t[0]:void 0;z&&!$&&U(void 0),(0,h.useEffect)(()=>{if($){let e=(0,a.n)(()=>P(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[$]);let H=M.current&&B.current&&$?new m.Qr(M.current,(k(M.current)??0)-B.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},q=e=>{if(!V||!Array.isArray(t))return;let n=e=>{U(e?C(e):void 0)};switch(e){case"up":n(t[t.indexOf(V)-1]??t.at(-1));break;case"down":n(t[t.indexOf(V)+1]??t[0]);break;case"start":n(t[0]);break;case"end":n(t.at(-1))}},W=(e=V)=>{if(!e)return;let t=S(e),n=w(e)??"";if(!M.current||!B.current)return;let{query:r,trigger:a}=B.current,i=k(M.current)??0,o=r.length+a.triggerChar.length,s=i-o,l=t||(a.keepTriggerCharOnCommit??!0)?a.triggerChar:"",c=!t&&(a.insertSpaceOnCommit??!0),d=`${l}${n}${c?" ":""}`;p(),F(d,[s,s+o]),f?.({suggestion:e,trigger:a,query:r,target:M.current})},G=(0,h.useId)(),K=e=>`${G}-${C(e)}`,J=!R,Q=(0,h.cloneElement)(D,{...O,onBlur:j(D.props.onBlur,()=>{p()}),onKeyDownCapture:j(D.props.onKeyDownCapture,e=>{if($)switch(e.key){case"ArrowRight":case"ArrowLeft":p();break;case"Tab":x||p()}}),onChange:j(D.props.onChange,t=>{let r=k(t.currentTarget);if(null===r)return void p();let a=b(e,t.currentTarget.value,r);B.current=a&&{...a,target:t.currentTarget},B.current?n(B.current):p()}),ref:M,role:$&&J?"combobox":D.props.role,"aria-expanded":$&&J?"true":D.props["aria-expanded"],"aria-activedescendant":V?K(V):D.props["aria-activedescendant"],"aria-controls":$&&J?G:D.props["aria-controls"],"aria-owns":$&&R?G:D.props["aria-owns"],"aria-autocomplete":$&&J?"list":D.props["aria-autocomplete"],"aria-haspopup":$&&J?"listbox":D.props["aria-haspopup"]}),X=$?"loading"===t?"Loading autocomplete suggestions\u2026":J?`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${w(t[0])}" is highlighted. Press ${x?"Enter or Tab":"Enter"} to select.`:"":"";return(0,r.jsxs)(o.tL,{commands:$?{"github:cancel":()=>p(),"github:select":()=>W(),"github:focus-next":x?()=>W():void 0,"github:down":()=>q("down"),"github:up":()=>q("up"),"github:go-to-start":()=>q("start"),"github:go-to-end":()=>q("end")}:{},className:(0,u.$)(A.container,N&&A.fullWidth),style:g,children:[Q,i.KJ&&(0,r.jsx)(T,{id:G,suggestions:t,inputRef:M,onCommit:W,onClose:p,triggerCharCoords:H,visible:$,defaultPlacement:v,portalName:_,activeSuggestion:V,getSuggestionId:K,menuTitle:I,role:R?"menu":"listbox"}),i.KJ&&(0,r.jsx)(d.Z,{children:(0,r.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:X})})]})};try{R.displayName||(R.displayName="InlineAutocomplete")}catch{}},42265:(e,t,n)=>{n.d(t,{B:()=>l});var r=n(74848),a=n(98386),i=n(34164),o=n(89992);let s={container:"LeadingContent-module__container--NoK8W",isSelectable:"LeadingContent-module__isSelectable--J9kYS"},l=({style:e,className:t,children:n})=>{let{isSelectable:l}=(0,o.v)();return(0,r.jsx)("div",{className:(0,i.$)(s.container,l&&s.isSelectable,t),...(0,a.G)("list-view-item-leading-content"),style:e,children:n})};try{l.displayName||(l.displayName="ListItemLeadingContent")}catch{}},67307:(e,t,n)=>{n.d(t,{e:()=>p});var r=n(74848),a=n(98386),i=n(53110),o=n(34164),s=n(96540),l=n(78563);let c={outer:"LeadingVisual-module__outer--SJchr",hasNewActivity:"LeadingVisual-module__hasNewActivity--soQyL",defaultVariant:"LeadingVisual-module__defaultVariant--ITyiW",inner:"LeadingVisual-module__inner--O92jr"};var d=n(98391),u=n(65710);let m={container:"UnreadIndicator-module__container--RzNLy"},h=()=>(0,r.jsx)("div",{className:m.container,children:(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("list-view-item-unread-indicator"),children:"New activity."})});try{h.displayName||(h.displayName="ListItemUnreadIndicator")}catch{}function p({icon:e,color:t,description:n,newActivity:m=!1,className:p,children:f,...g}){let{variant:y}=(0,l.e)(),{setStatus:x}=(0,u.x)(),{setHasNewActivity:v}=(0,d.I)(),_=n?.trim();return(0,s.useEffect)(()=>{v(m)},[m,v]),(0,s.useEffect)(()=>{_&&x(_)},[x,_]),(0,r.jsxs)("div",{className:(0,o.$)(c.outer,"default"===y&&c.defaultVariant,m&&c.hasNewActivity,p),...g,children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{...(0,a.G)("list-view-leading-visual"),className:c.inner,children:[e&&(0,r.jsx)(i.A,{"aria-label":"",icon:e,color:t}),f,_&&(0,r.jsx)("span",{className:"sr-only",...(0,a.G)("leading-visual-text-description"),children:_})]})}),m&&(0,r.jsx)(h,{})]})}try{p.displayName||(p.displayName="ListItemLeadingVisual")}catch{}},52369:(e,t,n)=>{n.d(t,{V:()=>s});var r=n(74848),a=n(98386),i=n(34164);let o={metadata:"Metadata-module__metadata--yvrod",secondary:"Metadata-module__secondary--zMgLx",primary:"Metadata-module__primary--cJgJU",alignRight:"Metadata-module__alignRight--rp0_Z"};function s({children:e,alignment:t,variant:n,...s}){return(0,r.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...s,className:(0,i.$)(o.metadata,"primary"===n?o.primary:o.secondary,"right"===t&&o.alignRight,s.className),children:e})}try{s.displayName||(s.displayName="ListItemMetadata")}catch{}},81584:(e,t,n)=>{n.d(t,{kx:()=>w,ao:()=>S});var r,a,i=n(74848),o=n(30422),s=n(45968),l=n(98386),c=n(34164),d=n(96540),u=n(78413),m=n(78563),h=n(96222),p=n(65607),f=n(89992);let g={container:"Selection-module__container--VTcpJ",containerWithDragHandle:"Selection-module__containerWithDragHandle--xEvss",dragTrigger:"Selection-module__dragTrigger--jIZMt",compact:"Selection-module__compact--LUlY8",checkbox:"Selection-module__checkbox--nZsSH",checkboxCompact:"Selection-module__checkboxCompact--pRIwD"};var y=n(87766),x=n(14918);let v=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,f.v)(),{isSelected:r,onSelect:a}=(0,y.r)(),{title:o}=(0,x.J)();return t?(0,i.jsxs)("div",{className:n?g.containerWithDragHandle:g.container,...(0,l.G)("list-view-item-selection"),children:[n&&(0,i.jsx)(h.BS.DragTrigger,{className:(0,c.$)(g.dragTrigger,"compact"===e&&g.compact)}),(0,i.jsx)(p.A,{className:"default"===e?g.checkbox:g.checkboxCompact,checked:r,onChange:()=>a(!r),"aria-label":`Select: ${o}`,"data-listview-component":"selection-input",...(0,l.G)("list-view-item-selection-input")})]}):null};try{v.displayName||(v.displayName="ListItemSelection")}catch{}let _={anchor:"Title-module__anchor--SyQM6",heading:"Title-module__heading--upUxW",compact:"Title-module__compact--qLTco",container:"Title-module__container--l9xi7",trailingBadgesSpacer:"Title-module__trailingBadgesSpacer--TioiY",trailingBadgesContainer:"Title-module__trailingBadgesContainer--XGsbF",inline:"Title-module__inline--x4zR5"};function b({children:e,containerStyle:t,containerClassName:n,headerContainerRef:r,headingStyle:a,headingClassName:o,headingRef:s,leadingBadge:d,trailingBadges:h,header:p}){let{variant:f}=(0,m.e)(),{headingRef:g}=(0,x.J)(),y=(0,u.m)("listitem");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{...(0,l.G)("list-view-item-title-container"),style:t,className:(0,c.$)(_.container,"compact"===f&&_.compact,n),ref:r,children:[(0,i.jsxs)(y,{className:(0,c.$)(_.heading,"compact"===f&&_.compact,o),style:a,ref:e=>{if(g&&(g.current=e),s&&"current"in s)try{s.current=e}catch{}},...(0,l.G)("list-view-item-title"),children:[d,p]}),h&&(0,i.jsx)("span",{className:_.trailingBadgesSpacer}),(0,i.jsx)("span",{className:_.trailingBadgesContainer,children:h}),e]}),(0,i.jsx)(v,{})]})}function S({children:e,value:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:s,headingRef:l,leadingBadge:c,trailingBadges:u,anchorRef:m,...h}){let p=(0,d.useRef)(null),f=m||p;return j({anchorRef:f,...h}),(0,i.jsx)(b,{header:h.href||h.onClick?(0,i.jsx)(C,{anchorRef:f,...h,children:(0,i.jsx)("span",{children:t})}):(0,i.jsx)("span",{children:t}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:s,headingRef:l,leadingBadge:c,trailingBadges:u,children:e})}function w({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return j(m),(0,i.jsx)(b,{header:(0,i.jsx)(o.BC,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function C({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:r,children:a,...o}){let{as:s="a",...u}=r??{},m=(0,d.useRef)(null);return(0,i.jsx)(s,{...(0,l.G)("listitem-title-link"),style:e,ref:n||m,className:(0,c.$)(_.anchor,_.inline,t),...o,...u,children:a})}let j=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:r,headingRef:a}=(0,x.J)();return(0,d.useEffect)(()=>{(e||t)&&r(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(a?.current){let e=a.current.querySelector("a, button");e&&e.click()}})},[n,a,e,t,r]),null};try{b.displayName||(b.displayName="InternalTitle")}catch{}try{(r=TitleTag).displayName||(r.displayName="TitleTag")}catch{}try{S.displayName||(S.displayName="ListItemTitle")}catch{}try{w.displayName||(w.displayName="ListItemSafeHTMLTitle")}catch{}try{(a=function({children:e,html:t,containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return j(m),(0,i.jsx)(b,{header:(0,i.jsx)(s.JR,{html:t,...m}),containerStyle:n,containerClassName:r,headerContainerRef:a,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(a.displayName="ListItemUnsafeHTMLTitle")}catch{}try{C.displayName||(C.displayName="HeadingLink")}catch{}},99038:(e,t,n)=>{n.d(t,{Dy:()=>l,GS:()=>i,KJ:()=>o,LP:()=>c,OZ:()=>d});var r=n(74848),a=n(21728);let i=e=>{let t,n,i,o,s,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M.5 6v4.5A2.5 2.5 0 0 0 3 13h1.645a3.5 3.5 0 0 1-.11-1.5H3a1 1 0 0 1-1-1V6zM14 6v4.5a1 1 0 0 1-1 1h-1.535a3.5 3.5 0 0 1-.11 1.5H13a2.5 2.5 0 0 0 2.5-2.5V6zm-4 6a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"}),o=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.5 10V5.5A2.5 2.5 0 0 0 13 3h-1.645a3.5 3.5 0 0 1 .11 1.5H13a1 1 0 0 1 1 1V10zM2 10V5.5a1 1 0 0 1 1-1h1.535a3.5 3.5 0 0 1 .11-1.5H3A2.5 2.5 0 0 0 .5 5.5V10zm4-6a2 2 0 1 1 4 0 2 2 0 0 1-4 0",clipRule:"evenodd"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d?(s=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=s):s=l[6],s},o=e=>{let t,n,i,o,s=(0,a.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},s=e=>{let t,n,i,o,s=(0,a.c)(6);s[0]!==e?(t=void 0===e?{}:e,s[0]=e,s[1]=t):t=s[1];let{size:l}=t,c=void 0===l?16:l;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"}),s[2]=n,s[3]=i):(n=s[2],i=s[3]),s[4]!==c?(o=(0,r.jsx)("svg",{width:c,height:c,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:i}),s[4]=c,s[5]=o):o=s[5],o},l=e=>{let t,n,i,o,s,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M7.41299 14.25H1.75C1.19772 14.25 0.75 13.8023 0.75 13.25V2.75C0.75 2.19772 1.19772 1.75 1.75 1.75H5C5.31476 1.75 5.61115 1.89819 5.8 2.15L6.7 3.35C6.88885 3.60181 7.18524 3.75 7.5 3.75H14.25C14.8023 3.75 15.25 4.19772 15.25 4.75V8.48779",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),o=(0,r.jsx)("path",{d:"M12.265 9.15977C12.3446 8.94235 12.6521 8.94235 12.7317 9.15977L12.9693 9.80865C13.3464 10.8387 14.158 11.6503 15.1881 12.0274L15.8369 12.265C16.0544 12.3446 16.0544 12.6521 15.8369 12.7317L15.1881 12.9692C14.158 13.3463 13.3464 14.158 12.9693 15.188L12.7317 15.8369C12.6521 16.0543 12.3446 16.0543 12.265 15.8369L12.0275 15.188C11.6504 14.158 10.8387 13.3463 9.80871 12.9692L9.15983 12.7317C8.94241 12.6521 8.94241 12.3446 9.15983 12.265L9.80871 12.0274C10.8387 11.6503 11.6504 10.8387 12.0275 9.80865L12.265 9.15977Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d?(s=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=s):s=l[6],s},c=e=>{let t,n,i,o,s,l=(0,a.c)(7);l[0]!==e?(t=void 0===e?{}:e,l[0]=e,l[1]=t):t=l[1];let{size:c}=t,d=void 0===c?16:c;return l[2]===Symbol.for("react.memo_cache_sentinel")?(n={display:"inline-block",verticalAlign:"text-bottom"},i=(0,r.jsx)("path",{d:"M16.0376 9.67565V5.82038C16.0376 5.69043 15.9257 5.58508 15.7876 5.58508H11.6914C11.4687 5.58508 11.3571 5.83853 11.5146 5.98676L15.6108 9.84196C15.7683 9.99019 16.0376 9.88525 16.0376 9.67565Z",fill:"currentColor"}),o=(0,r.jsx)("path",{d:"M1.89601 3.25629C4.26064 1.03075 8.04807 0.960969 10.5015 3.04765L10.7339 3.25629L10.7857 3.3096C11.0259 3.58685 11.0085 3.99602 10.7339 4.25445C10.4593 4.51252 10.0254 4.52825 9.73097 4.30225L9.67336 4.25445L9.4966 4.09544C7.63201 2.50983 4.75358 2.56313 2.95656 4.25445C1.10158 6.00031 1.10158 8.83023 2.95656 10.5761C4.81155 12.322 7.8184 12.3219 9.67336 10.5761L13.563 6.91622C13.8559 6.64063 14.3307 6.64058 14.6236 6.91622C14.9163 7.19186 14.9163 7.63873 14.6236 7.91438L10.7339 11.5752C8.29328 13.8718 4.33667 13.8718 1.89601 11.5752C-0.544758 9.27799 -0.544771 5.55349 1.89601 3.25629Z",fill:"currentColor"}),l[2]=n,l[3]=i,l[4]=o):(n=l[2],i=l[3],o=l[4]),l[5]!==d?(s=(0,r.jsxs)("svg",{width:d,height:d,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",style:n,children:[i,o]}),l[5]=d,l[6]=s):s=l[6],s},d={compose:o,dice:s,loops:c,node:i,spaces:l};try{i.displayName||(i.displayName="NodeIcon")}catch{}try{o.displayName||(o.displayName="ComposeIcon")}catch{}try{s.displayName||(s.displayName="DiceIcon")}catch{}try{l.displayName||(l.displayName="SpacesIcon")}catch{}try{c.displayName||(c.displayName="LoopsIcon")}catch{}},44446:(e,t,n)=>{n.d(t,{I:()=>u});var r=n(74848),a=n(21728),i=n(34164),o=n(99038),s=n(38621);let l={container:"Icon-module__container--QOYOK",customColor:"Icon-module__customColor--HlhOS",hasBackground:"Icon-module__hasBackground--zz0fp",auburn:"Icon-module__auburn--qIzKn",blue:"Icon-module__blue--Ydgzj",brown:"Icon-module__brown--MphUd",coral:"Icon-module__coral--Jjxvj",cyan:"Icon-module__cyan--O0g_g",gray:"Icon-module__gray--rvF4R",green:"Icon-module__green--nHw65",indigo:"Icon-module__indigo--S8x7A",lemon:"Icon-module__lemon--Nc7fm",lime:"Icon-module__lime--ghjuW",olive:"Icon-module__olive--v6fBi",orange:"Icon-module__orange--AmLH_",pine:"Icon-module__pine--j5Ka1",pink:"Icon-module__pink--QHUu5",plum:"Icon-module__plum--JvLfU",purple:"Icon-module__purple--CLqTs",red:"Icon-module__red--ayaY4",teal:"Icon-module__teal--xmOZK",yellow:"Icon-module__yellow--Y3ymS"},c=new Set(Object.keys(l).filter(e=>!["container","hasBackground","customColor"].includes(e))),d=e=>e in s;function u(e){let t,n,u,m,h,p,f=(0,a.c)(19),{icon:g,hasBackground:y,color:x,size:v,className:_}=e,b=void 0!==y&&y,S=void 0===x?"gray":x,w=void 0===v?16:v;if("string"==typeof g)if(g in o.OZ)t=o.OZ[g];else{let e;f[0]!==g?(e=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return d(t)?s[t]:void 0}(g),f[0]=g,f[1]=e):e=f[1],t=e}else t=g;if(!t)return null;f[2]!==S?(n=c.has(S),f[2]=S,f[3]=n):n=f[3];let C=n,j=`${b?2*w:w}px`;f[4]!==S||f[5]!==C||f[6]!==j?(u={"--custom-size":j},C||(u["--custom-color"]=S),f[4]=S,f[5]=C,f[6]=j,f[7]=u):u=f[7];let N=C?l[S]:l.customColor,I=b&&l.hasBackground;return f[8]!==_||f[9]!==N||f[10]!==I?(m=(0,i.$)(l.container,N,I,_),f[8]=_,f[9]=N,f[10]=I,f[11]=m):m=f[11],f[12]!==t||f[13]!==w?(h=(0,r.jsx)(t,{size:w,fill:"currentColor"}),f[12]=t,f[13]=w,f[14]=h):h=f[14],f[15]!==u||f[16]!==m||f[17]!==h?(p=(0,r.jsx)("div",{style:u,className:m,children:h}),f[15]=u,f[16]=m,f[17]=h,f[18]=p):p=f[18],p}try{u.displayName||(u.displayName="Icon")}catch{}},60674:(e,t,n)=>{n.d(t,{BP:()=>u,D3:()=>d,O8:()=>l});var r=n(74848),a=n(21728),i=n(96540),o=n(96679),s=n(17515);let l={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,i.createContext)(l.ClientRender);function d(e){let t,n,d,u,m=(0,a.c)(8),{wasServerRendered:h,children:p}=e;m[0]!==h?(t=()=>o.X3?l.ServerRender:h?l.ClientHydrate:l.ClientRender,m[0]=h,m[1]=t):t=m[1];let[f,g]=(0,i.useState)(t);return m[2]!==f?(n=()=>{f!==l.ClientRender&&g(l.ClientRender)},d=[f],m[2]=f,m[3]=n,m[4]=d):(n=m[3],d=m[4]),(0,s.N)(n,d),m[5]!==p||m[6]!==f?(u=(0,r.jsx)(c.Provider,{value:f,children:p}),m[5]=p,m[6]=f,m[7]=u):u=m[7],u}function u(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},19139:(e,t,n)=>{n.d(t,{x:()=>h});var r=n(74848),a=n(38621),i=n(75177),o=n(6869),s=n(34614),l=n(10569),c=n(15385),d=n(85647);let u={Box:"SingleSignOnBanner-module__Box--iwIEO",Flash:"SingleSignOnBanner-module__Flash--XK1g3",Box_1:"SingleSignOnBanner-module__Box_1--VPBly",Octicon:"SingleSignOnBanner-module__Octicon--JXNw_",Box_2:"SingleSignOnBanner-module__Box_2--kq0MT",ForceWrap:"SingleSignOnBanner-module__ForceWrap--tZqOV",ProtectedOrgs_FullList:"SingleSignOnBanner-module__ProtectedOrgs_FullList--HTdZQ",ProtectedOrgs_Shortened:"SingleSignOnBanner-module__ProtectedOrgs_Shortened--MTXYo",ShieldLockIcon:"SingleSignOnBanner-module__ShieldLockIcon--TXlVP"};var m=n(34164);function h({className:e,portalContainerName:t,protectedOrgs:n,maxVisibleOrgNames:l=3,redirectURI:c,useFullWidthStyle:h,forceWrap:g,sx:y}){let x=(0,d.zy)();if(!n||0===n.length)return null;let v=Math.max(0,n.length-l),_=1===n.length||v>0?(0,r.jsx)("b",{children:n.slice(0,l).join(", ")}):(0,r.jsxs)("span",{children:[(0,r.jsx)("b",{children:n.slice(0,n.length-1).join(", ")}),n.length>2&&","," and ",(0,r.jsx)("b",{children:n[n.length-1]})]});return(0,r.jsx)(i.A,{sx:y,className:e,"data-testid":"sso-banner",children:(0,r.jsx)("div",{className:u.Box,children:(0,r.jsx)("section",{"aria-label":"Single sign-on information",children:(0,r.jsx)(o.A,{sx:{borderRadius:2*!h,borderWidth:h?"1px 0":1},className:u.Flash,children:1===n.length?(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ShieldLockIcon,{className:u.ShieldLockIcon}),(0,r.jsx)(s.A,{inline:!0,href:`/orgs/${n[0]}/sso?return_to=${f({location:x,redirectURI:c})}`,children:"Single sign-on"})," ","to see results in the ",(0,r.jsx)("b",{children:n[0]})," organization."]}):(0,r.jsxs)("div",{className:u.Box_1,children:[(0,r.jsx)(a.ShieldLockIcon,{className:u.Octicon}),(0,r.jsxs)("div",{className:(0,m.$)(u.Box_2,g&&u.ForceWrap),children:[(0,r.jsxs)("p",{className:u.ProtectedOrgs_FullList,children:["Single sign-on to see results in ",0===v&&"the ",l>0&&(0,r.jsxs)(r.Fragment,{children:[_," "]}),v>0&&(0,r.jsxs)(r.Fragment,{children:[l>0&&"and ",v," other"," "]}),n.length>1&&1!==v?"organizations":"organization","."]}),(0,r.jsx)("p",{className:u.ProtectedOrgs_Shortened,children:"Single sign-on to see results in your organizations"}),(0,r.jsx)("div",{style:{flexShrink:0},children:(0,r.jsx)(p,{portalContainerName:t,protectedOrgs:n,redirectURI:c})})]})]})})})})})}function p({portalContainerName:e,protectedOrgs:t,redirectURI:n}){let a=(0,d.zy)();return(0,r.jsxs)(l.W,{children:[(0,r.jsx)(l.W.Button,{size:"small",children:"Select an organization"}),(0,r.jsx)(l.W.Overlay,{portalContainerName:e,children:(0,r.jsx)(c.l,{children:t.map(e=>(0,r.jsx)(c.l.Item,{onSelect:()=>window.location.href=`/orgs/${encodeURIComponent(e)}/sso?return_to=${f({location:a,redirectURI:n})}`,children:e},`org-${e}`))})})]})}function f({location:e,redirectURI:t}){return encodeURIComponent(t?t(e):e.pathname+e.search+e.hash)}try{h.displayName||(h.displayName="SingleSignOnBanner")}catch{}try{p.displayName||(p.displayName="SingleSignOnButton")}catch{}},99543:(e,t,n)=>{n.d(t,{Qn:()=>l,T8:()=>d,Y6:()=>m,k6:()=>u});var r=n(74848),a=n(65556),i=n(96540),o=n(13233),s=n(47019);let l=5e3,c=(0,i.createContext)({addToast:o.l,addPersistedToast:o.l,clearPersistedToast:o.l}),d=(0,i.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,s.A)([]),[o,u]=(0,i.useState)(null),{safeSetTimeout:m}=(0,a.A)(),h=(0,i.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),l)},[t,m,n]),p=(0,i.useCallback)(function(e){u(e)},[u]),f=(0,i.useCallback)(function(){u(null)},[u]),g=(0,i.useMemo)(()=>({addToast:h,addPersistedToast:p,clearPersistedToast:f}),[p,h,f]),y=(0,i.useMemo)(()=>({toasts:t,persistedToast:o}),[t,o]);return(0,r.jsx)(c.Provider,{value:g,children:(0,r.jsx)(d.Provider,{value:y,children:e})})}function m(){return(0,i.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},42218:(e,t,n)=>{n.d(t,{V:()=>m});var r=n(74848),a=n(96540),i=n(99543),o=n(38621),s=n(65556),l=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,r.jsx)(o.InfoIcon,{}),success:(0,r.jsx)(o.CheckIcon,{}),error:(0,r.jsx)(o.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:i="info",role:o="log"})=>{let[u,m]=a.useState(!0),{safeSetTimeout:h}=(0,s.A)();return(0,a.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,r.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:o,children:[(0,r.jsx)("span",{className:"Toast-icon",children:n||d[i]}),(0,r.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,a.useContext)(i.T8);return(0,r.jsxs)(r.Fragment,{children:[e.map((e,t)=>(0,r.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,r.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}}}]);
//# sourceMappingURL=lazy-react-partial-global-copilot-menu-e1b56eb7f79e.js.map